import base64;exec base64.b64decode('IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBTb3VyY2VkIEZyb20gT25saW5lIFRlbXBsYXRlcywgR3VpZGVzICYgR2l0aHViCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTGljZW5zZTogR1BMIChodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvZ3BsLTMuMC5odG1sKQojIEJhc2VkIG9uIGNvZGUgZnJvbSB3aGljaCBNYW55IEFkZG9ucyBVc2UhCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmlmIDY0IC0gNjQ6IGkxMWlJaWlJaWkKaW1wb3J0IHVybGxpYgppbXBvcnQgdXJsbGliMgppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHNodXRpbAppbXBvcnQgcmUKaW1wb3J0IG9zCmltcG9ydCB4Ym1jcGx1Z2luCmltcG9ydCB4Ym1jZ3VpCmltcG9ydCB4Ym1jYWRkb24KaW1wb3J0IHhibWN2ZnMKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgY29va2llbGliCmltcG9ydCBiYXNlNjQKZnJvbSBhZGRvbiAuIGNvbW1vbiAuIG5ldCBpbXBvcnQgTmV0CmZyb20gQmVhdXRpZnVsU291cCBpbXBvcnQgQmVhdXRpZnVsU3RvbmVTb3VwICwgQmVhdXRpZnVsU291cCAsIEJlYXV0aWZ1bFNPQVAKdHJ5IDoKIGltcG9ydCBqc29uCmV4Y2VwdCA6CiBpbXBvcnQgc2ltcGxlanNvbiBhcyBqc29uCmltcG9ydCBTaW1wbGVEb3dubG9hZGVyIGFzIGRvd25sb2FkZXIKaW1wb3J0IHRpbWUKaW1wb3J0IHJlcXVlc3RzCmlmIDY1IC0gNjU6IE8wIC8gaUlpaTFJMTFJMUlJMSAlIE9vb29vb29vT08gLSBpMUlJaQpvME9PMDAgPSB4Ym1jZ3VpIC4gRGlhbG9nICggKQppZiA3OCAtIDc4OiBpMTFpIC4gb09vb09vTzBPbzBPCmlmIDEwIC0gMTA6IElJaUkxSTExaTExCm9vT08wMG9PbyA9IHsKICdBY2NlcHQnIDogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsKi8qO3E9MC44JwogfQppZiA5MiAtIDkyOiBPME8gLyBvbzAwMCAlIElpSWkxMWlJSWkxSWkgLyBvME9PTyAtIGlpaWlJaTExaSAuIElpMUkKSWlpSUlJMTExaUkgPSBbICdhbGxkZWJyaWQuY29tJyAsICdhbGxteXZpZGVvcy5uZXQnICwgJ2FsbHZpZC5jaCcgLCAnYXVlbmdpbmUuY29tJyAsICdiZXN0c3RyZWFtcy5uZXQnICwgJ2JyaXNrZmlsZS5jb20nICwgJ2Nhc3RhbXAuY29tJyAsICdjbGlja251cGxvYWQuY29tJyAsICdjbGlja251cGxvYWQubWUnICwgJ2NsaWNrbnVwbG9hZC5saW5rJyAsICdjbG91ZHkuZWMnICwgJ2Nsb3VkemlsbGEudG8nICwgJ25lb2RyaXZlLmNvJyAsICdjcnVuY2h5cm9sbC5jb20nICwgJ2RhY2xpcHMuaW4nICwgJ2RhY2xpcHMuY29tJyAsICdkYWlseW1vdGlvbi5jb20nICwgJ2RpdnhzdGFnZS5ldScgLCAnZGl2eHN0YWdlLm5ldCcgLCAnZGl2eHN0YWdlLnRvJyAsICdjb3VsZHRpbWUudG8nICwgJ2Vjb3N0cmVhbS50dicgLCAnZXhhc2hhcmUuY29tJyAsICdmYWNlYm9vay5jb20nICwgJ2Zhc3RwbGF5LnN4JyAsICdmaWxlaG9vdC5jb20nICwgJ2ZpbGVudWtlLmNvbScgLCAnZmlsZXB1cC5uZXQnICwgJ2ZpbG1zaG93b25saW5lLm5ldCcgLCAnZmxhc2h4LnR2JyAsICdwbHVzLmdvb2dsZS5jb20nICwgJ2dvb2dsZXZpZGVvLmNvbScgLCAncGljYXNhd2ViLmdvb2dsZS5jb20nICwgJ2dvb2dsZXVzZXJjb250ZW50LmNvbScgLCAnZ29vZ2xlZHJpdmUuY29tJyAsICdnb3JpbGxhdmlkLmluJyAsICdnb3JpbGxhdmlkLmNvbScgLCAnZ29yaWxsYXZpZC5pbicgLCAnZ3JpZnRob3N0LmNvbScgLCAnaHVnZWZpbGVzLm5ldCcgLCAnaWRvd2F0Y2gubmV0JyAsICdpbmRhdmlkZW8uaHUnICwgJ2lzaGFyZWQuZXUnICwgJ2pldGxvYWQudHYnICwgJ2tpbmdmaWxlcy5uZXQnICwgJ2xldHdhdGNoLnVzJyAsICdsZXR3YXRjaC50bycgLCAndmlkc2hhcmUudXMnICwgJ21haWwucnUnICwgJ215Lm1haWwucnUnICwgJ3ZpZGVvYXBpLm15Lm1haWwucnUnICwgJ2FwaS52aWRlby5tYWlsLnJ1JyAsICdtZWdhLWRlYnJpZC5ldScgLCAnbWVnYW1wNC5uZXQnICwgJ21lcnNhbGFheWl0dGVuLmNvbScgLCAnbW92ZGl2eC5jb20nICwgJ21vdnBvZC5uZXQnICwgJ21vdnBvZC5pbicgLCAnbW92c2hhcmUubmV0JyAsICd3aG9sZWNsb3VkLm5ldCcgLCAnbXA0ZW5naW5lLmNvbScgLCAnbXA0c3RyZWFtLmNvbScgLCAnbXA0dXBsb2FkLmNvbScgLCAnbXl2aWRzdHJlYW0ubmV0JyAsICdub3N2aWRlby5jb20nICwgJ25vc2xvY2tlci5jb20nICwgJ2F1cm9yYXZpZC50bycgLCAnbm92YW1vdi5jb20nICwgJ25vd3ZpZGVvLnN4JyAsICdub3d2aWRlby5ldScgLCAnbm93dmlkZW8uY2gnICwgJ25vd3ZpZGVvLnN4JyAsICdub3d2aWRlby5jbycgLCAnbm93dmlkZW8ubGknICwgJ25vd3ZpZGVvLmVjJyAsICdub3d2aWRlby5hdCcgLCAnbm93dmlkZW8uZm8nICwgJ29rLnJ1JyAsICdvZG5va2xhc3NuaWtpLnJ1JyAsICdvcGVubG9hZC5pbycgLCAnb3BlbmxvYWQuY28nICwgJ3BsYXk0NC5uZXQnICwgJ3BsYXllZC50bycgLCAncGxheWhkLnZpZGVvJyAsICdwbGF5aGQuZm8nICwgJ3BsYXl1Lm5ldCcgLCAncGxheXUubWUnICwgJ3BsYXl3aXJlLmNvbScgLCAnUHJlbWl1bWl6ZS5tZScgLCAncHJpbWVzaGFyZS50dicgLCAncHJvbXB0ZmlsZS5jb20nICwgJ3B1cmV2aWQuY29tJyAsICdyYXBpZHZpZGVvLndzJyAsICdyYXBpZHZpZGVvLmNvbScgLCAnYXBpLnJlYWwtZGVicmlkLmNvbScgLCAncHJlbWl1bS5ycG5ldC5iaXonICwgJ3J1dHViZS5ydScgLCAnc2hhcmVkMi5tZScgLCAnc2hhcmVkLnN4JyAsICdzaGFyZXJlcG8uY29tJyAsICdzaGFyZXNpeC5jb20nICwgJ3NpbXBseS1kZWJyaWQuY29tJyAsICdzcGVlZHBsYXkueHl6JyAsICdzcGVlZHBsYXkudXMnICwgJ3NwZWVkcGxheTMucHcnICwgJ3NwZWVkdmlkZW8ubmV0JyAsICdzdGFnZXZ1LmNvbScgLCAnc3RyZWFtY2xvdWQuZXUnICwgJ3N0cmVhbWluLnRvJyAsICd0ZXJhbWl4ZXIuY29tJyAsICd0aGV2aWRlby5tZScgLCAndGhldmlkZW9zLnR2JyAsICd0b2x0c2QtZmVsLnRrJyAsICd0cm9sbHZpZC5uZXQnICwgJ3R1bmUucGsnICwgJ3R1c2ZpbGVzLm5ldCcgLCAndHdpdGNoLnR2JyAsICd1cDJzdHJlYW0uY29tJyAsICd1cGxvYWQuYWYnICwgJ3VwbG9hZGMuY29tJyAsICd1cGxvYWRjLmNoJyAsICd6YWxhYS5jb20nICwgJ3VwbG9hZHgub3JnJyAsICd1cHRvYm94LmNvbScgLCAndXB0b3N0cmVhbS5jb20nICwgJ3VzZXJmaWxlcy5jb20nICwgJ3VzZXJzY2xvdWQuY29tJyAsICd2ZWVoZC5jb20nICwgJ3Zlb2guY29tJyAsICd2aWQuYWcnICwgJ3ZpZGJ1bGwuY29tJyAsICd2aWRjcmF6eS5uZXQnICwgJ3VwbG9hZGNyYXp5Lm5ldCcgLCAndGhldmlkZW9iZWUudG8nICwgJ3ZpZGVvYm94ZXIuY28nICwgJ3ZpZGdnLnRvJyAsICd2aWQuZ2cnICwgJ3ZpZGVvaHV0LnRvJyAsICd2aWRlb21lZ2EudHYnICwgJ3ZpZGVvcmFqLnRvJyAsICd2aWRlb3Jldi5jYycgLCAndmlkZW9za3kudG8nICwgJ3ZpZGVvLnR0JyAsICd2aWRlb3dlZWQuZXMnICwgJ2JpdHZpZC5zeCcgLCAndmlkZW93ZWVkLmNvbScgLCAndmlkZW93b29kLnR2JyAsICdieXpvby5vcmcnICwgJ3BsYXlwYW5kYS5uZXQnICwgJ3ZpZGVvem9vLm1lJyAsICd2aWRlb3dpbmcubWUnICwgJ3ZpZGVvd2luZy5tZScgLCAnZWFzeXZpZGVvLm1lJyAsICdwbGF5NDQubmV0JyAsICdwbGF5YmIubWUnICwgJ3ZpZGVvNDQubmV0JyAsICd2aWRpby5zeCcgLCAndmlkLm1lJyAsICd2aWRzcG90Lm5ldCcgLCAndmlkdG8ubWUnICwgJ3ZpZHVwLm1lJyAsICd2aWR1cC5vcmcnICwgJ3ZpZHppLnR2JyAsICd2aW1lby5jb20nICwgJ3Zpdm8uc3gnICwgJ3ZrLmNvbScgLCAndmtwYXNzLmNvbScgLCAndm9kbG9ja2VyLmNvbScgLCAndnNoYXJlLmlvJyAsICd2c2hhcmUuZXUnICwgJ3dhdGNoZXJzLnRvJyAsICd3YXRjaG9ubGluZS50bycgLCAnd2F0Y2h2aWRlby51cycgLCAnd2F0Y2h2aWRlbzIudXMnICwgJ3dhdGNodmlkZW8zLnVzJyAsICd3YXRjaHZpZGVvNC51cycgLCAnd2F0Y2h2aWRlbzUudXMnICwgJ3dhdGNodmlkZW82LnVzJyAsICd3YXRjaHZpZGVvNy51cycgLCAnd2F0Y2h2aWRlbzgudXMnICwgJ3dhdGNodmlkZW85LnVzJyAsICd3ZXNoYXJlLm1lJyAsICd4dmlkc3RhZ2UuY29tJyAsICd5b3Vsb2wuYml6JyAsICdzaGl0bW92aWUuY29tJyAsICd5b3VydXBsb2FkLmNvbScgLCAneW91dHViZS5jb20nICwgJ3lvdXR1LmJlJyAsICd5b3V3YXRjaC5vcmcnICwgJ2FwaS56ZXZlcmEuY29tJyAsICd6ZXR0YWhvc3QudHYnICwgJ3pzdHJlYW0udG8nIF0KaWYgMzQgLSAzNDogaWlpMUkxSSAvIE8wMG9Pb09vTzBvME8gLiBPMG9vME9PMCArIE9vMG9vTzBvbzBvTyAuIEkxaTFpSTFpIC0gSUkKT28gPSBbICdwbHVnaW4udmlkZW8uZHJhbWFzb25saW5lJyAsICdwbHVnaW4udmlkZW8uZjRtVGVzdGVyJyAsICdwbHVnaW4udmlkZW8uc2hhaGlkbWJjbmV0JyAsICdwbHVnaW4udmlkZW8uU3BvcnRzRGV2aWwnICwgJ3BsdWdpbi5zdHJlYW0udmF1Z2hubGl2ZS50dicgLCAncGx1Z2luLnZpZGVvLlplbVRWLXNoYW5pJyBdCmlmIDI3IC0gMjc6IE9vMG9vTzBvbzBvTyAqIE9vb29vb29vT08gKyBpaWkxSTFJICogSUkgLSBpMTFpSWlpSWlpIC0gTzBvbzBPTzAKY2xhc3MgSWlpaUlpSTFpSWlJMSAoIHVybGxpYjIgLiBIVFRQRXJyb3JQcm9jZXNzb3IgKSA6CiBkZWYgaHR0cF9yZXNwb25zZSAoIHNlbGYgLCByZXF1ZXN0ICwgcmVzcG9uc2UgKSA6CiAgcmV0dXJuIHJlc3BvbnNlCiBodHRwc19yZXNwb25zZSA9IGh0dHBfcmVzcG9uc2UKIGlmIDg1IC0gODU6IE8wTwppSWkxSUlpaTExSSA9ICdhSFIwY0RvdkwyRnFZblZwYkdSekxuVnJMM0JoZFd4emQyOXliR1F2YUc5dFpTNTRiV3c9JyAuIGRlY29kZSAoICdiYXNlNjQnICkKaWYgODQgLSA4NDogaUlpaTFJMTFJMUlJMSAuIE9vMG9vTzBvbzBvTyAvIE9vMG9vTzBvbzBvTyAlIE9vMG9vTzBvbzBvTwppMTEgPSB4Ym1jYWRkb24gLiBBZGRvbiAoICdwbHVnaW4udmlkZW8ucGF1bHNfd29ybGQnICkKSTExID0gaTExIC4gZ2V0QWRkb25JbmZvICggJ3ZlcnNpb24nICkKT28wbzAwMDBvMG8wID0geGJtYyAuIHRyYW5zbGF0ZVBhdGggKCBpMTEgLiBnZXRBZGRvbkluZm8gKCAncHJvZmlsZScgKSAuIGRlY29kZSAoICd1dGYtOCcgKSApCm9PbzBvb29vMDBvID0geGJtYyAuIHRyYW5zbGF0ZVBhdGggKCBpMTEgLiBnZXRBZGRvbkluZm8gKCAncGF0aCcgKSAuIGRlY29kZSAoICd1dGYtOCcgKSApCm9PMG8wbzBvb08wb08gPSBvcyAuIHBhdGggLiBqb2luICggT28wbzAwMDBvMG8wICwgJ2Zhdm9yaXRlcycgKQpvbzBvME8wMCA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvMDAwMG8wbzAgLCAnaGlzdG9yeScgKQppZiA2OCAtIDY4OiBJaTFJIC4gb09vb09vTzBPbzBPIC8gTzBvbzBPTzAKb09Pb28gPSBvcyAuIHBhdGggLiBqb2luICggT28wbzAwMDBvMG8wICwgJ2xpc3RfcmV2aXNpb24nICkKSTFJaUlpaUlJSSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvT28wb29vbzAwbyAsICdpY29uLnBuZycgKQppSTExID0gb3MgLiBwYXRoIC4gam9pbiAoIG9PbzBvb29vMDBvICwgJ2ZhbmFydC5qcGcnICkKaUlJMTExaWkgPSBvcyAuIHBhdGggLiBqb2luICggT28wbzAwMDBvMG8wICwgJ3NvdXJjZV9maWxlJyApCmkxaUlJaTEgPSBPbzBvMDAwMG8wbzAKaWYgNTAgLSA1MDogaTExaUlpaUlpaSAtIE8wMG9Pb09vTzBvME8KZG93bmxvYWRlciA9IGRvd25sb2FkZXIgLiBTaW1wbGVEb3dubG9hZGVyICggKQpvbzBPb28wID0gaTExIC4gZ2V0U2V0dGluZyAoICdkZWJ1ZycgKQppZiBvcyAuIHBhdGggLiBleGlzdHMgKCBvTzBvMG8wb29PMG9PICkgPT0gVHJ1ZSA6CiBJMUkxMUkxSTFJID0gb3BlbiAoIG9PMG8wbzBvb08wb08gKSAuIHJlYWQgKCApCmVsc2UgOiBJMUkxMUkxSTFJID0gWyBdCmlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIGlJSTExMWlpICkgPT0gVHJ1ZSA6CiBPb29PME9PID0gb3BlbiAoIGlJSTExMWlpICkgLiByZWFkICggKQplbHNlIDogT29vTzBPTyA9IFsgXQppZiAyOCAtIDI4OiBpMTFpCmlmIDI4IC0gMjg6IGlJaWkxSTExSTFJSTEgLSBpMUlJaQpkZWYgT08gKCBzdHJpbmcgKSA6CiBpZiBvbzBPb28wID09ICd0cnVlJyA6CiAgeGJtYyAuIGxvZyAoICJbYWRkb24ubGl2ZS5wcm9qZWN0bV06ICVzIiAlICggSTExICwgc3RyaW5nICkgKQogIGlmIDU1IC0gNTU6IE8wTyAvIG8wT09PICogSWkxSQogIGlmIDg2IC0gODY6IGkxMWlJaWlJaWkgKyBPMDBvT29Pb08wbzBPICsgSUkgKiBpaWkxSTFJICsgSWlJaTExaUlJaTFJaQpkZWYgb09vTyAoIHVybCAsIGhlYWRlcnMgPSBOb25lICkgOgogdHJ5IDoKICBoZWFkZXJzID0geyAnVXNlci1hZ2VudCcgOiAnTXlBZ2VudCcgfQogIG9PbyA9IHVybGxpYjIgLiBSZXF1ZXN0ICggdXJsICwgTm9uZSAsIGhlYWRlcnMgKQogIG9Pb09vTyA9IHVybGxpYjIgLiB1cmxvcGVuICggb09vICkKICBpaTFJID0gb09vT29PIC4gcmVhZCAoICkKICBvT29Pb08gLiBjbG9zZSAoICkKICByZXR1cm4gaWkxSQogZXhjZXB0IHVybGxpYjIgLiBVUkxFcnJvciAsIE9vb08wIDoKICBPTyAoICdVUkw6ICcgKyB1cmwgKQogIGlmIGhhc2F0dHIgKCBPb29PMCAsICdjb2RlJyApIDoKICAgT08gKCAnV2UgZmFpbGVkIHdpdGggZXJyb3IgY29kZSAtICVzLicgJSBPb29PMCAuIGNvZGUgKQogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oUGF1bHMgV29ybGQsV2UgZmFpbGVkIHdpdGggZXJyb3IgY29kZSAtICIgKyBzdHIgKCBPb29PMCAuIGNvZGUgKSArICIsMTAwMDAsIiArIEkxSWlJaWlJSUkgKyAiKSIgKQogIGVsaWYgaGFzYXR0ciAoIE9vb08wICwgJ3JlYXNvbicgKSA6CiAgIE9PICggJ1dlIGZhaWxlZCB0byByZWFjaCBhIHNlcnZlci4nICkKICAgT08gKCAnUmVhc29uOiAlcycgJSBPb29PMCAuIHJlYXNvbiApCiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihQYXVscyBXb3JsZCxXZSBmYWlsZWQgdG8gcmVhY2ggYSBzZXJ2ZXIuIC0gIiArIHN0ciAoIE9vb08wIC4gcmVhc29uICkgKyAiLDEwMDAwLCIgKyBJMUlpSWlpSUlJICsgIikiICkKICAgaWYgMzUgLSAzNTogSWkxSSAlIEkxaTFpSTFpICUgaTExaUlpaUlpaSAvIE9vb29vb29vT08KICAgaWYgMTMgLSAxMzogaTFJSWkgLSBPMDBvT29Pb08wbzBPICUgaWlpaUlpMTFpIC8gaUlpaTFJMTFJMUlJMSAlIE8wb28wT08wCmRlZiBvbyAoICkgOgogT08gKCAiQ1BJbmRleCIgKQogTzBvME9vICggaUlpMUlJaWkxMUkgLCAnJyApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgNzggLSA3ODogaUlpaTFJMTFJMUlJMSAtIE8wMG9Pb09vTzBvME8gKiBPME8gKyBJaUlpMTFpSUlpMUlpICsgTzBvbzBPTzAgKyBPMG9vME9PMApkZWYgSTExSTExaTFJICggdXJsICkgOgogb09vID0gdXJsbGliMiAuIFJlcXVlc3QgKCB1cmwgKQogb09vIC4gYWRkX2hlYWRlciAoICdVc2VyLUFnZW50JyAsICdNb3ppbGxhLzUuMCAoV2luZG93czsgVTsgV2luZG93cyBOVCA1LjE7IGVuLUdCOyBydjoxLjkuMC4zKSBHZWNrby8yMDA4MDkyNDE3IEZpcmVmb3gvMy4wLjMnICkKIG9Pb09vTyA9ICcnCiBpaTExaTFpSUlJID0gJycKIHRyeSA6CiAgb09vT29PID0gdXJsbGliMiAuIHVybG9wZW4gKCBvT28gKQogIGlpMTFpMWlJSUkgPSBvT29Pb08gLiByZWFkICggKQogIG9Pb09vTyAuIGNsb3NlICggKQogZXhjZXB0IDogcGFzcwogaWYgaWkxMWkxaUlJSSAhPSAnJyA6CiAgcmV0dXJuIGlpMTFpMWlJSUkKIGVsc2UgOgogIGlpMTFpMWlJSUkgPSAnT3BlbmVkJwogIHJldHVybiBpaTExaTFpSUlJCiAgaWYgMyAtIDM6IGkxSUlpIC8gb09vb09vTzBPbzBPICUgaWlpMUkxSSAqIGkxMWlJaWlJaWkgLyBPMCAqIGlpaTFJMUkKZGVmIElJSTFpaTFpSUkgKCApIDoKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG9PMG8wbzBvb08wb08gKSA9PSBUcnVlIDoKICBvbzBvb29vb08wICggJ0Zhdm9yaXRlcycgLCAndXJsJyAsIDQgLCBvcyAuIHBhdGggLiBqb2luICggb09vMG9vb28wMG8gLCAncmVzb3VyY2VzJyAsICdmYXZvcml0ZS5wbmcnICkgLCBpSTExICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgaTExIC4gZ2V0U2V0dGluZyAoICJicm93c2VfeG1sX2RhdGFiYXNlIiApID09ICJ0cnVlIiA6CiAgb28wb29vb29PMCAoICdYTUwgRGF0YWJhc2UnICwgJ2h0dHA6Ly94Ym1jcGx1cy54Yi5mdW5waWMuZGUvd3d3LWRhdGEvZmlsZXN5c3RlbS8nICwgMTUgLCBJMUlpSWlpSUlJICwgaUkxMSAsICcnICwgJycgLCAnJyAsICcnICkKIGlmIGkxMSAuIGdldFNldHRpbmcgKCAiYnJvd3NlX2NvbW11bml0eSIgKSA9PSAidHJ1ZSIgOgogIG9vMG9vb29vTzAgKCAnQ29tbXVuaXR5IEZpbGVzJyAsICdjb21tdW5pdHlfZmlsZXMnICwgMTYgLCBJMUlpSWlpSUlJICwgaUkxMSAsICcnICwgJycgLCAnJyAsICcnICkKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG9vMG8wTzAwICkgPT0gVHJ1ZSA6CiAgb28wb29vb29PMCAoICdTZWFyY2ggSGlzdG9yeScgLCAnaGlzdG9yeScgLCAyNSAsIG9zIC4gcGF0aCAuIGpvaW4gKCBvT28wb29vbzAwbyAsICdyZXNvdXJjZXMnICwgJ2Zhdm9yaXRlLnBuZycgKSAsIGlJMTEgLCAnJyAsICcnICwgJycgLCAnJyApCiBpZiBpMTEgLiBnZXRTZXR0aW5nICggInNlYXJjaHl0IiApID09ICJ0cnVlIiA6CiAgb28wb29vb29PMCAoICdTZWFyY2g6WW91dHViZScgLCAneW91dHViZScgLCAyNSAsIEkxSWlJaWlJSUkgLCBpSTExICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgaTExIC4gZ2V0U2V0dGluZyAoICJzZWFyY2hETSIgKSA9PSAidHJ1ZSIgOgogIG9vMG9vb29vTzAgKCAnU2VhcmNoOmRhaWx5bW90aW9uJyAsICdkbW90aW9uJyAsIDI1ICwgSTFJaUlpaUlJSSAsIGlJMTEgLCAnJyAsICcnICwgJycgLCAnJyApCiBpZiBpMTEgLiBnZXRTZXR0aW5nICggIlB1bHNhck0iICkgPT0gInRydWUiIDoKICBvbzBvb29vb08wICggJ1B1bHNhcjpJTURCJyAsICdJTURCaWRwbGF5JyAsIDI3ICwgSTFJaUlpaUlJSSAsIGlJMTEgLCAnJyAsICcnICwgJycgLCAnJyApCiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBpSUkxMTFpaSApID09IFRydWUgOgogIGkxMUlpaWkgPSBqc29uIC4gbG9hZHMgKCBvcGVuICggaUlJMTExaWkgLCAiciIgKSAuIHJlYWQgKCApICkKICBpZiAyMyAtIDIzOiBJaUlpMTFpSUlpMUlpIC4gaTExaQogIGlmIGxlbiAoIGkxMUlpaWkgKSA+IDEgOgogICBmb3IgT28wTzBPT09vbyBpbiBpMTFJaWlpIDoKICAgIGlmIDk1IC0gOTU6IE8wTyAlIGlpaWlJaTExaSAuIE8wCiAgICBpZiBpc2luc3RhbmNlICggT28wTzBPT09vbyAsIGxpc3QgKSA6CiAgICAgb28wb29vb29PMCAoIE9vME8wT09Pb28gWyAwIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCBPbzBPME9PT29vIFsgMSBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIEkxSWlJaWlJSUkgLCBpSTExICwgJycgLCAnJyAsICcnICwgJycgLCAnc291cmNlJyApCiAgICBlbHNlIDoKICAgICBJMWkxSSA9IEkxSWlJaWlJSUkKICAgICBvT08wMG9PTyA9IGlJMTEKICAgICBPb09vID0gJycKICAgICBpSSA9ICcnCiAgICAgY3JlZGl0cyA9ICcnCiAgICAgbzAwTyA9ICcnCiAgICAgaWYgT28wTzBPT09vbyAuIGhhc19rZXkgKCAndGh1bWJuYWlsJyApIDoKICAgICAgSTFpMUkgPSBPbzBPME9PT29vIFsgJ3RodW1ibmFpbCcgXQogICAgIGlmIE9vME8wT09Pb28gLiBoYXNfa2V5ICggJ2ZhbmFydCcgKSA6CiAgICAgIG9PTzAwb09PID0gT28wTzBPT09vbyBbICdmYW5hcnQnIF0KICAgICBpZiBPbzBPME9PT29vIC4gaGFzX2tleSAoICdkZXNjcmlwdGlvbicgKSA6CiAgICAgIE9vT28gPSBPbzBPME9PT29vIFsgJ2Rlc2NyaXB0aW9uJyBdCiAgICAgaWYgT28wTzBPT09vbyAuIGhhc19rZXkgKCAnZGF0ZScgKSA6CiAgICAgIGlJID0gT28wTzBPT09vbyBbICdkYXRlJyBdCiAgICAgaWYgT28wTzBPT09vbyAuIGhhc19rZXkgKCAnZ2VucmUnICkgOgogICAgICBvMDBPID0gT28wTzBPT09vbyBbICdnZW5yZScgXQogICAgIGlmIE9vME8wT09Pb28gLiBoYXNfa2V5ICggJ2NyZWRpdHMnICkgOgogICAgICBjcmVkaXRzID0gT28wTzBPT09vbyBbICdjcmVkaXRzJyBdCiAgICAgb28wb29vb29PMCAoIE9vME8wT09Pb28gWyAndGl0bGUnIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCBPbzBPME9PT29vIFsgJ3VybCcgXSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDEgLCBJMWkxSSAsIG9PTzAwb09PICwgT29PbyAsIG8wME8gLCBpSSAsIGNyZWRpdHMgLCAnc291cmNlJyApCiAgICAgaWYgNjkgLSA2OTogaWlpaUlpMTFpICUgSTFpMWlJMWkgLSBJaUlpMTFpSUlpMUlpICsgSTFpMWlJMWkgLSBPMCAlIE9vb29vb29vT08KICBlbHNlIDoKICAgaWYgbGVuICggaTExSWlpaSApID09IDEgOgogICAgaWYgaXNpbnN0YW5jZSAoIGkxMUlpaWkgWyAwIF0gLCBsaXN0ICkgOgogICAgIE8wbzBPbyAoIGkxMUlpaWkgWyAwIF0gWyAxIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCBpSTExICkKICAgIGVsc2UgOgogICAgIE8wbzBPbyAoIGkxMUlpaWkgWyAwIF0gWyAndXJsJyBdICwgaTExSWlpaSBbIDAgXSBbICdmYW5hcnQnIF0gKQogICAgIGlmIDMxIC0gMzE6IGkxMWkgLSBJaTFJIC4gSTFpMWlJMWkgJSBvbzAwMCAtIE8wCiAgICAgaWYgNCAtIDQ6IGkxMWkgLyBJSSAuIE8wb28wT08wCmRlZiBPMG9vME9PMG9PT09vICggdXJsID0gTm9uZSApIDoKIGlmIHVybCBpcyBOb25lIDoKICBpZiBub3QgaTExIC4gZ2V0U2V0dGluZyAoICJuZXdfZmlsZV9zb3VyY2UiICkgPT0gIiIgOgogICBpMWkxaTExSUlpID0gaTExIC4gZ2V0U2V0dGluZyAoICduZXdfZmlsZV9zb3VyY2UnICkgLiBkZWNvZGUgKCAndXRmLTgnICkKICBlbGlmIG5vdCBpMTEgLiBnZXRTZXR0aW5nICggIm5ld191cmxfc291cmNlIiApID09ICIiIDoKICAgaTFpMWkxMUlJaSA9IGkxMSAuIGdldFNldHRpbmcgKCAnbmV3X3VybF9zb3VyY2UnICkgLiBkZWNvZGUgKCAndXRmLTgnICkKIGVsc2UgOgogIGkxaTFpMTFJSWkgPSB1cmwKIGlmIGkxaTFpMTFJSWkgPT0gJycgb3IgaTFpMWkxMUlJaSBpcyBOb25lIDoKICByZXR1cm4KIE9PICggJ0FkZGluZyBOZXcgU291cmNlOiAnICsgaTFpMWkxMUlJaSAuIGVuY29kZSAoICd1dGYtOCcgKSApCiBpZiAzMyAtIDMzOiBJaUlpMTFpSUlpMUlpICsgSWkxSSAqIE8wTyAtIElJaUkxSTExaTExIC8gaWlpaUlpMTFpICUgTzAwb09vT29PMG8wTwogSUkxaTFJaWlJSWkxMSA9IE5vbmUKIGlpMUkgPSBpSTFJaTExaUlJMSAoIGkxaTFpMTFJSWkgKQogcHJpbnQgJ3NvdXJjZV91cmwnICwgaTFpMWkxMUlJaQogaWYgaXNpbnN0YW5jZSAoIGlpMUkgLCBCZWF1dGlmdWxTT0FQICkgOgogIGlmIGlpMUkgLiBmaW5kICggJ2NoYW5uZWxzX2luZm8nICkgOgogICBJSTFpMUlpaUlJaTExID0gaWkxSSAuIGNoYW5uZWxzX2luZm8KICBlbGlmIGlpMUkgLiBmaW5kICggJ2l0ZW1zX2luZm8nICkgOgogICBJSTFpMUlpaUlJaTExID0gaWkxSSAuIGl0ZW1zX2luZm8KIGlmIElJMWkxSWlpSUlpMTEgOgogIE9vME8wTzBvb08wTyA9IHsgfQogIE9vME8wTzBvb08wTyBbICd1cmwnIF0gPSBpMWkxaTExSUlpCiAgdHJ5IDogT28wTzBPMG9vTzBPIFsgJ3RpdGxlJyBdID0gSUkxaTFJaWlJSWkxMSAuIHRpdGxlIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IE9vME8wTzBvb08wTyBbICd0aHVtYm5haWwnIF0gPSBJSTFpMUlpaUlJaTExIC4gdGh1bWJuYWlsIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IE9vME8wTzBvb08wTyBbICdmYW5hcnQnIF0gPSBJSTFpMUlpaUlJaTExIC4gZmFuYXJ0IC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IE9vME8wTzBvb08wTyBbICdnZW5yZScgXSA9IElJMWkxSWlpSUlpMTEgLiBnZW5yZSAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBPbzBPME8wb29PME8gWyAnZGVzY3JpcHRpb24nIF0gPSBJSTFpMUlpaUlJaTExIC4gZGVzY3JpcHRpb24gLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgdHJ5IDogT28wTzBPMG9vTzBPIFsgJ2RhdGUnIF0gPSBJSTFpMUlpaUlJaTExIC4gZGF0ZSAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBPbzBPME8wb29PME8gWyAnY3JlZGl0cycgXSA9IElJMWkxSWlpSUlpMTEgLiBjcmVkaXRzIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogZWxzZSA6CiAgaWYgJy8nIGluIGkxaTFpMTFJSWkgOgogICBJSUlJaWkgPSBpMWkxaTExSUlpIC4gc3BsaXQgKCAnLycgKSBbIC0gMSBdIC4gc3BsaXQgKCAnLicgKSBbIDAgXQogIGlmICdcXCcgaW4gaTFpMWkxMUlJaSA6CiAgIElJSUlpaSA9IGkxaTFpMTFJSWkgLiBzcGxpdCAoICdcXCcgKSBbIC0gMSBdIC4gc3BsaXQgKCAnLicgKSBbIDAgXQogIGlmICclJyBpbiBJSUlJaWkgOgogICBJSUlJaWkgPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBJSUlJaWkgKQogIE8wbzAgPSB4Ym1jIC4gS2V5Ym9hcmQgKCBJSUlJaWkgLCAnRGlzcGxheWVkIE5hbWUsIFJlbmFtZT8nICkKICBPMG8wIC4gZG9Nb2RhbCAoICkKICBpZiAoIE8wbzAgLiBpc0NvbmZpcm1lZCAoICkgPT0gRmFsc2UgKSA6CiAgIHJldHVybgogIE9PMDBPbyA9IE8wbzAgLiBnZXRUZXh0ICggKQogIGlmIGxlbiAoIE9PMDBPbyApID09IDAgOgogICByZXR1cm4KICBPbzBPME8wb29PME8gPSB7IH0KICBPbzBPME8wb29PME8gWyAndGl0bGUnIF0gPSBPTzAwT28KICBPbzBPME8wb29PME8gWyAndXJsJyBdID0gaTFpMWkxMUlJaQogIE9vME8wTzBvb08wTyBbICdmYW5hcnQnIF0gPSBvT08wMG9PTwogIGlmIDUxIC0gNTE6IE9vMG9vTzBvbzBvTyAqIElpSWkxMWlJSWkxSWkgKyBpaWkxSTFJICsgTzBPCiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBpSUkxMTFpaSApID09IEZhbHNlIDoKICBvME8wTzAwID0gWyBdCiAgbzBPME8wMCAuIGFwcGVuZCAoIE9vME8wTzBvb08wTyApCiAgbzAwMG8gPSBvcGVuICggaUlJMTExaWkgLCAidyIgKQogIG8wMDBvIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBvME8wTzAwICkgKQogIG8wMDBvIC4gY2xvc2UgKCApCiBlbHNlIDoKICBpMTFJaWlpID0ganNvbiAuIGxvYWRzICggb3BlbiAoIGlJSTExMWlpICwgInIiICkgLiByZWFkICggKSApCiAgaTExSWlpaSAuIGFwcGVuZCAoIE9vME8wTzBvb08wTyApCiAgbzAwMG8gPSBvcGVuICggaUlJMTExaWkgLCAidyIgKQogIG8wMDBvIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBpMTFJaWlpICkgKQogIG8wMDBvIC4gY2xvc2UgKCApCiBpMTEgLiBzZXRTZXR0aW5nICggJ25ld191cmxfc291cmNlJyAsICIiICkKIGkxMSAuIHNldFNldHRpbmcgKCAnbmV3X2ZpbGVfc291cmNlJyAsICIiICkKIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihQYXVscyBXb3JsZCxOZXcgc291cmNlIGFkZGVkLiw1MDAwLCIgKyBJMUlpSWlpSUlJICsgIikiICkKIGlmIG5vdCB1cmwgaXMgTm9uZSA6CiAgaWYgJ3hibWNwbHVzLnhiLmZ1bnBpYy5kZScgaW4gdXJsIDoKICAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuQ29udGFpbmVyLlVwZGF0ZSglcz9tb2RlPTE0LHJlcGxhY2UpIiAlIHN5cyAuIGFyZ3YgWyAwIF0gKQogIGVsaWYgJ2NvbW11bml0eS1saW5rcycgaW4gdXJsIDoKICAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuQ29udGFpbmVyLlVwZGF0ZSglcz9tb2RlPTEwLHJlcGxhY2UpIiAlIHN5cyAuIGFyZ3YgWyAwIF0gKQogZWxzZSA6IGkxMSAuIG9wZW5TZXR0aW5ncyAoICkKIGlmIDcgLSA3OiBJSSAqIE8wTyAlIGlpaWlJaTExaSAuIE9vMG9vTzBvbzBvTwpkZWYgSWkxaUlpSUkxaWkxICggdXJsICkgOgogb29Pb29vMDAwb09PID0geGJtY2d1aSAuIERpYWxvZyAoICkKIE9vMG9PT28gPSBvb09vb28wMDBvT08gLiBpbnB1dCAoICdTRUFSQ0ggLSBJdGVtIE5vdCBGb3VuZD8gVGhlbiBMb29rIE1hbnVhbGx5IScgLCB0eXBlID0geGJtY2d1aSAuIElOUFVUX0FMUEhBTlVNICkKIE9vME9vTzAwb09PMG8gPSBPbzBvT09vIC4gbG93ZXIgKCApCiBpZiBPbzBPb08wMG9PTzBvID09ICcnIDoKICBwYXNzCiBlbHNlIDoKICBPT08wME8gKCBPbzBPb08wMG9PTzBvICwgdXJsICkKICBpZiA4NCAtIDg0OiBpaWlpSWkxMWkgKiBPME8gLyBpaWkxSTFJIC0gTzAKZGVmIE9PTzAwTyAoIFNlYXJjaF9uYW1lICwgdXJsICkgOgogSWlJMSA9IEkxMUkxMWkxSSAoIHVybCApCiBpZiBJaUkxICE9ICdGYWlsZWQnIDoKICBPbzBPMDBPbzBvMCA9IHJlIC4gY29tcGlsZSAoICc8Y2hhbm5lbD4uKz88bmFtZT4oLis/KTwvbmFtZT4uKz88dGh1bWJuYWlsPiguKz8pPC90aHVtYm5haWw+Lis/PGV4dGVybmFsbGluaz4oLis/KTwvZXh0ZXJuYWxsaW5rPi4rPzxmYW5hcnQ+KC4rPyk8L2ZhbmFydD4uKz88L2NoYW5uZWw+JyAsIHJlIC4gRE9UQUxMICkgLiBmaW5kYWxsICggSWlJMSApCiAgZm9yIE8wME8wb09PMDBPMDAgLCBpMSAsIHVybCAsIG9PTzAwb09PIGluIE9vME8wME9vMG8wIDoKICAgaWYgbm90ICdodHRwOicgaW4gdXJsIDoKICAgIHBhc3MKICAgZWxzZSA6CiAgICBPT08wME8gKCBTZWFyY2hfbmFtZSAsIHVybCApCiAgT28wMCA9IHJlIC4gY29tcGlsZSAoICc8dGl0bGU+KC4rPyk8L3RpdGxlPi4rPzxsaW5rPiguKz8pPC9saW5rPi4rPzx0aHVtYm5haWw+KC4rPyk8L3RodW1ibmFpbD4uKz88ZmFuYXJ0PiguKz8pPC9mYW5hcnQ+JyAsIHJlIC4gRE9UQUxMICkgLiBmaW5kYWxsICggSWlJMSApCiAgZm9yIE8wME8wb09PMDBPMDAgLCB1cmwgLCBpMSAsIG9PTzAwb09PIGluIE9vMDAgOgogICBpZiAnaHR0cDonIGluIHVybCA6CiAgICBpZiBTZWFyY2hfbmFtZSAuIGxvd2VyICggKSBpbiBPMDBPMG9PTzAwTzAwIC4gbG93ZXIgKCApIDoKICAgICBpMWkgKCB1cmwgLCBPMDBPMG9PTzAwTzAwICwgaTEgLCBvT08wMG9PTyAsICcnICwgJycgLCAnJyAsICcnICwgTm9uZSAsICcnICwgMSApCiAgICAgaWYgNTAgLSA1MDogT28wb29PMG9vMG9PCiAgICAgaWYgMTQgLSAxNDogaWlpMUkxSSAlIE8wTyAqIGlpaTFJMUkKZGVmIGlJSSAoIG5hbWUgKSA6CiBpMTFJaWlpID0ganNvbiAuIGxvYWRzICggb3BlbiAoIGlJSTExMWlpICwgInIiICkgLiByZWFkICggKSApCiBmb3Igb08wMG8wIGluIHJhbmdlICggbGVuICggaTExSWlpaSApICkgOgogIGlmIGlzaW5zdGFuY2UgKCBpMTFJaWlpIFsgb08wMG8wIF0gLCBsaXN0ICkgOgogICBpZiBpMTFJaWlpIFsgb08wMG8wIF0gWyAwIF0gPT0gbmFtZSA6CiAgICBkZWwgaTExSWlpaSBbIG9PMDBvMCBdCiAgICBvMDAwbyA9IG9wZW4gKCBpSUkxMTFpaSAsICJ3IiApCiAgICBvMDAwbyAuIHdyaXRlICgganNvbiAuIGR1bXBzICggaTExSWlpaSApICkKICAgIG8wMDBvIC4gY2xvc2UgKCApCiAgICBicmVhawogIGVsc2UgOgogICBpZiBpMTFJaWlpIFsgb08wMG8wIF0gWyAndGl0bGUnIF0gPT0gbmFtZSA6CiAgICBkZWwgaTExSWlpaSBbIG9PMDBvMCBdCiAgICBvMDAwbyA9IG9wZW4gKCBpSUkxMTFpaSAsICJ3IiApCiAgICBvMDAwbyAuIHdyaXRlICgganNvbiAuIGR1bXBzICggaTExSWlpaSApICkKICAgIG8wMDBvIC4gY2xvc2UgKCApCiAgICBicmVhawogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuQ29udGFpbmVyLlJlZnJlc2giICkKIGlmIDU1IC0gNTU6IElJaUkxSTExaTExICsgaUlpaTFJMTFJMUlJMSAvIG9vMDAwICogaWlpaUlpMTFpIC0gaTExaUlpaUlpaSAtIE8wMG9Pb09vTzBvME8KIGlmIDI1IC0gMjU6IG8wT09PCiBpZiA3IC0gNzogaTFJSWkgLyBvT29vT29PME9vME8gKiBJMWkxaUkxaSAuIE9vMG9vTzBvbzBvTyAuIGlJaWkxSTExSTFJSTEKZGVmIGlJaWkgKCB1cmwgLCBicm93c2UgPSBGYWxzZSApIDoKIGlmIHVybCBpcyBOb25lIDoKICB1cmwgPSAnaHR0cDovL3hibWNwbHVzLnhiLmZ1bnBpYy5kZS93d3ctZGF0YS9maWxlc3lzdGVtLycKIG9vbzBPID0gQmVhdXRpZnVsU291cCAoIG9Pb08gKCB1cmwgKSAsIGNvbnZlcnRFbnRpdGllcyA9IEJlYXV0aWZ1bFNvdXAgLiBIVE1MX0VOVElUSUVTICkKIGZvciBPbzBPME9PT29vIGluIG9vbzBPICggJ2EnICkgOgogIG9Pb08wbzAwT08wID0gT28wTzBPT09vbyBbICdocmVmJyBdCiAgaWYgbm90IG9Pb08wbzAwT08wIC4gc3RhcnRzd2l0aCAoICc/JyApIDoKICAgTzAwTzBvT08wME8wMCA9IE9vME8wT09Pb28gLiBzdHJpbmcKICAgaWYgTzAwTzBvT08wME8wMCBub3QgaW4gWyAnUGFyZW50IERpcmVjdG9yeScgLCAncmVjeWNsZV9iaW4vJyBdIDoKICAgIGlmIG9Pb08wbzAwT08wIC4gZW5kc3dpdGggKCAnLycgKSA6CiAgICAgaWYgYnJvd3NlIDoKICAgICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgLCB1cmwgKyBvT29PMG8wME9PMCAsIDE1ICwgSTFJaUlpaUlJSSAsIG9PTzAwb09PICwgJycgLCAnJyAsICcnICkKICAgICBlbHNlIDoKICAgICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgLCB1cmwgKyBvT29PMG8wME9PMCAsIDE0ICwgSTFJaUlpaUlJSSAsIG9PTzAwb09PICwgJycgLCAnJyAsICcnICkKICAgIGVsaWYgb09vTzBvMDBPTzAgLiBlbmRzd2l0aCAoICcueG1sJyApIDoKICAgICBpZiBicm93c2UgOgogICAgICBvbzBvb29vb08wICggTzAwTzBvT08wME8wMCAsIHVybCArIG9Pb08wbzAwT08wICwgMSAsIEkxSWlJaWlJSUkgLCBvT08wMG9PTyAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgICAgZWxzZSA6CiAgICAgIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIGlJSTExMWlpICkgPT0gVHJ1ZSA6CiAgICAgICBpZiBPMDBPMG9PTzAwTzAwIGluIE9vb08wT08gOgogICAgICAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwICsgJyAoaW4gdXNlKScgLCB1cmwgKyBvT29PMG8wME9PMCAsIDExICwgSTFJaUlpaUlJSSAsIG9PTzAwb09PICwgJycgLCAnJyAsICcnICwgJycgLCAnZG93bmxvYWQnICkKICAgICAgIGVsc2UgOgogICAgICAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwICwgdXJsICsgb09vTzBvMDBPTzAgLCAxMSAsIEkxSWlJaWlJSUkgLCBvT08wMG9PTyAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgICAgIGVsc2UgOgogICAgICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgLCB1cmwgKyBvT29PMG8wME9PMCAsIDExICwgSTFJaUlpaUlJSSAsIG9PTzAwb09PICwgJycgLCAnJyAsICcnICwgJycgLCAnZG93bmxvYWQnICkKICAgICAgIGlmIDcgLSA3OiBJaTFJICsgSTFpMWlJMWkgKyBPMAogICAgICAgaWYgOSAtIDk6IGkxMWkgLiBJaUlpMTFpSUlpMUlpIC0gSUkgLyBJaUlpMTFpSUlpMUlpCmRlZiBJMTFPb09vT09Pb09PICggYnJvd3NlID0gRmFsc2UgKSA6CiBpaTFpaTExSUlJaWlJID0gJ2h0dHA6Ly9jb21tdW5pdHktbGlua3MuZ29vZ2xlY29kZS5jb20vc3ZuL3RydW5rLycKIG9vbzBPID0gQmVhdXRpZnVsU291cCAoIG9Pb08gKCBpaTFpaTExSUlJaWlJICkgLCBjb252ZXJ0RW50aXRpZXMgPSBCZWF1dGlmdWxTb3VwIC4gSFRNTF9FTlRJVElFUyApCiBPMDBPT09vT29vME8gPSBvb28wTyAoICd1bCcgKSBbIDAgXSAoICdsaScgKSBbIDEgOiBdCiBmb3IgT28wTzBPT09vbyBpbiBPMDBPT09vT29vME8gOgogIE8wME8wb09PMDBPMDAgPSBPbzBPME9PT29vICggJ2EnICkgWyAwIF0gWyAnaHJlZicgXQogIGlmIGJyb3dzZSA6CiAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwICwgaWkxaWkxMUlJSWlpSSArIE8wME8wb09PMDBPMDAgLCAxICwgSTFJaUlpaUlJSSAsIG9PTzAwb09PICwgJycgLCAnJyAsICcnICwgJycgLCAnZG93bmxvYWQnICkKICBlbHNlIDoKICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgLCBpaTFpaTExSUlJaWlJICsgTzAwTzBvT08wME8wMCAsIDExICwgSTFJaUlpaUlJSSAsIG9PTzAwb09PICwgJycgLCAnJyAsICcnICwgJycgLCAnZG93bmxvYWQnICkKICAgaWYgNzcgLSA3NzogTzBvbzBPTzAgJSBPMG9vME9PMCAqIGlpaWlJaTExaSAtIGkxMWlJaWlJaWkKICAgaWYgOTMgLSA5MzogT29vb29vb29PTyAvIG9Pb29Pb08wT28wTyAlIGkxMWlJaWlJaWkgKyBvME9PTyAqIE8wTwpkZWYgaUkxSWkxMWlJSTEgKCB1cmwgLCBkYXRhID0gTm9uZSApIDoKIHByaW50ICdnZXRzb3VwJyAsIHVybCAsIGRhdGEKIGlmIHVybCAuIHN0YXJ0c3dpdGggKCAnaHR0cDovLycgKSBvciB1cmwgLiBzdGFydHN3aXRoICggJ2h0dHBzOi8vJyApIDoKICBkYXRhID0gb09vTyAoIHVybCApCiAgaWYgcmUgLiBzZWFyY2ggKCAiI0VYVE0zVSIgLCBkYXRhICkgb3IgJ20zdScgaW4gdXJsIDoKICAgcHJpbnQgJ2ZvdW5kIG0zdSBkYXRhJyAsIGRhdGEKICAgcmV0dXJuIGRhdGEKICAgaWYgMTUgLSAxNTogaWlpMUkxSSAuIE8wTyAvIElJaUkxSTExaTExICsgaWlpMUkxSQogZWxpZiBkYXRhID09IE5vbmUgOgogIGlmIHhibWN2ZnMgLiBleGlzdHMgKCB1cmwgKSA6CiAgIGlmIHVybCAuIHN0YXJ0c3dpdGggKCAic21iOi8vIiApIG9yIHVybCAuIHN0YXJ0c3dpdGggKCAibmZzOi8vIiApIDoKICAgIE9vbyA9IHhibWN2ZnMgLiBjb3B5ICggdXJsICwgb3MgLiBwYXRoIC4gam9pbiAoIE9vMG8wMDAwbzBvMCAsICd0ZW1wJyAsICdzb3JjZV90ZW1wLnR4dCcgKSApCiAgICBpZiBPb28gOgogICAgIGRhdGEgPSBvcGVuICggb3MgLiBwYXRoIC4gam9pbiAoIE9vMG8wMDAwbzBvMCAsICd0ZW1wJyAsICdzb3JjZV90ZW1wLnR4dCcgKSAsICJyIiApIC4gcmVhZCAoICkKICAgICB4Ym1jdmZzIC4gZGVsZXRlICggb3MgLiBwYXRoIC4gam9pbiAoIE9vMG8wMDAwbzBvMCAsICd0ZW1wJyAsICdzb3JjZV90ZW1wLnR4dCcgKSApCiAgICBlbHNlIDoKICAgICBPTyAoICJmYWlsZWQgdG8gY29weSBmcm9tIHNtYjoiICkKICAgZWxzZSA6CiAgICBkYXRhID0gb3BlbiAoIHVybCAsICdyJyApIC4gcmVhZCAoICkKICAgIGlmIHJlIC4gbWF0Y2ggKCAiI0VYVE0zVSIgLCBkYXRhICkgb3IgJ20zdScgaW4gdXJsIDoKICAgICBwcmludCAnZm91bmQgbTN1IGRhdGEnICwgZGF0YQogICAgIHJldHVybiBkYXRhCiAgZWxzZSA6CiAgIE9PICggIlNvdXAgRGF0YSBub3QgZm91bmQhIiApCiAgIHJldHVybgogcmV0dXJuIEJlYXV0aWZ1bFNPQVAgKCBkYXRhICwgY29udmVydEVudGl0aWVzID0gQmVhdXRpZnVsU3RvbmVTb3VwIC4gWE1MX0VOVElUSUVTICkKIGlmIDYyIC0gNjI6IElpMUkgLyBPME8gKyBPMDBvT29Pb08wbzBPIC8gTzBPIC4gaTExaQogaWYgNjggLSA2ODogaTExaUlpaUlpaSAlIG8wT09PICsgaTExaUlpaUlpaQpkZWYgTzBvME9vICggdXJsICwgZmFuYXJ0ICkgOgogcHJpbnQgJ3VybC1nZXREYXRhJyAsIHVybAogaWlpID0gIkxpc3QiCiBpZiAxIC0gMTogSUlpSTFJMTFpMTEgLyBJaUlpMTFpSUlpMUlpICUgTzBvbzBPTzAgKiBPbzBvb08wb28wb08gLiBpMTFpSWlpSWlpCiBvb28wTyA9IGlJMUlpMTFpSUkxICggdXJsICkKIGlmIDIgLSAyOiBvME9PTyAqIGlpaTFJMUkgLSBpSWlpMUkxMUkxSUkxICsgb09vb09vTzBPbzBPIC4gaWlpaUlpMTFpICUgTzBvbzBPTzAKIGlmIGlzaW5zdGFuY2UgKCBvb28wTyAsIEJlYXV0aWZ1bFNPQVAgKSA6CiAgaWYgbGVuICggb29vME8gKCAnbGF5b3V0eXBlJyApICkgPiAwIDoKICAgaWlpID0gIlRodW1ibmFpbCIKICAgaWYgOTIgLSA5MjogTzBvbzBPTzAKICBpZiBsZW4gKCBvb28wTyAoICdjaGFubmVscycgKSApID4gMCA6CiAgIElJaUlpaUlpID0gb29vME8gKCAnY2hhbm5lbCcgKQogICBmb3IgTzAwMG9vIGluIElJaUlpaUlpIDoKICAgIGlmIDIwIC0gMjA6IElpMUkgJSBPMDBvT29Pb08wbzBPIC8gTzAwb09vT29PMG8wTyArIE8wMG9Pb09vTzBvME8KICAgIElJSTFJaWlJID0gJycKICAgIGlJaTEgPSAwCiAgICB0cnkgOgogICAgIElJSTFJaWlJID0gTzAwMG9vICggJ2V4dGVybmFsbGluaycgKSBbIDAgXSAuIHN0cmluZwogICAgIGlJaTEgPSBsZW4gKCBPMDAwb28gKCAnZXh0ZXJuYWxsaW5rJyApICkKICAgIGV4Y2VwdCA6IHBhc3MKICAgIGlmIDggLSA4OiBpaWlpSWkxMWkgKiBvbzAwMCAtIE8wMG9Pb09vTzBvME8gLSBPME8gKiBJaTFJICUgb09vb09vTzBPbzBPCiAgICBpZiBpSWkxID4gMSA6IElJSTFJaWlJID0gJycKICAgIGlmIDQ4IC0gNDg6IE8wCiAgICBPMDBPMG9PTzAwTzAwID0gTzAwMG9vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcKICAgIEkxSWlpSSA9IE8wMDBvbyAoICd0aHVtYm5haWwnICkgWyAwIF0gLiBzdHJpbmcKICAgIGlmIEkxSWlpSSA9PSBOb25lIDoKICAgICBJMUlpaUkgPSAnJwogICAgIGlmIDQ0IC0gNDQ6IElJaUkxSTExaTExIC4gTzBPIC8gbzBPT08gKyBPMDBvT29Pb08wbzBPCiAgICB0cnkgOgogICAgIGlmIG5vdCBPMDAwb28gKCAnZmFuYXJ0JyApIDoKICAgICAgaWYgaTExIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgICAgIG8wbyA9IEkxSWlpSQogICAgICBlbHNlIDoKICAgICAgIG8wbyA9IGZhbmFydAogICAgIGVsc2UgOgogICAgICBvMG8gPSBPMDAwb28gKCAnZmFuYXJ0JyApIFsgMCBdIC4gc3RyaW5nCiAgICAgaWYgbzBvID09IE5vbmUgOgogICAgICByYWlzZQogICAgZXhjZXB0IDoKICAgICBvMG8gPSBmYW5hcnQKICAgICBpZiA3MyAtIDczOiBPbzBvb08wb28wb08gKiBvME9PTyArIG9Pb29Pb08wT28wTyAuIElJCiAgICB0cnkgOgogICAgIE9vT28gPSBPMDAwb28gKCAnaW5mbycgKSBbIDAgXSAuIHN0cmluZwogICAgIGlmIE9vT28gPT0gTm9uZSA6CiAgICAgIHJhaXNlCiAgICBleGNlcHQgOgogICAgIE9vT28gPSAnJwogICAgIGlmIDcwIC0gNzA6IEkxaTFpSTFpIC0gSUlpSTFJMTFpMTEgLyBPMDBvT29Pb08wbzBPCiAgICB0cnkgOgogICAgIG8wME8gPSBPMDAwb28gKCAnZ2VucmUnICkgWyAwIF0gLiBzdHJpbmcKICAgICBpZiBvMDBPID09IE5vbmUgOgogICAgICByYWlzZQogICAgZXhjZXB0IDoKICAgICBvMDBPID0gJycKICAgICBpZiA4MiAtIDgyOiBpaWkxSTFJICUgSWlJaTExaUlJaTFJaSAlIE8wTyAtIElJaUkxSTExaTExICsgT29vb29vb29PTwogICAgdHJ5IDoKICAgICBpSSA9IE8wMDBvbyAoICdkYXRlJyApIFsgMCBdIC4gc3RyaW5nCiAgICAgaWYgaUkgPT0gTm9uZSA6CiAgICAgIHJhaXNlCiAgICBleGNlcHQgOgogICAgIGlJID0gJycKICAgICBpZiAyMiAtIDIyOiBpMUlJaSArIE8wIC4gaUlpaTFJMTFJMUlJMSAqIE8wb28wT08wICUgaTExaUlpaUlpaSAqIG9Pb29Pb08wT28wTwogICAgdHJ5IDoKICAgICBjcmVkaXRzID0gTzAwMG9vICggJ2NyZWRpdHMnICkgWyAwIF0gLiBzdHJpbmcKICAgICBpZiBjcmVkaXRzID09IE5vbmUgOgogICAgICByYWlzZQogICAgZXhjZXB0IDoKICAgICBjcmVkaXRzID0gJycKICAgICBpZiA3NyAtIDc3OiBJSWlJMUkxMWkxMQogICAgdHJ5IDoKICAgICBpZiBJSUkxSWlpSSA9PSAnJyA6CiAgICAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgLCB1cmwgLiBlbmNvZGUgKCAndXRmLTgnICkgLCAyICwgSTFJaWlJICwgbzBvICwgT29PbyAsIG8wME8gLCBpSSAsIGNyZWRpdHMgLCBUcnVlICkKICAgICBlbHNlIDoKICAgICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgLiBlbmNvZGUgKCAndXRmLTgnICkgLCBJSUkxSWlpSSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDEgLCBJMUlpaUkgLCBvMG8gLCBPb09vICwgbzAwTyAsIGlJICwgTm9uZSAsICdzb3VyY2UnICkKICAgIGV4Y2VwdCA6CiAgICAgT08gKCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBhZGRpbmcgZGlyZWN0b3J5IGZyb20gZ2V0RGF0YSgpOiAnICsgTzAwTzBvT08wME8wMCAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKICBlbHNlIDoKICAgT08gKCAnTm8gQ2hhbm5lbHM6IGdldEl0ZW1zJyApCiAgIEkxaUlJMWlJaTFJICggb29vME8gKCAnaXRlbScgKSAsIGZhbmFydCApCiBlbHNlIDoKICBvTzBPMDBPb09PMCAoIG9vbzBPICkKICBpZiA4MiAtIDgyOiBpMTFpIC4gT28wb29PMG9vMG9PIC0gaUlpaTFJMTFJMUlJMSAtIE9vMG9vTzBvbzBvTyAqIGkxMWkKIGlmIGlpaSA9PSAiVGh1bWJuYWlsIiA6CiAgb29PMG9PT29vT28wICggKQogIGlmIDM4IC0gMzg6IEkxaTFpSTFpCmRlZiBvTzBPMDBPb09PMCAoIGRhdGEgKSA6CiBPb28wMG8wT29vbyA9IGRhdGEgLiByc3RyaXAgKCApCiBPbzBPMDBPbzBvMCA9IHJlIC4gY29tcGlsZSAoIHInI0VYVElORjooLis/KSwoLio/KVtcblxyXSsoW15cbl0rKScgKSAuIGZpbmRhbGwgKCBPb28wMG8wT29vbyApCiBPT29vb29PME9vID0gbGVuICggT28wTzAwT28wbzAgKQogcHJpbnQgJ3RvdGFsIG0zdSBsaW5rcycgLCBPT29vb29PME9vCiBmb3IgT09pSWlJSWkxICwgSTFJSUlJMWkgLCBJMUkxMWkgaW4gT28wTzAwT28wbzAgOgogIGlmICd0dmctbG9nbycgaW4gT09pSWlJSWkxIDoKICAgSTFJaWlJID0gSWkxSTFJMWkxSWkgKCBPT2lJaUlJaTEgLCAndHZnLWxvZ289W1wnIl0oLio/KVtcJyJdJyApCiAgIGlmIEkxSWlpSSA6CiAgICBpZiBJMUlpaUkgLiBzdGFydHN3aXRoICggJ2h0dHAnICkgOgogICAgIEkxSWlpSSA9IEkxSWlpSQogICAgIGlmIDUgLSA1OiBJMWkxaUkxaSAuIElpSWkxMWlJSWkxSWkKICAgIGVsaWYgbm90IGkxMSAuIGdldFNldHRpbmcgKCAnbG9nby1mb2xkZXJQYXRoJyApID09ICIiIDoKICAgICBPMG9PMCA9IGkxMSAuIGdldFNldHRpbmcgKCAnbG9nby1mb2xkZXJQYXRoJyApCiAgICAgSTFJaWlJID0gTzBvTzAgKyBJMUlpaUkKICAgICBpZiA4NyAtIDg3OiBJSWlJMUkxMWkxMSAuIE9vMG9vTzBvbzBvTwogICAgZWxzZSA6CiAgICAgSTFJaWlJID0gSTFJaWlJCiAgICAgaWYgNzUgLSA3NTogSUkgKyBvbzAwMCArIElpSWkxMWlJSWkxSWkgKiBpaWkxSTFJICUgaWlpaUlpMTFpIC4gTzBvbzBPTzAKICBlbHNlIDoKICAgSTFJaWlJID0gJycKICBpZiAndHlwZScgaW4gT09pSWlJSWkxIDoKICAgb08gPSBJaTFJMUkxaTFJaSAoIE9PaUlpSUlpMSAsICd0eXBlPVtcJyJdKC4qPylbXCciXScgKQogICBpZiBvTyA9PSAneXQtZGwnIDoKICAgIEkxSTExaSA9IEkxSTExaSArICImbW9kZT0xOCIKICAgZWxpZiBvTyA9PSAncmVnZXgnIDoKICAgIGlpMWlpMTFJSUlpaUkgPSBJMUkxMWkgLiBzcGxpdCAoICcmcmVnZXhzPScgKQogICAgSTFJaTFJMSA9IElpSUkxMTFpSTFpaTEgKCBpSTFJaTExaUlJMSAoICcnICwgZGF0YSA9IGlpMWlpMTFJSUlpaUkgWyAxIF0gKSApCiAgICBpZiAzNyAtIDM3OiBpaWlpSWkxMWkgLSBJMWkxaUkxaSAlIElJaUkxSTExaTExCiAgICBpMWkgKCBpaTFpaTExSUlJaWlJIFsgMCBdICwgSTFJSUlJMWkgLCBJMUlpaUkgLCAnJyAsICcnICwgJycgLCAnJyAsICcnICwgTm9uZSAsIEkxSWkxSTEgLCBPT29vb29PME9vICkKICAgIGNvbnRpbnVlCiAgaTFpICggSTFJMTFpICwgSTFJSUlJMWkgLCBJMUlpaUkgLCAnJyAsICcnICwgJycgLCAnJyAsICcnICwgTm9uZSAsICcnICwgT09vb29vTzBPbyApCiAgaWYgNzcgLSA3NzogSUlpSTFJMTFpMTEgLSBpMUlJaSAtIGlpaTFJMUkgLiBvbzAwMAogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MCkiICkKIGlmIDM5IC0gMzk6IGkxMWkgLyBJSSArIEkxaTFpSTFpIC8gb28wMDAKZGVmIEkxSWkxMWkgKCBuYW1lICwgdXJsICwgZmFuYXJ0ICkgOgogb29vME8gPSBpSTFJaTExaUlJMSAoIHVybCApCiBpMTExMUkxSSA9IG9vbzBPIC4gZmluZCAoICdjaGFubmVsJyAsIGF0dHJzID0geyAnbmFtZScgOiBuYW1lIC4gZGVjb2RlICggJ3V0Zi04JyApIH0gKQogaTFpb09Pb28wME8wMG8gPSBpMTExMUkxSSAoICdpdGVtJyApCiB0cnkgOgogIG8wbyA9IGkxMTExSTFJICggJ2ZhbmFydCcgKSBbIDAgXSAuIHN0cmluZwogIGlmIG8wbyA9PSBOb25lIDoKICAgcmFpc2UKIGV4Y2VwdCA6CiAgbzBvID0gZmFuYXJ0CiBmb3IgTzAwMG9vIGluIGkxMTExSTFJICggJ3N1YmNoYW5uZWwnICkgOgogIG5hbWUgPSBPMDAwb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZwogIHRyeSA6CiAgIEkxSWlpSSA9IE8wMDBvbyAoICd0aHVtYm5haWwnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgSTFJaWlJID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBJMUlpaUkgPSAnJwogIHRyeSA6CiAgIGlmIG5vdCBPMDAwb28gKCAnZmFuYXJ0JyApIDoKICAgIGlmIGkxMSAuIGdldFNldHRpbmcgKCAndXNlX3RodW1iJyApID09ICJ0cnVlIiA6CiAgICAgbzBvID0gSTFJaWlJCiAgIGVsc2UgOgogICAgbzBvID0gTzAwMG9vICggJ2ZhbmFydCcgKSBbIDAgXSAuIHN0cmluZwogICBpZiBvMG8gPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIHBhc3MKICB0cnkgOgogICBPb09vID0gTzAwMG9vICggJ2luZm8nICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgT29PbyA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgT29PbyA9ICcnCiAgIGlmIDk4IC0gOTg6IElpMUkgKyBPbzBvb08wb28wb08gKyBpaWlpSWkxMWkgJSBPb29vb29vb09PCiAgdHJ5IDoKICAgbzAwTyA9IE8wMDBvbyAoICdnZW5yZScgKSBbIDAgXSAuIHN0cmluZwogICBpZiBvMDBPID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBvMDBPID0gJycKICAgaWYgOTcgLSA5NzogTzAgKiBPb29vb29vb09PIC4gT29vb29vb29PTwogIHRyeSA6CiAgIGlJID0gTzAwMG9vICggJ2RhdGUnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgaUkgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIGlJID0gJycKICAgaWYgMzMgLSAzMzogSTFpMWlJMWkgKyBPMG9vME9PMCAqIGlpaWlJaTExaSAvIGlJaWkxSTExSTFJSTEgLSBvT29vT29PME9vME8KICB0cnkgOgogICBjcmVkaXRzID0gTzAwMG9vICggJ2NyZWRpdHMnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgY3JlZGl0cyA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgY3JlZGl0cyA9ICcnCiAgIGlmIDU0IC0gNTQ6IEkxaTFpSTFpIC8gSWkxSSAuIGlpaWlJaTExaSAlIE8wb28wT08wCiAgdHJ5IDoKICAgb28wb29vb29PMCAoIG5hbWUgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSAsIHVybCAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDMgLCBJMUlpaUkgLCBvMG8gLCBPb09vICwgbzAwTyAsIGNyZWRpdHMgLCBpSSApCiAgZXhjZXB0IDoKICAgT08gKCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBhZGRpbmcgZGlyZWN0b3J5IC0gJyArIG5hbWUgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiBJMWlJSTFpSWkxSSAoIGkxaW9PT29vMDBPMDBvICwgbzBvICkKIGlmIDU3IC0gNTc6IGkxMWlJaWlJaWkgLiBvME9PTyAtIE8wMG9Pb09vTzBvME8gLSBpaWlpSWkxMWkgKyBvbzAwMAogaWYgNjMgLSA2Mzogb28wMDAgKiBPMG9vME9PMApkZWYgb29pSWkxICggbmFtZSAsIHVybCAsIGZhbmFydCApIDoKIG9vbzBPID0gaUkxSWkxMWlJSTEgKCB1cmwgKQogaTExMTFJMUkgPSBvb28wTyAuIGZpbmQgKCAnc3ViY2hhbm5lbCcgLCBhdHRycyA9IHsgJ25hbWUnIDogbmFtZSAuIGRlY29kZSAoICd1dGYtOCcgKSB9ICkKIGkxaW9PT29vMDBPMDBvID0gaTExMTFJMUkgKCAnc3ViaXRlbScgKQogSTFpSUkxaUlpMUkgKCBpMWlvT09vbzAwTzAwbyAsIGZhbmFydCApCiBpZiA3NCAtIDc0OiBpSWlpMUkxMUkxSUkxICogbzBPT08gKyBvbzAwMCAvIGkxSUlpIC8gaTExaSAuIElJaUkxSTExaTExCmRlZiBvb29PbzBPT09vbzAgKCBuYW1lICwgdXJsICwgaWNvbmltYWdlICwgZmFuYXJ0ICkgOgogT09vTyA9IFsgXSA7IE9PME8wMDAgPSBbIF0gOyBpaUlpSTFpMSA9IDAKIG9PME8wMG9PT29vb08gPSBJaUlpMTFpSSAoIHVybCAsICdzdWJsaW5rOicgLCAnIycgKQogZm9yIE9vME8wME8wMDAgaW4gb08wTzAwb09Pb29vTyA6CiAgaWYgJ0xJU1RTT1VSQ0U6JyBpbiBPbzBPMDBPMDAwIDoKICAgaTExSTFJaUlJMWkxaSA9IG9vSTExMTFpICggT28wTzAwTzAwMCAsICdMSVNUU09VUkNFOicgLCAnOjonICkKICAgaUlJaWkgPSBvb0kxMTExaSAoIE9vME8wME8wMDAgLCAnTElTVE5BTUU6JyAsICc6OicgKQogIGVsc2UgOgogICBpMTFJMUlpSUkxaTFpID0gT28wTzAwTzAwMCAuIHJlcGxhY2UgKCAnc3VibGluazonICwgJycgKSAuIHJlcGxhY2UgKCAnIycgLCAnJyApCiAgIGlJSWlpID0gbmFtZQogIGlmIGxlbiAoIGkxMUkxSWlJSTFpMWkgKSA+IDEwIDoKICAgaWlJaUkxaTEgPSBpaUlpSTFpMSArIDEgOyBPT29PIC4gYXBwZW5kICggaUlJaWkgKSA7IE9PME8wMDAgLiBhcHBlbmQgKCBpMTFJMUlpSUkxaTFpICkKICAgaWYgOTIgLSA5MjogTzAwb09vT29PMG8wTyArIGlpaWlJaTExaSAlIElpMUkKIGlmIGlpSWlJMWkxID09IDEgOgogIHRyeSA6CiAgIG9PbzAgPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBuYW1lICwgaWNvbkltYWdlID0gaWNvbmltYWdlICwgdGh1bWJuYWlsSW1hZ2UgPSBpY29uaW1hZ2UgKSA7IG9PbzAgLiBzZXRJbmZvICggdHlwZSA9ICJWaWRlbyIgLCBpbmZvTGFiZWxzID0geyAiVGl0bGUiIDogbmFtZSB9ICkKICAgaTFpSSA9IHhibWNwbHVnaW4gLiBhZGREaXJlY3RvcnlJdGVtICggaGFuZGxlID0gaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgdXJsID0gT08wTzAwMCBbIDAgXSAsIGxpc3RpdGVtID0gb09vMCApCiAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIE9vME8wICggT08wTzAwMCBbIDAgXSApICwgb09vMCApCiAgZXhjZXB0IDoKICAgcGFzcwogZWxzZSA6CiAgbzBPTzAwID0geGJtY2d1aSAuIERpYWxvZyAoICkKICBPb28wT09vT29PMCA9IG8wT08wMCAuIHNlbGVjdCAoICdQYXVscyBXb3JsZCAtIFNlbGVjdCBBIFNvdXJjZScgLCBPT29PICkKICBpZiBPb28wT09vT29PMCA+PSAwIDoKICAgb09vME9Pb08wID0gc3RyICggT09vTyBbIE9vbzBPT29Pb08wIF0gKQogICBJSW8wT28wb08wb09PMDAgPSBzdHIgKCBPTzBPMDAwIFsgT29vME9Pb09vTzAgXSApCiAgIHRyeSA6CiAgICBvT28wID0geGJtY2d1aSAuIExpc3RJdGVtICggb09vME9Pb08wICwgaWNvbkltYWdlID0gaWNvbmltYWdlICwgdGh1bWJuYWlsSW1hZ2UgPSBpY29uaW1hZ2UgKSA7IG9PbzAgLiBzZXRJbmZvICggdHlwZSA9ICJWaWRlbyIgLCBpbmZvTGFiZWxzID0geyAiVGl0bGUiIDogb09vME9Pb08wIH0gKQogICAgaTFpSSA9IHhibWNwbHVnaW4gLiBhZGREaXJlY3RvcnlJdGVtICggaGFuZGxlID0gaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgdXJsID0gSUlvME9vMG9PMG9PTzAwICwgbGlzdGl0ZW0gPSBvT28wICkKICAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIE9vME8wICggSUlvME9vMG9PMG9PTzAwICkgLCBvT28wICkKICAgZXhjZXB0IDoKICAgIHBhc3MKICAgIGlmIDkyIC0gOTI6IE9vb29vb29vT08gKiBJMWkxaUkxaQogICAgaWYgMTAwIC0gMTAwOiBJMWkxaUkxaSArIEkxaTFpSTFpICogT28wb29PMG9vMG9PCiAgICBpZiAxIC0gMTogSUkgLiBJSSAvIG9vMDAwIC0gSTFpMWlJMWkKZGVmIG9vb08gKCB0ZXh0ICwgcGF0dGVybiApIDoKIGkxSTFpMTExSWkgPSAiIgogdHJ5IDoKICBvb28gPSByZSAuIGZpbmRhbGwgKCBwYXR0ZXJuICwgdGV4dCAsIGZsYWdzID0gcmUgLiBET1RBTEwgKQogIGkxSTFpMTExSWkgPSBvb28gWyAwIF0KIGV4Y2VwdCA6CiAgaTFJMWkxMTFJaSA9ICIiCiAgaWYgMjcgLSAyNzogSUkgJSBvT29vT29PME9vME8KIHJldHVybiBpMUkxaTExMUlpCiBpZiA3MyAtIDczOiBJaTFJCmRlZiBJaUlpMTFpSSAoIHRleHQgLCBzdGFydF93aXRoICwgZW5kX3dpdGggKSA6CiBvb08gPSByZSAuIGZpbmRhbGwgKCAiKD9pKSgiICsgc3RhcnRfd2l0aCArICJbXFNcc10rPyIgKyBlbmRfd2l0aCArICIpIiAsIHRleHQgKQogcmV0dXJuIG9vTwogaWYgNTEgLSA1MTogb09vb09vTzBPbzBPICUgSTFpMWlJMWkgLiBpaWlpSWkxMWkgLyBpSWlpMUkxMUkxSUkxIC8gaWlpMUkxSSAuIGlpaWlJaTExaQpkZWYgb29JMTExMWkgKCB0ZXh0ICwgZnJvbV9zdHJpbmcgLCB0b19zdHJpbmcgLCBleGNsdWRpbmcgPSBUcnVlICkgOgogaWYgZXhjbHVkaW5nIDoKICB0cnkgOiBvb08gPSByZSAuIHNlYXJjaCAoICIoP2kpIiArIGZyb21fc3RyaW5nICsgIihbXFNcc10rPykiICsgdG9fc3RyaW5nICwgdGV4dCApIC4gZ3JvdXAgKCAxICkKICBleGNlcHQgOiBvb08gPSAnJwogZWxzZSA6CiAgdHJ5IDogb29PID0gcmUgLiBzZWFyY2ggKCAiKD9pKSgiICsgZnJvbV9zdHJpbmcgKyAiW1xTXHNdKz8iICsgdG9fc3RyaW5nICsgIikiICwgdGV4dCApIC4gZ3JvdXAgKCAxICkKICBleGNlcHQgOiBvb08gPSAnJwogcmV0dXJuIG9vTwogaWYgNDIgLSA0MjogSWlJaTExaUlJaTFJaSArIGkxSUlpIC0gTzAwb09vT29PMG8wTyAvIE9vMG9vTzBvbzBvTwpkZWYgSTFpSUkxaUlpMUkgKCBpdGVtcyAsIGZhbmFydCApIDoKIE9Pb29vb08wT28gPSBsZW4gKCBpdGVtcyApCiBwcmludCAnU1RBUlQgR0VUIElURU1TICoqKioqJwogT08gKCAnVG90YWwgSXRlbXM6ICVzJyAlIE9Pb29vb08wT28gKQogZm9yIGlpSWlJSUlpaUkgaW4gaXRlbXMgOgogIGlpSTFJSUlpID0gRmFsc2UKICBJSTExSWlJaTExID0gRmFsc2UKICB0cnkgOgogICBPMDBPMG9PTzAwTzAwID0gaWlJaUlJSWlpSSAoICd0aXRsZScgKSBbIDAgXSAuIHN0cmluZwogICBpZiBPMDBPMG9PTzAwTzAwIGlzIE5vbmUgOgogICAgTzAwTzBvT08wME8wMCA9ICd1bmtub3duPycKICBleGNlcHQgOgogICBPTyAoICdOYW1lIEVycm9yJyApCiAgIE8wME8wb09PMDBPMDAgPSAnJwogICBpZiA3IC0gNzogTzBPIC4gTzAwb09vT29PMG8wTyAlIGlpaWlJaTExaSAqIElJICsgT28wb29PMG9vMG9PICsgSTFpMWlJMWkKICAgaWYgMzggLSAzODogSWlJaTExaUlJaTFJaSAtIG9Pb29Pb08wT28wTyAtIElpSWkxMWlJSWkxSWkgLyBpaWkxSTFJIC0gaTFJSWkKICB0cnkgOgogICBpZiBpaUlpSUlJaWlJICggJ2VwZycgKSA6CiAgICBpZiBpaUlpSUlJaWlJIC4gZXBnX3VybCA6CiAgICAgT08gKCAnR2V0IEVQRyBSZWdleCcgKQogICAgIGkxSUkxID0gaWlJaUlJSWlpSSAuIGVwZ191cmwgLiBzdHJpbmcKICAgICBpMTFpMSA9IGlpSWlJSUlpaUkgLiBlcGdfcmVnZXggLiBzdHJpbmcKICAgICBJaWlpaUkxaTFJaWkgPSBvbzAwb08wbyAoIGkxSUkxICwgaTExaTEgKQogICAgIGlmIElpaWlpSTFpMUlpaSA6CiAgICAgIE8wME8wb09PMDBPMDAgKz0gJyAtICcgKyBJaWlpaUkxaTFJaWkKICAgIGVsaWYgaWlJaUlJSWlpSSAoICdlcGcnICkgWyAwIF0gLiBzdHJpbmcgPiAxIDoKICAgICBPMDBPMG9PTzAwTzAwICs9IGlpaWkxMTFJSSAoIGlpSWlJSUlpaUkgKCAnZXBnJyApIFsgMCBdIC4gc3RyaW5nICkKICAgZWxzZSA6CiAgICBwYXNzCiAgZXhjZXB0IDoKICAgT08gKCAnRVBHIEVycm9yJyApCiAgdHJ5IDoKICAgaWkxaWkxMUlJSWlpSSA9IFsgXQogICBpZiBsZW4gKCBpaUlpSUlJaWlJICggJ2xpbmsnICkgKSA+IDAgOgogICAgZm9yIE9vME8wT09Pb28gaW4gaWlJaUlJSWlpSSAoICdsaW5rJyApIDoKICAgICBpZiBub3QgT28wTzBPT09vbyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWkxaWkxMUlJSWlpSSAuIGFwcGVuZCAoIE9vME8wT09Pb28gLiBzdHJpbmcgKQogICAgICBpZiA1MCAtIDUwOiBJaTFJICogb09vb09vTzBPbzBPICUgaUlpaTFJMTFJMUlJMSArIE8wMG9Pb09vTzBvME8gKyBPMG9vME9PMCArIG9Pb29Pb08wT28wTwogICBlbGlmIGxlbiAoIGlpSWlJSUlpaUkgKCAnc3BvcnRzZGV2aWwnICkgKSA+IDAgOgogICAgZm9yIE9vME8wT09Pb28gaW4gaWlJaUlJSWlpSSAoICdzcG9ydHNkZXZpbCcgKSA6CiAgICAgaWYgbm90IE9vME8wT09Pb28gLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIE9PME9vb29PMDBvMCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uU3BvcnRzRGV2aWwvP21vZGU9MSZhbXA7aXRlbT1jYXRjaGVyJTNkc3RyZWFtcyUyNnVybD0nICsgT28wTzBPT09vbyAuIHN0cmluZwogICAgICBpSTFpMTFJSTFpID0gaWlJaUlJSWlpSSAoICdyZWZlcmVyJyApIFsgMCBdIC4gc3RyaW5nCiAgICAgIGlmIGlJMWkxMUlJMWkgOgogICAgICAgT08wT29vb08wMG8wID0gT08wT29vb08wMG8wICsgJyUyNnJlZmVyZXI9JyArIGlJMWkxMUlJMWkKICAgICAgaWkxaWkxMUlJSWlpSSAuIGFwcGVuZCAoIE9PME9vb29PMDBvMCApCiAgIGVsaWYgbGVuICggaWlJaUlJSWlpSSAoICdwMnAnICkgKSA+IDAgOgogICAgZm9yIE9vME8wT09Pb28gaW4gaWlJaUlJSWlpSSAoICdwMnAnICkgOgogICAgIGlmIG5vdCBPbzBPME9PT29vIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBpZiAnc29wOi8vJyBpbiBPbzBPME9PT29vIDoKICAgICAgIG8wbzBPb09vME8wT08gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnAycC1zdHJlYW1zLz91cmw9JyArIE9vME8wT09Pb28gLiBzdHJpbmcgKyAnJmFtcDttb2RlPTImYW1wOycgKyAnbmFtZT0nICsgTzAwTzBvT08wME8wMAogICAgICAgaWkxaWkxMUlJSWlpSSAuIGFwcGVuZCAoIG8wbzBPb09vME8wT08gKQogICAgICBlbHNlIDoKICAgICAgIGlJaTFJMTFJID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5wMnAtc3RyZWFtcy8/dXJsPScgKyBPbzBPME9PT29vIC4gc3RyaW5nICsgJyZhbXA7bW9kZT0xJmFtcDsnICsgJ25hbWU9JyArIE8wME8wb09PMDBPMDAKICAgICAgIGlpMWlpMTFJSUlpaUkgLiBhcHBlbmQgKCBpSWkxSTExSSApCiAgIGVsaWYgbGVuICggaWlJaUlJSWlpSSAoICd2YXVnaG4nICkgKSA+IDAgOgogICAgZm9yIE9vME8wT09Pb28gaW4gaWlJaUlJSWlpSSAoICd2YXVnaG4nICkgOgogICAgIGlmIG5vdCBPbzBPME9PT29vIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBJaWkxID0gJ3BsdWdpbjovL3BsdWdpbi5zdHJlYW0udmF1Z2hubGl2ZS50di8/bW9kZT1QbGF5TGl2ZVN0cmVhbSZhbXA7Y2hhbm5lbD0nICsgT28wTzBPT09vbyAuIHN0cmluZwogICAgICBpaTFpaTExSUlJaWlJIC4gYXBwZW5kICggSWlpMSApCiAgIGVsaWYgbGVuICggaWlJaUlJSWlpSSAoICdpbGl2ZScgKSApID4gMCA6CiAgICBmb3IgT28wTzBPT09vbyBpbiBpaUlpSUlJaWlJICggJ2lsaXZlJyApIDoKICAgICBpZiBub3QgT28wTzBPT09vbyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgbm90ICdodHRwJyBpbiBPbzBPME9PT29vIC4gc3RyaW5nIDoKICAgICAgIG9vT28wbzAwT09vMCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8udGJoLmlsaXZlLz91cmw9aHR0cDovL3d3dy5zdHJlYW1saXZlLnRvL3ZpZXcvJyArIE9vME8wT09Pb28gLiBzdHJpbmcgKyAnJmFtcDtsaW5rPTk5JmFtcDttb2RlPWlMaXZlUGxheScKICAgICAgZWxzZSA6CiAgICAgICBvb09vMG8wME9PbzAgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnRiaC5pbGl2ZS8/dXJsPScgKyBPbzBPME9PT29vIC4gc3RyaW5nICsgJyZhbXA7bGluaz05OSZhbXA7bW9kZT1pTGl2ZVBsYXknCiAgIGVsaWYgbGVuICggaWlJaUlJSWlpSSAoICd5dC1kbCcgKSApID4gMCA6CiAgICBmb3IgT28wTzBPT09vbyBpbiBpaUlpSUlJaWlJICggJ3l0LWRsJyApIDoKICAgICBpZiBub3QgT28wTzBPT09vbyAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgSTFJSWlpMSA9IE9vME8wT09Pb28gLiBzdHJpbmcgKyAnJm1vZGU9MTgnCiAgICAgIGlpMWlpMTFJSUlpaUkgLiBhcHBlbmQgKCBJMUlJaWkxICkKICAgZWxpZiBsZW4gKCBpaUlpSUlJaWlJICggJ3V0dWJlJyApICkgPiAwIDoKICAgIGZvciBPbzBPME9PT29vIGluIGlpSWlJSUlpaUkgKCAndXR1YmUnICkgOgogICAgIGlmIG5vdCBPbzBPME9PT29vIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBpZiBsZW4gKCBPbzBPME9PT29vIC4gc3RyaW5nICkgPT0gMTEgOgogICAgICAgT08wbzBvT09PME8gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnlvdXR1YmUvcGxheS8/dmlkZW9faWQ9JyArIE9vME8wT09Pb28gLiBzdHJpbmcKICAgICAgZWxpZiBPbzBPME9PT29vIC4gc3RyaW5nIC4gc3RhcnRzd2l0aCAoICdQTCcgKSBhbmQgbm90ICcmb3JkZXI9JyBpbiBPbzBPME9PT29vIC4gc3RyaW5nIDoKICAgICAgIE9PMG8wb09PTzBPID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvPyZvcmRlcj1kZWZhdWx0JnBsYXlsaXN0X2lkPScgKyBPbzBPME9PT29vIC4gc3RyaW5nCiAgICAgIGVsc2UgOgogICAgICAgT08wbzBvT09PME8gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnlvdXR1YmUvcGxheS8/cGxheWxpc3RfaWQ9JyArIE9vME8wT09Pb28gLiBzdHJpbmcKICAgIGlpMWlpMTFJSUlpaUkgLiBhcHBlbmQgKCBPTzBvMG9PT08wTyApCiAgIGVsaWYgbGVuICggaWlJaUlJSWlpSSAoICdpbWRiJyApICkgPiAwIDoKICAgIGZvciBPbzBPME9PT29vIGluIGlpSWlJSUlpaUkgKCAnaW1kYicgKSA6CiAgICAgaWYgbm90IE9vME8wT09Pb28gLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIGlmIGkxMSAuIGdldFNldHRpbmcgKCAnZ2VuZXNpc29ycHVsc2FyJyApID09ICcwJyA6CiAgICAgICBpSUkxaTExID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5nZW5lc2lzLz9hY3Rpb249cGxheSZpbWRiPScgKyBPbzBPME9PT29vIC4gc3RyaW5nCiAgICAgIGVsc2UgOgogICAgICAgaUlJMWkxMSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ucHVsc2FyL21vdmllL3R0JyArIE9vME8wT09Pb28gLiBzdHJpbmcgKyAnL3BsYXknCiAgICAgIGlpMWlpMTFJSUlpaUkgLiBhcHBlbmQgKCBpSUkxaTExICkKICAgZWxpZiBsZW4gKCBpaUlpSUlJaWlJICggJ2Y0bScgKSApID4gMCA6CiAgICBmb3IgT28wTzBPT09vbyBpbiBpaUlpSUlJaWlJICggJ2Y0bScgKSA6CiAgICAgaWYgbm90IE9vME8wT09Pb28gLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIGlmICcuZjRtJyBpbiBPbzBPME9PT29vIC4gc3RyaW5nIDoKICAgICAgIE9vb0lpSUlJSTFpMTFJID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5mNG1UZXN0ZXIvP3VybD0nICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIE9vME8wT09Pb28gLiBzdHJpbmcgKQogICAgICBlbGlmICcubTN1OCcgaW4gT28wTzBPT09vbyAuIHN0cmluZyA6CiAgICAgICBPb29JaUlJSUkxaTExSSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZjRtVGVzdGVyLz91cmw9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBPbzBPME9PT29vIC4gc3RyaW5nICkgKyAnJmFtcDtzdHJlYW10eXBlPUhMUycKICAgICAgIGlmIDg2IC0gODY6IElJaUkxSTExaTExIC4gTzAgLSBPb29vb29vb09PIC4gTzBPICsgTzAwb09vT29PMG8wTwogICAgICBlbHNlIDoKICAgICAgIE9vb0lpSUlJSTFpMTFJID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5mNG1UZXN0ZXIvP3VybD0nICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIE9vME8wT09Pb28gLiBzdHJpbmcgKSArICcmYW1wO3N0cmVhbXR5cGU9U0lNUExFJwogICAgaWkxaWkxMUlJSWlpSSAuIGFwcGVuZCAoIE9vb0lpSUlJSTFpMTFJICkKICAgZWxpZiBsZW4gKCBpaUlpSUlJaWlJICggJ2Z0dicgKSApID4gMCA6CiAgICBmb3IgT28wTzBPT09vbyBpbiBpaUlpSUlJaWlJICggJ2Z0dicgKSA6CiAgICAgaWYgbm90IE9vME8wT09Pb28gLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIE9PbyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uRi5ULlYvP25hbWU9JyArIHVybGxpYiAuIHF1b3RlICggTzAwTzBvT08wME8wMCApICsgJyZ1cmw9JyArIE9vME8wT09Pb28gLiBzdHJpbmcgKyAnJm1vZGU9MTI1JmNoX2ZhbmFydD1uYScKICAgICBpaTFpaTExSUlJaWlJIC4gYXBwZW5kICggT09vICkKICAgaWYgbGVuICggaWkxaWkxMUlJSWlpSSApIDwgMSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIE9PICggJ0Vycm9yIDxsaW5rPiBlbGVtZW50LCBQYXNzaW5nOicgKyBPMDBPMG9PTzAwTzAwIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgKQogICBjb250aW51ZQogICBpZiAyMiAtIDIyOiBvbzAwMCAqIE8wIC4gT28wb29PMG9vMG9PICogaTExaUlpaUlpaSAtIG9Pb29Pb08wT28wTyAqIElJCiAgaWlJMUlJSWkgPSBGYWxzZQogIGlmIDU5IC0gNTk6IElJaUkxSTExaTExICUgT29vb29vb29PTyAuIE8wb28wT08wIC8gT28wb29PMG9vMG9PICsgb09vb09vTzBPbzBPCiAgdHJ5IDoKICAgaWlJMUlJSWkgPSBpaUlpSUlJaWlJICggJ2V4dGVybmFsbGluaycgKSBbIDAgXSAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICBpZiA3NiAtIDc2OiBJSQogIGlmIGlpSTFJSUlpIDoKICAgT29PME8wME8wb28wTyA9IFsgaWlJMUlJSWkgXQogICBpaUkxSUlJaSA9IFRydWUKICBlbHNlIDoKICAgaWlJMUlJSWkgPSBGYWxzZQogIHRyeSA6CiAgIElJMTFJaUlpMTEgPSBpaUlpSUlJaWlJICggJ2pzb25ycGMnICkgWyAwIF0gLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgaWYgSUkxMUlpSWkxMSA6CiAgIE9vTzBPMDBPMG9vME8gPSBbIElJMTFJaUlpMTEgXQogICBJSTExSWlJaTExID0gVHJ1ZQogIGVsc2UgOgogICBJSTExSWlJaTExID0gRmFsc2UKICB0cnkgOgogICBJMUlpaUkgPSBpaUlpSUlJaWlJICggJ3RodW1ibmFpbCcgKSBbIDAgXSAuIHN0cmluZwogICBpZiBJMUlpaUkgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIEkxSWlpSSA9ICcnCiAgdHJ5IDoKICAgaWYgbm90IGlpSWlJSUlpaUkgKCAnZmFuYXJ0JyApIDoKICAgIGlmIGkxMSAuIGdldFNldHRpbmcgKCAndXNlX3RodW1iJyApID09ICJ0cnVlIiA6CiAgICAgbzBvID0gSTFJaWlJCiAgICBlbHNlIDoKICAgICBvMG8gPSBmYW5hcnQKICAgZWxzZSA6CiAgICBvMG8gPSBpaUlpSUlJaWlJICggJ2ZhbmFydCcgKSBbIDAgXSAuIHN0cmluZwogICBpZiBvMG8gPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIG8wbyA9IGZhbmFydAogIHRyeSA6CiAgIE9vT28gPSBpaUlpSUlJaWlJICggJ2luZm8nICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgT29PbyA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgT29PbyA9ICcnCiAgIGlmIDM2IC0gMzY6IElpMUkgKyBPMCAtIE8wMG9Pb09vTzBvME8gLSBPMCAlIGlpaTFJMUkgLiBpaWlpSWkxMWkKICB0cnkgOgogICBvMDBPID0gaWlJaUlJSWlpSSAoICdnZW5yZScgKSBbIDAgXSAuIHN0cmluZwogICBpZiBvMDBPID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBvMDBPID0gJycKICAgaWYgNzQgLSA3NDogaTExaUlpaUlpaSAuIG9Pb29Pb08wT28wTwogIHRyeSA6CiAgIGlJID0gaWlJaUlJSWlpSSAoICdkYXRlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIGlJID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBpSSA9ICcnCiAgIGlmIDM2IC0gMzY6IE9vb29vb29vT08gLiBPME8KICBJMUlpMUkxID0gTm9uZQogIGlmIGlpSWlJSUlpaUkgKCAncmVnZXgnICkgOgogICB0cnkgOgogICAgb09JSWlJaSA9IGlpSWlJSUlpaUkgKCAncmVnZXgnICkKICAgIEkxSWkxSTEgPSBJaUlJMTExaUkxaWkxICggb09JSWlJaSApCiAgIGV4Y2VwdCA6CiAgICBwYXNzCiAgICBpZiA5MSAtIDkxOiBvME9PTyAqIElJaUkxSTExaTExIC8gb09vb09vTzBPbzBPIC4gTzAgKyBPME8gKyBvbzAwMAogIHRyeSA6CiAgIGlmIGxlbiAoIGlpMWlpMTFJSUlpaUkgKSA+IDEgOgogICAgaWYgOCAtIDg6IGlpaWlJaTExaSAvIG8wT09PCiAgICBpMWlJMSA9IDAKICAgIGkxMWlpMWlpMTFpID0gWyBdCiAgICBmb3IgT28wTzBPT09vbyBpbiBpaTFpaTExSUlJaWlJIDoKICAgICBpZiBpMTEgLiBnZXRTZXR0aW5nICggJ2Fza19wbGF5bGlzdF9pdGVtcycgKSA9PSAndHJ1ZScgOgogICAgICBpZiBJMUlpMUkxIDoKICAgICAgIGkxMWlpMWlpMTFpIC4gYXBwZW5kICggT28wTzBPT09vbyArICcmcmVnZXhzPScgKyBJMUlpMUkxICkKICAgICAgZWxpZiBhbnkgKCB4IGluIE9vME8wT09Pb28gZm9yIHggaW4gSWlpSUlJMTExaUkgKSBhbmQgT28wTzBPT09vbyAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgICAgICBpMTFpaTFpaTExaSAuIGFwcGVuZCAoIE9vME8wT09Pb28gKyAnJm1vZGU9MTknICkKICAgICBlbHNlIDoKICAgICAgaTExaWkxaWkxMWkgLiBhcHBlbmQgKCBPbzBPME9PT29vICkKICAgIGlmIGkxMSAuIGdldFNldHRpbmcgKCAnYWRkX3BsYXlsaXN0JyApID09ICJmYWxzZSIgOgogICAgIGZvciBPbzBPME9PT29vIGluIGlpMWlpMTFJSUlpaUkgOgogICAgICBpMWlJMSArPSAxCiAgICAgIHByaW50ICdBRERMSU5LIDEnCiAgICAgIGkxaSAoIE9vME8wT09Pb28gLCAnJXMpICVzJyAlICggaTFpSTEgLCBPMDBPMG9PTzAwTzAwIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgKSAsIEkxSWlpSSAsIG8wbyAsIE9vT28gLCBvMDBPICwgaUkgLCBUcnVlICwgaTExaWkxaWkxMWkgLCBJMUlpMUkxICwgT09vb29vTzBPbyApCiAgICBlbHNlIDoKICAgICBpMWkgKCAnJyAsIE8wME8wb09PMDBPMDAgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSAsIEkxSWlpSSAsIG8wbyAsIE9vT28gLCBvMDBPICwgaUkgLCBUcnVlICwgaTExaWkxaWkxMWkgLCBJMUlpMUkxICwgT09vb29vTzBPbyApCiAgIGVsc2UgOgogICAgaWYgaWlJMUlJSWkgOgogICAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwIC4gZW5jb2RlICggJ3V0Zi04JyApICwgT29PME8wME8wb28wTyBbIDAgXSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDEgLCBJMUlpaUkgLCBmYW5hcnQgLCBPb09vICwgbzAwTyAsIGlJICwgTm9uZSAsICdzb3VyY2UnICkKICAgIGVsaWYgSUkxMUlpSWkxMSA6CiAgICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgLiBlbmNvZGUgKCAndXRmLTgnICkgLCBPb08wTzAwTzBvbzBPIFsgMCBdICwgNTMgLCBJMUlpaUkgLCBmYW5hcnQgLCBPb09vICwgbzAwTyAsIGlJICwgTm9uZSAsICdzb3VyY2UnICkKICAgIGVsaWYgaWkxaWkxMUlJSWlpSSBbIDAgXSAuIGZpbmQgKCAnc3VibGluaycgKSA+IDAgOgogICAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwIC4gZW5jb2RlICggJ3V0Zi04JyApICwgaWkxaWkxMUlJSWlpSSBbIDAgXSAsIDMwICwgSTFJaWlJICwgbzBvICwgT29PbyAsIEkxSWkxSTEgLCAnJyAsICcnICwgJycgKQogICAgZWxzZSA6CiAgICAgaTFpICggaWkxaWkxMUlJSWlpSSBbIDAgXSAsIE8wME8wb09PMDBPMDAgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSAsIEkxSWlpSSAsIG8wbyAsIE9vT28gLCBvMDBPICwgaUkgLCBUcnVlICwgTm9uZSAsIEkxSWkxSTEgLCBPT29vb29PME9vICkKICAgICBpZiA3MCAtIDcwOiBpMUlJaSAtIE8wb28wT08wICsgSUlpSTFJMTFpMTEKICBleGNlcHQgOgogICBPTyAoICdUaGVyZSB3YXMgYSBwcm9ibGVtIGFkZGluZyBpdGVtIC0gJyArIE8wME8wb09PMDBPMDAgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiBwcmludCAnRklOSVNIIEdFVCBJVEVNUyAqKioqKicKIGlmIDEyIC0gMTI6IElpSWkxMWlJSWkxSWkgLSBvME9PTyAlIG9vMDAwICogaWlpMUkxSQpkZWYgSWlJSTExMWlJMWlpMSAoIHJlZ19pdGVtICkgOgogdHJ5IDoKICBJMUlpMUkxID0geyB9CiAgZm9yIE9vME8wT09Pb28gaW4gcmVnX2l0ZW0gOgogICBJMUlpMUkxIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gPSB7IH0KICAgdHJ5IDoKICAgIEkxSWkxSTEgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdleHByZScgXSA9IE9vME8wT09Pb28gKCAnZXhwcmVzJyApIFsgMCBdIC4gc3RyaW5nCiAgICBpZiBub3QgSTFJaTFJMSBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2V4cHJlJyBdIDoKICAgICBJMUlpMUkxIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnZXhwcmUnIF0gPSAnJwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vIFJlZmVyZXIgLS0iICkKICAgSTFJaTFJMSBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3BhZ2UnIF0gPSBPbzBPME9PT29vICggJ3BhZ2UnICkgWyAwIF0gLiBzdHJpbmcKICAgdHJ5IDoKICAgIEkxSWkxSTEgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdyZWZlcicgXSA9IE9vME8wT09Pb28gKCAncmVmZXJlcicgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vIFJlZmVyZXIgLS0iICkKICAgdHJ5IDoKICAgIEkxSWkxSTEgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdjb25uZWN0aW9uJyBdID0gT28wTzBPT09vbyAoICdjb25uZWN0aW9uJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm8gY29ubmVjdGlvbiAtLSIgKQogICAgaWYgNDQgLSA0NDogTzBvbzBPTzAgJSBPMDBvT29Pb08wbzBPCiAgIHRyeSA6CiAgICBJMUlpMUkxIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnbm90cGxheWFibGUnIF0gPSBPbzBPME9PT29vICggJ25vdHBsYXlhYmxlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm8gbm90cGxheWFibGUgLS0iICkKICAgIGlmIDQxIC0gNDE6IGkxSUlpIC0gaWlpMUkxSSAtIE8wMG9Pb09vTzBvME8KICAgdHJ5IDoKICAgIEkxSWkxSTEgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdub3JlZGlyZWN0JyBdID0gT28wTzBPT09vbyAoICdub3JlZGlyZWN0JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm8gbm9yZWRpcmVjdCAtLSIgKQogICB0cnkgOgogICAgSTFJaTFJMSBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ29yaWdpbicgXSA9IE9vME8wT09Pb28gKCAnb3JpZ2luJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm8gb3JpZ2luIC0tIiApCiAgIHRyeSA6CiAgICBJMUlpMUkxIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnaW5jbHVkZWhlYWRlcnMnIF0gPSBPbzBPME9PT29vICggJ2luY2x1ZGVoZWFkZXJzJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm8gaW5jbHVkZWhlYWRlcnMgLS0iICkKICAgIGlmIDggLSA4OiBPME8gKyBJMWkxaUkxaSAtIElpSWkxMWlJSWkxSWkgJSBJSWlJMUkxMWkxMSAlIElpSWkxMWlJSWkxSWkgKiBpaWlpSWkxMWkKICAgdHJ5IDoKICAgIEkxSWkxSTEgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICd4LXJlcScgXSA9IE9vME8wT09Pb28gKCAneC1yZXEnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIE9PICggIlJlZ2V4OiAtLSBObyB4LXJlcSAtLSIgKQogICB0cnkgOgogICAgSTFJaTFJMSBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3gtZm9yd2FyZCcgXSA9IE9vME8wT09Pb28gKCAneC1mb3J3YXJkJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm8geC1mb3J3YXJkIC0tIiApCiAgICBpZiA5IC0gOTogSUlpSTFJMTFpMTEgLSBpMTFpSWlpSWlpIC0gSWkxSSAqIE8wMG9Pb09vTzBvME8gKyBJSQogICB0cnkgOgogICAgSTFJaTFJMSBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2FnZW50JyBdID0gT28wTzBPT09vbyAoICdhZ2VudCcgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vIFVzZXIgQWdlbnQgLS0iICkKICAgdHJ5IDoKICAgIEkxSWkxSTEgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdwb3N0JyBdID0gT28wTzBPT09vbyAoICdwb3N0JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm90IGEgcG9zdCIgKQogICB0cnkgOgogICAgSTFJaTFJMSBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3Jhd3Bvc3QnIF0gPSBPbzBPME9PT29vICggJ3Jhd3Bvc3QnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIE9PICggIlJlZ2V4OiAtLSBOb3QgYSByYXdwb3N0IiApCiAgIHRyeSA6CiAgICBJMUlpMUkxIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnaHRtbHVuZXNjYXBlJyBdID0gT28wTzBPT09vbyAoICdodG1sdW5lc2NhcGUnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIE9PICggIlJlZ2V4OiAtLSBOb3QgYSBodG1sdW5lc2NhcGUiICkKICAgIGlmIDQ0IC0gNDQ6IGkxMWkKICAgIGlmIDUyIC0gNTI6IG8wT09PIC0gSUlpSTFJMTFpMTEgKyBvME9PTyAlIElpSWkxMWlJSWkxSWkKICAgdHJ5IDoKICAgIEkxSWkxSTEgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdyZWFkY29va2llb25seScgXSA9IE9vME8wT09Pb28gKCAncmVhZGNvb2tpZW9ubHknICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIE9PICggIlJlZ2V4OiAtLSBOb3QgYSByZWFkQ29va2llT25seSIgKQogICB0cnkgOgogICAgSTFJaTFJMSBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2Nvb2tpZWphcicgXSA9IE9vME8wT09Pb28gKCAnY29va2llamFyJyApIFsgMCBdIC4gc3RyaW5nCiAgICBpZiBub3QgSTFJaTFJMSBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2Nvb2tpZWphcicgXSA6CiAgICAgSTFJaTFJMSBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2Nvb2tpZWphcicgXSA9ICcnCiAgIGV4Y2VwdCA6CiAgICBPTyAoICJSZWdleDogLS0gTm90IGEgY29va2llSmFyIiApCiAgIHRyeSA6CiAgICBJMUlpMUkxIFsgT28wTzBPT09vbyAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnc2V0Y29va2llJyBdID0gT28wTzBPT09vbyAoICdzZXRjb29raWUnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIE9PICggIlJlZ2V4OiAtLSBOb3QgYSBzZXRjb29raWUiICkKICAgdHJ5IDoKICAgIEkxSWkxSTEgWyBPbzBPME9PT29vICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdhcHBlbmRjb29raWUnIF0gPSBPbzBPME9PT29vICggJ2FwcGVuZGNvb2tpZScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIE5vdCBhIGFwcGVuZGNvb2tpZSIgKQogICAgaWYgMzUgLSAzNTogaUlpaTFJMTFJMUlJMQogICB0cnkgOgogICAgSTFJaTFJMSBbIE9vME8wT09Pb28gKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2lnbm9yZWNhY2hlJyBdID0gT28wTzBPT09vbyAoICdpZ25vcmVjYWNoZScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgT08gKCAiUmVnZXg6IC0tIG5vIGlnbm9yZWNhY2hlIiApCiAgICBpZiA0MiAtIDQyOiBJMWkxaUkxaSAuIG9Pb29Pb08wT28wTyAuIGkxSUlpICsgb28wMDAgKyBJaTFJICsgb09vb09vTzBPbzBPCiAgSTFJaTFJMSA9IHVybGxpYiAuIHF1b3RlICggcmVwciAoIEkxSWkxSTEgKSApCiAgcmV0dXJuIEkxSWkxSTEKICBpZiAzMSAtIDMxOiBPMG9vME9PMCAuIElpMUkgLSBJSSAuIE9vb29vb29vT08gLyBPb29vb29vb09PCiBleGNlcHQgOgogIEkxSWkxSTEgPSBOb25lCiAgT08gKCAncmVnZXggRXJyb3I6ICcgKyBPMDBPMG9PTzAwTzAwIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgKQogIGlmIDU2IC0gNTY6IE8wTyAvIGlpaWlJaTExaSAvIGkxMWlJaWlJaWkgKyBPb29vb29vb09PIC0gSUlpSTFJMTFpMTEgLSBpaWkxSTFJCmRlZiBJaWkxaWlJaTFJSSAoIHVybCApIDoKIHRyeSA6CiAgZm9yIE9vME8wT09Pb28gaW4gcmFuZ2UgKCAxICwgNTEgKSA6CiAgIGkxSTFpMTExSWkgPSBPTzBPMDBvT28gKCB1cmwgKQogICBpZiAiRVhULVgtU1RSRUFNLUlORiIgaW4gaTFJMWkxMTFJaSA6IHJldHVybiB1cmwKICAgaWYgbm90ICJFWFRNM1UiIGluIGkxSTFpMTExSWkgOiByZXR1cm4KICAgeGJtYyAuIHNsZWVwICggMjAwMCApCiAgcmV0dXJuCiBleGNlcHQgOgogIHJldHVybgogIGlmIDE0IC0gMTQ6IG9Pb29Pb08wT28wTwogIGlmIDE5IC0gMTk6IE8wTyAtIElJaUkxSTExaTExIC4gaWlpaUlpMTFpIC8gaWlpaUlpMTFpICUgSUkKZGVmIG9vT2lpICggcmVnZXhzICwgdXJsICwgY29va2llSmFyID0gTm9uZSAsIGZvckNvb2tpZUphck9ubHkgPSBGYWxzZSAsIHJlY3Vyc2l2ZUNhbGwgPSBGYWxzZSAsIGNhY2hlZFBhZ2VzID0geyB9ICwgcmF3UG9zdCA9IEZhbHNlICwgY29va2llX2phcl9maWxlID0gTm9uZSApIDoKIGlmIG5vdCByZWN1cnNpdmVDYWxsIDoKICByZWdleHMgPSBldmFsICggdXJsbGliIC4gdW5xdW90ZSAoIHJlZ2V4cyApICkKIE9PME8wT29vID0gcmUgLiBjb21waWxlICggJ1wkZG9yZWdleFxbKFteXF1dKilcXScgKSAuIGZpbmRhbGwgKCB1cmwgKQogb09vTzAgPSBUcnVlCiBpZiA3NyAtIDc3OiBpSWlpMUkxMUkxSUkxIC4gTzBvbzBPTzAgJSBPMG9vME9PMCArIGkxMWlJaWlJaWkKIGZvciBPbzAwbzBPTzBPMDBvIGluIE9PME8wT29vIDoKICBpZiBPbzAwbzBPTzBPMDBvIGluIHJlZ2V4cyA6CiAgIE8wT29vbyA9IHJlZ2V4cyBbIE9vMDBvME9PME8wMG8gXQogICBpaUlpMWkgPSBGYWxzZQogICBpZiAyNyAtIDI3OiBJaTFJICogSUkgLiBJMWkxaUkxaSAlIE9vMG9vTzBvbzBvTyAqIE9vMG9vTzBvbzBvTyAuIGkxSUlpCiAgIGlmIDcyIC0gNzI6IElpMUkgJSBvME9PTyArIE8wTyAvIGlpaWlJaTExaSArIE9vMG9vTzBvbzBvTwogICBpZiAnY29va2llamFyJyBpbiBPME9vb28gOgogICAgaWlJaTFpID0gTzBPb29vIFsgJ2Nvb2tpZWphcicgXQogICAgaWYgJyRkb3JlZ2V4JyBpbiBpaUlpMWkgOgogICAgIGNvb2tpZUphciA9IG9vT2lpICggcmVnZXhzICwgTzBPb29vIFsgJ2Nvb2tpZWphcicgXSAsIGNvb2tpZUphciAsIFRydWUgLCBUcnVlICwgY2FjaGVkUGFnZXMgKQogICAgIGlpSWkxaSA9IFRydWUKICAgIGVsc2UgOgogICAgIGlpSWkxaSA9IFRydWUKICAgaWYgaWlJaTFpIDoKICAgIGlmIGNvb2tpZUphciA9PSBOb25lIDoKICAgICBjb29raWVfamFyX2ZpbGUgPSBOb25lCiAgICAgaWYgJ29wZW5bJyBpbiBPME9vb28gWyAnY29va2llamFyJyBdIDoKICAgICAgY29va2llX2phcl9maWxlID0gTzBPb29vIFsgJ2Nvb2tpZWphcicgXSAuIHNwbGl0ICggJ29wZW5bJyApIFsgMSBdIC4gc3BsaXQgKCAnXScgKSBbIDAgXQogICAgICBpZiAxMCAtIDEwOiBJMWkxaUkxaSAvIElJICsgaTExaUlpaUlpaSAvIE8wMG9Pb09vTzBvME8KICAgICBjb29raWVKYXIgPSBPT09vT29PICggY29va2llX2phcl9maWxlICkKICAgICBpZiBjb29raWVfamFyX2ZpbGUgOgogICAgICBpSUlJSUkxaWkxSSAoIGNvb2tpZUphciAsIGNvb2tpZV9qYXJfZmlsZSApCiAgICBlbGlmICdzYXZlWycgaW4gTzBPb29vIFsgJ2Nvb2tpZWphcicgXSA6CiAgICAgY29va2llX2phcl9maWxlID0gTzBPb29vIFsgJ2Nvb2tpZWphcicgXSAuIHNwbGl0ICggJ3NhdmVbJyApIFsgMSBdIC4gc3BsaXQgKCAnXScgKSBbIDAgXQogICAgIElpMWkxaUkgPSBvcyAuIHBhdGggLiBqb2luICggT28wbzAwMDBvMG8wICwgY29va2llX2phcl9maWxlICkKICAgICBwcmludCAnY29tcGxldGVfcGF0aCcgLCBJaTFpMWlJCiAgICAgaUlJSUlJMWlpMUkgKCBjb29raWVKYXIgLCBjb29raWVfamFyX2ZpbGUgKQogICAgIGlmIDE2IC0gMTY6IElpMUkgLyBJSWlJMUkxMWkxMSAvIE9vb29vb29vT08gKiBvT29vT29PME9vME8gKyBpMUlJaSAlIElpMUkKICAgICBpZiA3MSAtIDcxOiBvbzAwMAogICBpZiBPME9vb28gWyAncGFnZScgXSBhbmQgJyRkb3JlZ2V4JyBpbiBPME9vb28gWyAncGFnZScgXSA6CiAgICBPME9vb28gWyAncGFnZScgXSA9IG9vT2lpICggcmVnZXhzICwgTzBPb29vIFsgJ3BhZ2UnIF0gLCBjb29raWVKYXIgLCByZWN1cnNpdmVDYWxsID0gVHJ1ZSAsIGNhY2hlZFBhZ2VzID0gY2FjaGVkUGFnZXMgKQogICAgaWYgMTQgLSAxNDogaTExaUlpaUlpaSAlIElpMUkKICAgaWYgJ3NldGNvb2tpZScgaW4gTzBPb29vIGFuZCBPME9vb28gWyAnc2V0Y29va2llJyBdIGFuZCAnJGRvcmVnZXgnIGluIE8wT29vbyBbICdzZXRjb29raWUnIF0gOgogICAgTzBPb29vIFsgJ3NldGNvb2tpZScgXSA9IG9vT2lpICggcmVnZXhzICwgTzBPb29vIFsgJ3NldGNvb2tpZScgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyApCiAgIGlmICdhcHBlbmRjb29raWUnIGluIE8wT29vbyBhbmQgTzBPb29vIFsgJ2FwcGVuZGNvb2tpZScgXSBhbmQgJyRkb3JlZ2V4JyBpbiBPME9vb28gWyAnYXBwZW5kY29va2llJyBdIDoKICAgIE8wT29vbyBbICdhcHBlbmRjb29raWUnIF0gPSBvb09paSAoIHJlZ2V4cyAsIE8wT29vbyBbICdhcHBlbmRjb29raWUnIF0gLCBjb29raWVKYXIgLCByZWN1cnNpdmVDYWxsID0gVHJ1ZSAsIGNhY2hlZFBhZ2VzID0gY2FjaGVkUGFnZXMgKQogICAgaWYgODIgLSA4MjogaUlpaTFJMTFJMUlJMSArIElJaUkxSTExaTExIC4gaUlpaTFJMTFJMUlJMSAlIE9vMG9vTzBvbzBvTyAvIE8wMG9Pb09vTzBvME8gLiBPMDBvT29Pb08wbzBPCiAgICBpZiAxNCAtIDE0OiBJaUlpMTFpSUlpMUlpIC4gSWkxSSAuIGlpaTFJMUkgKyBPb29vb29vb09PIC0gSWkxSSArIE9vMG9vTzBvbzBvTwogICBpZiAncG9zdCcgaW4gTzBPb29vIGFuZCAnJGRvcmVnZXgnIGluIE8wT29vbyBbICdwb3N0JyBdIDoKICAgIE8wT29vbyBbICdwb3N0JyBdID0gb29PaWkgKCByZWdleHMgLCBPME9vb28gWyAncG9zdCcgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyApCiAgICBwcmludCAncG9zdCBpcyBub3cnICwgTzBPb29vIFsgJ3Bvc3QnIF0KICAgIGlmIDkgLSA5OiBPMDBvT29Pb08wbzBPCiAgIGlmICdyYXdwb3N0JyBpbiBPME9vb28gYW5kICckZG9yZWdleCcgaW4gTzBPb29vIFsgJ3Jhd3Bvc3QnIF0gOgogICAgTzBPb29vIFsgJ3Jhd3Bvc3QnIF0gPSBvb09paSAoIHJlZ2V4cyAsIE8wT29vbyBbICdyYXdwb3N0JyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICwgcmF3UG9zdCA9IFRydWUgKQogICAgaWYgNTkgLSA1OTogb09vb09vTzBPbzBPICogaTExaSAuIE8wCiAgIGlmICdyYXdwb3N0JyBpbiBPME9vb28gYW5kICckZXBvY3RpbWUkJyBpbiBPME9vb28gWyAncmF3cG9zdCcgXSA6CiAgICBPME9vb28gWyAncmF3cG9zdCcgXSA9IE8wT29vbyBbICdyYXdwb3N0JyBdIC4gcmVwbGFjZSAoICckZXBvY3RpbWUkJyAsIE8wMDBPb09PMCAoICkgKQogICAgaWYgMzAgLSAzMDogT28wb29PMG9vMG9PCiAgIGlmICdyYXdwb3N0JyBpbiBPME9vb28gYW5kICckZXBvY3RpbWUyJCcgaW4gTzBPb29vIFsgJ3Jhd3Bvc3QnIF0gOgogICAgTzBPb29vIFsgJ3Jhd3Bvc3QnIF0gPSBPME9vb28gWyAncmF3cG9zdCcgXSAuIHJlcGxhY2UgKCAnJGVwb2N0aW1lMiQnICwgb09PICggKSApCiAgICBpZiA1MyAtIDUzOiBJMWkxaUkxaSAqIE9vMG9vTzBvbzBvTyAuIElJaUkxSTExaTExIC0gTzAwb09vT29PMG8wTyAlIE8wMG9Pb09vTzBvME8gKiBpMTFpSWlpSWlpCiAgICBpZiA3IC0gNzogTzAgLiBPMDBvT29Pb08wbzBPCiAgIGlpMTFpMWlJSUkgPSAnJwogICBpZiBPME9vb28gWyAncGFnZScgXSBhbmQgTzBPb29vIFsgJ3BhZ2UnIF0gaW4gY2FjaGVkUGFnZXMgYW5kIG5vdCAnaWdub3JlY2FjaGUnIGluIE8wT29vbyBhbmQgZm9yQ29va2llSmFyT25seSA9PSBGYWxzZSA6CiAgICBpaTExaTFpSUlJID0gY2FjaGVkUGFnZXMgWyBPME9vb28gWyAncGFnZScgXSBdCiAgIGVsc2UgOgogICAgaWYgTzBPb29vIFsgJ3BhZ2UnIF0gYW5kIG5vdCBPME9vb28gWyAncGFnZScgXSA9PSAnJyBhbmQgTzBPb29vIFsgJ3BhZ2UnIF0gLiBzdGFydHN3aXRoICggJ2h0dHAnICkgOgogICAgIGlmICckZXBvY3RpbWUkJyBpbiBPME9vb28gWyAncGFnZScgXSA6CiAgICAgIE8wT29vbyBbICdwYWdlJyBdID0gTzBPb29vIFsgJ3BhZ2UnIF0gLiByZXBsYWNlICggJyRlcG9jdGltZSQnICwgTzAwME9vT08wICggKSApCiAgICAgaWYgJyRlcG9jdGltZTIkJyBpbiBPME9vb28gWyAncGFnZScgXSA6CiAgICAgIE8wT29vbyBbICdwYWdlJyBdID0gTzBPb29vIFsgJ3BhZ2UnIF0gLiByZXBsYWNlICggJyRlcG9jdGltZTIkJyAsIG9PTyAoICkgKQogICAgICBpZiA1MSAtIDUxOiBPME8gLSBPMCAlIGlpaWlJaTExaSAtIGkxMWkKICAgICBJMUlJID0gTzBPb29vIFsgJ3BhZ2UnIF0gLiBzcGxpdCAoICd8JyApCiAgICAgT28wMDBvb09PTyA9IEkxSUkgWyAwIF0KICAgICBJaTExaTFJMTFpID0gTm9uZQogICAgIGlmIGxlbiAoIEkxSUkgKSA+IDEgOgogICAgICBJaTExaTFJMTFpID0gSTFJSSBbIDEgXQogICAgIG9PbyA9IHVybGxpYjIgLiBSZXF1ZXN0ICggT28wMDBvb09PTyApCiAgICAgb09vIC4gYWRkX2hlYWRlciAoICdVc2VyLUFnZW50JyAsICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjE7IHJ2OjE0LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTQuMC4xJyApCiAgICAgaWYgJ3JlZmVyJyBpbiBPME9vb28gOgogICAgICBvT28gLiBhZGRfaGVhZGVyICggJ1JlZmVyZXInICwgTzBPb29vIFsgJ3JlZmVyJyBdICkKICAgICBpZiAnYWdlbnQnIGluIE8wT29vbyA6CiAgICAgIG9PbyAuIGFkZF9oZWFkZXIgKCAnVXNlci1hZ2VudCcgLCBPME9vb28gWyAnYWdlbnQnIF0gKQogICAgIGlmICd4LXJlcScgaW4gTzBPb29vIDoKICAgICAgb09vIC4gYWRkX2hlYWRlciAoICdYLVJlcXVlc3RlZC1XaXRoJyAsIE8wT29vbyBbICd4LXJlcScgXSApCiAgICAgaWYgJ3gtZm9yd2FyZCcgaW4gTzBPb29vIDoKICAgICAgb09vIC4gYWRkX2hlYWRlciAoICdYLUZvcndhcmRlZC1Gb3InICwgTzBPb29vIFsgJ3gtZm9yd2FyZCcgXSApCiAgICAgaWYgJ3NldGNvb2tpZScgaW4gTzBPb29vIDoKICAgICAgcHJpbnQgJ2FkZGluZyBjb29raWUnICwgTzBPb29vIFsgJ3NldGNvb2tpZScgXQogICAgICBvT28gLiBhZGRfaGVhZGVyICggJ0Nvb2tpZScgLCBPME9vb28gWyAnc2V0Y29va2llJyBdICkKICAgICBpZiAnYXBwZW5kY29va2llJyBpbiBPME9vb28gOgogICAgICBwcmludCAnYXBwZW5kaW5nIGNvb2tpZSB0byBjb29raWVqYXInICwgTzBPb29vIFsgJ2FwcGVuZGNvb2tpZScgXQogICAgICBJMTFpMSA9IE8wT29vbyBbICdhcHBlbmRjb29raWUnIF0KICAgICAgSTExaTEgPSBJMTFpMSAuIHNwbGl0ICggJzsnICkKICAgICAgZm9yIGlJaUlJSUlJaWkgaW4gSTExaTEgOgogICAgICAgT09vMCAsIGlpMTFJMSA9IGlJaUlJSUlJaWkgLiBzcGxpdCAoICc9JyApCiAgICAgICBvTzBvbyAsIE9PbzAgPSBPT28wIC4gc3BsaXQgKCAnOicgKQogICAgICAgSWkxMTFpSWkxaUlpID0gY29va2llbGliIC4gQ29va2llICggdmVyc2lvbiA9IDAgLCBuYW1lID0gT09vMCAsIHZhbHVlID0gaWkxMUkxICwgcG9ydCA9IE5vbmUgLCBwb3J0X3NwZWNpZmllZCA9IEZhbHNlICwgZG9tYWluID0gb08wb28gLCBkb21haW5fc3BlY2lmaWVkID0gRmFsc2UgLCBkb21haW5faW5pdGlhbF9kb3QgPSBGYWxzZSAsIHBhdGggPSAnLycgLCBwYXRoX3NwZWNpZmllZCA9IFRydWUgLCBzZWN1cmUgPSBGYWxzZSAsIGV4cGlyZXMgPSBOb25lICwgZGlzY2FyZCA9IFRydWUgLCBjb21tZW50ID0gTm9uZSAsIGNvbW1lbnRfdXJsID0gTm9uZSAsIHJlc3QgPSB7ICdIdHRwT25seScgOiBOb25lIH0gLCByZmMyMTA5ID0gRmFsc2UgKQogICAgICAgY29va2llSmFyIC4gc2V0X2Nvb2tpZSAoIElpMTExaUlpMWlJaSApCiAgICAgICBpZiAyMSAtIDIxOiBpaWlpSWkxMWkgLyBvME9PTyArIE8wMG9Pb09vTzBvME8gKyBPb29vb29vb09PCiAgICAgICBpZiA5MSAtIDkxOiBpMTFpSWlpSWlpIC8gaTFJSWkgKyBPMG9vME9PMCArIElJICogaTExaUlpaUlpaQogICAgICAgaWYgNjYgLSA2NjogaUlpaTFJMTFJMUlJMSAlIGkxSUlpIC0gTzAgKyBpaWkxSTFJICogSTFpMWlJMWkgLiBPbzBvb08wb28wb08KICAgICAgIGlmIDUyIC0gNTI6IElJICsgTzAgLiBPMG9vME9PMCAuIG8wT09PIC4gTzBPCiAgICAgaWYgJ29yaWdpbicgaW4gTzBPb29vIDoKICAgICAgb09vIC4gYWRkX2hlYWRlciAoICdPcmlnaW4nICwgTzBPb29vIFsgJ29yaWdpbicgXSApCiAgICAgaWYgSWkxMWkxSTExaSA6CiAgICAgIElpMTFpMUkxMWkgPSBJaTExaTFJMTFpIC4gc3BsaXQgKCAnJicgKQogICAgICBmb3IgaUlpSUlJSUlpaSBpbiBJaTExaTFJMTFpIDoKICAgICAgIE9PbzAgLCBpaTExSTEgPSBpSWlJSUlJSWlpIC4gc3BsaXQgKCAnPScgKQogICAgICAgb09vIC4gYWRkX2hlYWRlciAoIE9PbzAgLCBpaTExSTEgKQogICAgICAgaWYgOTcgLSA5Nzogb09vb09vTzBPbzBPIC8gTzBvbzBPTzAKICAgICAgIGlmIDcxIC0gNzE6IGkxMWkgLyBpMUlJaSAuIG8wT09PICUgT29vb29vb29PTyAuIG9vMDAwCiAgICAgaWYgbm90IGNvb2tpZUphciA9PSBOb25lIDoKICAgICAgSWlpaWlpMTExaTFpaSA9IHVybGxpYjIgLiBIVFRQQ29va2llUHJvY2Vzc29yICggY29va2llSmFyICkKICAgICAgaTFpMWlJSTEgPSB1cmxsaWIyIC4gYnVpbGRfb3BlbmVyICggSWlpaWlpMTExaTFpaSAsIHVybGxpYjIgLiBIVFRQQmFzaWNBdXRoSGFuZGxlciAoICkgLCB1cmxsaWIyIC4gSFRUUEhhbmRsZXIgKCApICkKICAgICAgaTFpMWlJSTEgPSB1cmxsaWIyIC4gaW5zdGFsbF9vcGVuZXIgKCBpMWkxaUlJMSApCiAgICAgIGlmICdub3JlZGlyZWN0JyBpbiBPME9vb28gOgogICAgICAgaWlpMTFpMUlJSUkgPSB1cmxsaWIyIC4gYnVpbGRfb3BlbmVyICggSWlpaUlpSTFpSWlJMSApCiAgICAgICBpMWkxaUlJMSA9IHVybGxpYjIgLiBpbnN0YWxsX29wZW5lciAoIGlpaTExaTFJSUlJICkKICAgICAgIGlmIDI2IC0gMjY6IE8wIC4gTzBPICogSTFpMWlJMWkgLiBvT29vT29PME9vME8gJSBpMTFpSWlpSWlpCiAgICAgaWYgJ2Nvbm5lY3Rpb24nIGluIE8wT29vbyA6CiAgICAgIHByaW50ICcuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLmNvbm5lY3Rpb24vLy8vLy8uJyAsIE8wT29vbyBbICdjb25uZWN0aW9uJyBdCiAgICAgIGZyb20ga2VlcGFsaXZlIGltcG9ydCBIVFRQSGFuZGxlcgogICAgICBpMUlpMWlpaSA9IEhUVFBIYW5kbGVyICggKQogICAgICBpMWkxaUlJMSA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBpMUlpMWlpaSApCiAgICAgIHVybGxpYjIgLiBpbnN0YWxsX29wZW5lciAoIGkxaTFpSUkxICkKICAgICAgaWYgMjggLSAyODogaWlpaUlpMTFpIC4gaTExaSAvIG8wT09PICsgaTExaSAuIE9vb29vb29vT08gLiBPbzBvb08wb28wb08KICAgICBPMDAwT09PME9PbyA9IE5vbmUKICAgICBpZiAzMiAtIDMyOiBPMDBvT29Pb08wbzBPICogTzAKICAgICBpZiAncG9zdCcgaW4gTzBPb29vIDoKICAgICAgTzAwb09vMDBvMG8gPSBPME9vb28gWyAncG9zdCcgXQogICAgICBpZiAnJExpdmVTdHJlYW1SZWNhcHRjaGEnIGluIE8wMG9PbzAwbzBvIDoKICAgICAgICggTzAwb08wICwgTzBPbzAwT29PbyApID0gaWkxaWkxMTEgKCBPME9vb28gWyAncGFnZScgXSApCiAgICAgICBpZiBPMDBvTzAgOgogICAgICAgIE8wMG9PbzAwbzBvICs9ICdyZWNhcHRjaGFfY2hhbGxlbmdlX2ZpZWxkOicgKyBPMDBvTzAgKyAnLHJlY2FwdGNoYV9yZXNwb25zZV9maWVsZDonICsgTzBPbzAwT29PbwogICAgICBpMTExMTFJMUkgPSBPMDBvT28wMG8wbyAuIHNwbGl0ICggJywnICkgOwogICAgICBPMDAwT09PME9PbyA9IHsgfQogICAgICBmb3IgaWkxIGluIGkxMTExMUkxSSA6CiAgICAgICBPT28wID0gaWkxIC4gc3BsaXQgKCAnOicgKSBbIDAgXSA7CiAgICAgICBpaTExSTEgPSBpaTEgLiBzcGxpdCAoICc6JyApIFsgMSBdIDsKICAgICAgIE8wMDBPT08wT09vIFsgT09vMCBdID0gaWkxMUkxCiAgICAgIE8wMDBPT08wT09vID0gdXJsbGliIC4gdXJsZW5jb2RlICggTzAwME9PTzBPT28gKQogICAgICBpZiA4MCAtIDgwOiBPb29vb29vb09PIC0gSWkxSSAqIE8wMG9Pb09vTzBvME8gKiBvME9PTyAvIG9Pb29Pb08wT28wTyAvIElpMUkKICAgICBpZiAncmF3cG9zdCcgaW4gTzBPb29vIDoKICAgICAgTzAwME9PTzBPT28gPSBPME9vb28gWyAncmF3cG9zdCcgXQogICAgICBpZiAnJExpdmVTdHJlYW1SZWNhcHRjaGEnIGluIE8wMDBPT08wT09vIDoKICAgICAgICggTzAwb08wICwgTzBPbzAwT29PbyApID0gaWkxaWkxMTEgKCBPME9vb28gWyAncGFnZScgXSApCiAgICAgICBpZiBPMDBvTzAgOgogICAgICAgIE8wMDBPT08wT09vICs9ICcmcmVjYXB0Y2hhX2NoYWxsZW5nZV9maWVsZD0nICsgTzAwb08wICsgJyZyZWNhcHRjaGFfcmVzcG9uc2VfZmllbGQ9JyArIE8wT28wME9vT28KICAgICAgICBpZiAxMyAtIDEzOiBJMWkxaUkxaSAqIElJICsgaTExaUlpaUlpaSAqIEkxaTFpSTFpIC0gSUkKICAgICAgICBpZiAyMyAtIDIzOiBpSWlpMUkxMUkxSUkxICogaTFJSWkgJSBPb29vb29vb09PICogT28wb29PMG9vMG9PCiAgICAgICAgaWYgOSAtIDk6IE9vMG9vTzBvbzBvTyAtIGkxMWkgKyBPMCAvIGlJaWkxSTExSTFJSTEgLyBpMTFpSWlpSWlpCiAgICAgICAgaWYgMzkgLSAzOTogT28wb29PMG9vMG9PICogSUlpSTFJMTFpMTEgKyBpSWlpMUkxMUkxSUkxIC0gT28wb29PMG9vMG9PICsgSWkxSQogICAgIGlmIE8wMDBPT08wT09vIDoKICAgICAgb09vT29PID0gdXJsbGliMiAuIHVybG9wZW4gKCBvT28gLCBPMDAwT09PME9PbyApCiAgICAgZWxzZSA6CiAgICAgIG9Pb09vTyA9IHVybGxpYjIgLiB1cmxvcGVuICggb09vICkKICAgICAgaWYgNjkgLSA2OTogTzAKICAgICBpaTExaTFpSUlJID0gb09vT29PIC4gcmVhZCAoICkKICAgICBpaTExaTFpSUlJID0gbzBvb08gKCBpaTExaTFpSUlJICkKICAgICBpZiAnaW5jbHVkZWhlYWRlcnMnIGluIE8wT29vbyA6CiAgICAgIGlpMTFpMWlJSUkgKz0gc3RyICggb09vT29PIC4gaGVhZGVycyAuIGdldCAoICdTZXQtQ29va2llJyApICkKICAgICAgaWYgNzQgLSA3NDogTzAgKiBpaWlpSWkxMWkgLSBpMTFpSWlpSWlpICsgSTFpMWlJMWkKICAgICBvT29Pb08gLiBjbG9zZSAoICkKICAgICBjYWNoZWRQYWdlcyBbIE8wT29vbyBbICdwYWdlJyBdIF0gPSBpaTExaTFpSUlJCiAgICAgaWYgMTcgLSAxNzogaUlpaTFJMTFJMUlJMSAuIE9vb29vb29vT08gLyBpaWkxSTFJICUgaTExaSAlIGkxSUlpIC8gaTExaUlpaUlpaQogICAgIGlmIGZvckNvb2tpZUphck9ubHkgOgogICAgICByZXR1cm4gY29va2llSmFyCiAgICBlbGlmIE8wT29vbyBbICdwYWdlJyBdIGFuZCBub3QgTzBPb29vIFsgJ3BhZ2UnIF0gLiBzdGFydHN3aXRoICggJ2h0dHAnICkgOgogICAgIGlmIE8wT29vbyBbICdwYWdlJyBdIC4gc3RhcnRzd2l0aCAoICckcHlGdW5jdGlvbjonICkgOgogICAgICBPT08gPSBJaWlpaWkxaUkgKCBPME9vb28gWyAncGFnZScgXSAuIHNwbGl0ICggJyRweUZ1bmN0aW9uOicgKSBbIDEgXSAsICcnICwgY29va2llSmFyICkKICAgICAgaWYgZm9yQ29va2llSmFyT25seSA6CiAgICAgICByZXR1cm4gY29va2llSmFyCiAgICAgIGlpMTFpMWlJSUkgPSBPT08KICAgICBlbHNlIDoKICAgICAgaWkxMWkxaUlJSSA9IE8wT29vbyBbICdwYWdlJyBdCiAgIGlmICckcHlGdW5jdGlvbjpwbGF5bWVkaWEoJyBpbiBPME9vb28gWyAnZXhwcmUnIF0gb3IgJ0FjdGl2YXRlV2luZG93JyBpbiBPME9vb28gWyAnZXhwcmUnIF0gb3IgYW55ICggeCBpbiB1cmwgZm9yIHggaW4gT28gKSA6CiAgICBvT29PMCA9IEZhbHNlCiAgIGlmICckZG9yZWdleCcgaW4gTzBPb29vIFsgJ2V4cHJlJyBdIDoKICAgIE8wT29vbyBbICdleHByZScgXSA9IG9vT2lpICggcmVnZXhzICwgTzBPb29vIFsgJ2V4cHJlJyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgIGlmIDQ5IC0gNDk6IElpSWkxMWlJSWkxSWkgLiBPbzBvb08wb28wb08gLyBPME8gKyBpMTFpCiAgICBpZiA0NyAtIDQ3OiBPMCAvIE8wMG9Pb09vTzBvME8KICAgaWYgbm90IE8wT29vbyBbICdleHByZScgXSA9PSAnJyA6CiAgICBwcmludCAnZG9pbmcgaXQgJyAsIE8wT29vbyBbICdleHByZScgXQogICAgaWYgJyRMaXZlU3RyZWFtQ2FwdGNoYScgaW4gTzBPb29vIFsgJ2V4cHJlJyBdIDoKICAgICBPT08gPSBvTzBPTzAgKCBPME9vb28gLCBpaTExaTFpSUlJICwgY29va2llSmFyICkKICAgICB1cmwgPSB1cmwgLiByZXBsYWNlICggIiRkb3JlZ2V4WyIgKyBPbzAwbzBPTzBPMDBvICsgIl0iICwgT09PICkKICAgIGVsaWYgTzBPb29vIFsgJ2V4cHJlJyBdIC4gc3RhcnRzd2l0aCAoICckcHlGdW5jdGlvbjonICkgOgogICAgIE9PTyA9IElpaWlpaTFpSSAoIE8wT29vbyBbICdleHByZScgXSAuIHNwbGl0ICggJyRweUZ1bmN0aW9uOicgKSBbIDEgXSAsIGlpMTFpMWlJSUkgLCBjb29raWVKYXIgKQogICAgIGlmICdBY3RpdmF0ZVdpbmRvdycgaW4gTzBPb29vIFsgJ2V4cHJlJyBdIDogcmV0dXJuCiAgICAgcHJpbnQgJ3N0aWxsIGhyZScKICAgICBwcmludCAndXJsIGsgdmFsJyAsIHVybCAsIE9vMDBvME9PME8wMG8gLCBPT08KICAgICBpZiA4MiAtIDgyOiBPbzBvb08wb28wb08gLSBPbzBvb08wb28wb08gKyBvbzAwMAogICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIE9vMDBvME9PME8wMG8gKyAiXSIgLCBPT08gKQogICAgZWxzZSA6CiAgICAgaWYgbm90IGlpMTFpMWlJSUkgPT0gJycgOgogICAgICBJSTExMUlpMWkxID0gcmUgLiBjb21waWxlICggTzBPb29vIFsgJ2V4cHJlJyBdICkgLiBzZWFyY2ggKCBpaTExaTFpSUlJICkKICAgICAgT09PID0gJycKICAgICAgdHJ5IDoKICAgICAgIE9PTyA9IElJMTExSWkxaTEgLiBncm91cCAoIDEgKSAuIHN0cmlwICggKQogICAgICBleGNlcHQgOiB0cmFjZWJhY2sgLiBwcmludF9leGMgKCApCiAgICAgZWxzZSA6CiAgICAgIE9PTyA9IE8wT29vbyBbICdleHByZScgXQogICAgIGlmIHJhd1Bvc3QgOgogICAgICBwcmludCAncmF3cG9zdCcKICAgICAgT09PID0gdXJsbGliIC4gcXVvdGVfcGx1cyAoIE9PTyApCiAgICAgaWYgJ2h0bWx1bmVzY2FwZScgaW4gTzBPb29vIDoKICAgICAgaW1wb3J0IEhUTUxQYXJzZXIKICAgICAgT09PID0gSFRNTFBhcnNlciAuIEhUTUxQYXJzZXIgKCApIC4gdW5lc2NhcGUgKCBPT08gKQogICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIE9vMDBvME9PME8wMG8gKyAiXSIgLCBPT08gKQogICBlbHNlIDoKICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIE9vMDBvME9PME8wMG8gKyAiXSIgLCAnJyApCiBpZiAnJGVwb2N0aW1lJCcgaW4gdXJsIDoKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyRlcG9jdGltZSQnICwgTzAwME9vT08wICggKSApCiBpZiAnJGVwb2N0aW1lMiQnIGluIHVybCA6CiAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICckZXBvY3RpbWUyJCcgLCBvT08gKCApICkKICBpZiA5OCAtIDk4OiBPME8gLiBPME8gKiBpaWlpSWkxMWkgKiBpMTFpICogSTFpMWlJMWkKIGlmICckR1VJRCQnIGluIHVybCA6CiAgaW1wb3J0IHV1aWQKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyRHVUlEJCcgLCBzdHIgKCB1dWlkIC4gdXVpZDEgKCApICkgLiB1cHBlciAoICkgKQogaWYgJyRnZXRfY29va2llcyQnIGluIHVybCA6CiAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICckZ2V0X2Nvb2tpZXMkJyAsIG9Pb29PMCAoIGNvb2tpZUphciApICkKICBpZiA3OSAtIDc5OiBPME8gLSBpSWlpMUkxMUkxSUkxICsgTzAwb09vT29PMG8wTyAtIEkxaTFpSTFpCiBpZiByZWN1cnNpdmVDYWxsIDogcmV0dXJuIHVybAogcHJpbnQgJ2ZpbmFsIHVybCcgLCB1cmwKIGlmIHVybCA9PSAiIiA6CiAgcmV0dXJuCiBlbHNlIDoKICByZXR1cm4gdXJsICwgb09vTzAKICBpZiA5MyAtIDkzOiBpMTFpIC4gb09vb09vTzBPbzBPIC0gSUlpSTFJMTFpMTEgKyBvbzAwMApkZWYgb29PMG8gKCB0ICkgOgogaW1wb3J0IGhhc2hsaWIKIGlJaUlJSUlJaWkgPSBoYXNobGliIC4gbWQ1ICggKQogaUlpSUlJSUlpaSAuIHVwZGF0ZSAoIHQgKQogcmV0dXJuIGlJaUlJSUlJaWkgLiBoZXhkaWdlc3QgKCApCiBpZiA4OSAtIDg5OiBpaWkxSTFJIC8gSTFpMWlJMWkKZGVmIG9vb08wbzBvME8wICggZW5jcnlwdGVkICkgOgogaWlpMTExMTFJID0gIiIKIGZvciBPT08gaW4gZW5jcnlwdGVkIC4gc3BsaXQgKCAnOicgKSA6CiAgaWlpMTExMTFJICs9IGNociAoIGludCAoIE9PTyAuIHJlcGxhY2UgKCAiMG0wIiAsICIiICkgKSAvIDg0IC8gNSApCiByZXR1cm4gaWlpMTExMTFJCiBpZiAxNiAtIDE2OiBpSWlpMUkxMUkxSUkxIC0gT28wb29PMG9vMG9PCmRlZiBvMDBvICggbWVkaWFfdXJsICkgOgogdHJ5IDoKICBpbXBvcnQgQ3VzdG9tUGxheWVyCiAgSWkxSUlpaUlJaSA9IEN1c3RvbVBsYXllciAuIE15WEJNQ1BsYXllciAoICkKICBPbzAwMG8gPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBsYWJlbCA9IHN0ciAoIE8wME8wb09PMDBPMDAgKSAsIGljb25JbWFnZSA9ICJEZWZhdWx0VmlkZW8ucG5nIiAsIHRodW1ibmFpbEltYWdlID0geGJtYyAuIGdldEluZm9JbWFnZSAoICJMaXN0SXRlbS5UaHVtYiIgKSAsIHBhdGggPSBtZWRpYV91cmwgKQogIElpMUlJaWlJSWkgLiBwbGF5ICggbWVkaWFfdXJsICwgT28wMDBvICkKICB4Ym1jIC4gc2xlZXAgKCAxMDAwICkKICB3aGlsZSBJaTFJSWlpSUlpIC4gaXNfYWN0aXZlIDoKICAgeGJtYyAuIHNsZWVwICggMjAwICkKIGV4Y2VwdCA6CiAgdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggKQogcmV0dXJuICcnCiBpZiAzOSAtIDM5OiBvME9PTwogaWYgOTcgLSA5NzogSWkxSSAtIE8wTyAvIE8wMG9Pb09vTzBvME8gLiBpMTFpSWlpSWlpICUgaWlpaUlpMTFpICogaWlpaUlpMTFpCmRlZiBpaTFJSUlJaUkxMSAoIHBhZ2VfdmFsdWUgLCByZWZlcmVyID0gTm9uZSApIDoKIGlmIHJlZmVyZXIgOgogIHJlZmVyZXIgPSBbICggJ1JlZmVyZXInICwgcmVmZXJlciApIF0KIGlmIHBhZ2VfdmFsdWUgLiBzdGFydHN3aXRoICggImh0dHAiICkgOgogIGlJMUlJSWlpID0gcGFnZV92YWx1ZQogIHBhZ2VfdmFsdWUgPSBPTzBPMDBvT28gKCBwYWdlX3ZhbHVlICwgaGVhZGVycyA9IHJlZmVyZXIgKQogIGlmIDcgLSA3OiBPbzBvb08wb28wb08gLSBpaWkxSTFJIC8gaTExaSAqIE8wMG9Pb09vTzBvME8gLiBPMG9vME9PMCAqIE8wb28wT08wCiBPME8wb09PbzBPID0gIihldmFsXChmdW5jdGlvblwocCxhLGMsayxlLCg/OnJ8ZCkuKikiCiBpZiAxOSAtIDE5OiBJaUlpMTFpSUlpMUlpIC8gSTFpMWlJMWkgJSBJaUlpMTFpSUlpMUlpICUgTzBvbzBPTzAgKiBPbzBvb08wb28wb08KIGlpMW9Pb08wbzBvb28gPSByZSAuIGNvbXBpbGUgKCBPME8wb09PbzBPICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApCiBvb08gPSAiIgogaWYgaWkxb09vTzBvMG9vbyBhbmQgbGVuICggaWkxb09vTzBvMG9vbyApID4gMCA6CiAgZm9yIGlpMTFJMSBpbiBpaTFvT29PMG8wb29vIDoKICAgb08wbzBPME9vbzBvID0gaTFJaTExSUkgKCBpaTExSTEgKQogICBJaSA9IElpMUkxSTFpMUlpICggb08wbzBPME9vbzBvICwgJ1wnKC4qPylcJycgKQogICBpZiAndW5lc2NhcGUnIGluIG9PMG8wTzBPb28wbyA6CiAgICBvTzBvME8wT29vMG8gPSB1cmxsaWIgLiB1bnF1b3RlICggSWkgKQogICBvb08gKz0gb08wbzBPME9vbzBvICsgJ1xuJwogIHByaW50ICdmaW5hbCB2YWx1ZSBpcyAnICwgb29PCiAgaWYgNzcgLSA3Nzogb28wMDAgJSBPMDBvT29Pb08wbzBPCiAgaUkxSUlJaWkgPSBJaTFJMUkxaTFJaSAoIG9vTyAsICdzcmM9IiguKj8pIicgKQogIGlmIDkgLSA5OiBPME8gLSBJSWlJMUkxMWkxMSAqIE9vb29vb29vT08gLiBJSWlJMUkxMWkxMQogIHBhZ2VfdmFsdWUgPSBPTzBPMDBvT28gKCBpSTFJSUlpaSAsIGhlYWRlcnMgPSByZWZlcmVyICkKICBpZiAyIC0gMjogT29vb29vb29PTyAlIElpMUkKICBpZiA2MyAtIDYzOiBvT29vT29PME9vME8gJSBpSWlpMUkxMUkxSUkxCiBJMWlpID0gSWkxSTFJMWkxSWkgKCBwYWdlX3ZhbHVlICwgJ3N0cmVhbWVyXCcuKj9cJyguKj8pXCdcKScgKQogTzAwTzBPID0gSWkxSTFJMWkxSWkgKCBwYWdlX3ZhbHVlICwgJ2ZpbGVcJyxcc1wnKC4qPylcJycgKQogaWYgMTkgLSAxOTogTzBPICogaWlpMUkxSSAvIGlpaTFJMUkgLiBPb29vb29vb09PIC0gSWkxSSArIGkxMWlJaWlJaWkKIGlmIDg4IC0gODg6IGkxMWlJaWlJaWkgLSBJSQogcmV0dXJuIEkxaWkgKyAnIHBsYXlwYXRoPScgKyBPMDBPME8gKyAnIHBhZ2VVcmw9JyArIGlJMUlJSWlpCiBpZiA2NyAtIDY3OiBJaTFJIC4gSUlpSTFJMTFpMTEgKyBvbzAwMCAtIE9vb29vb29vT08KZGVmIE9PT29PICggcGFnZV92YWx1ZSAsIHJlZmVyZXIgPSBOb25lICkgOgogaWYgcmVmZXJlciA6CiAgcmVmZXJlciA9IFsgKCAnUmVmZXJlcicgLCByZWZlcmVyICkgXQogaWYgcGFnZV92YWx1ZSAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgcGFnZV92YWx1ZSA9IE9PME8wMG9PbyAoIHBhZ2VfdmFsdWUgLCBoZWFkZXJzID0gcmVmZXJlciApCiBPME8wb09PbzBPID0gInZhciBhID0gKC4qPyk7XHMqdmFyIGIgPSAoLio/KTtccyp2YXIgYyA9ICguKj8pO1xzKnZhciBkID0gKC4qPyk7XHMqdmFyIGYgPSAoLio/KTtccyp2YXIgdl9wYXJ0ID0gJyguKj8pJzsiCiBpaTFvT29PMG8wb29vID0gcmUgLiBjb21waWxlICggTzBPMG9PT28wTyApIC4gZmluZGFsbCAoIHBhZ2VfdmFsdWUgKSBbIDAgXQogaWYgMTQgLSAxNDogaWlpMUkxSSAuIGlJaWkxSTExSTFJSTEgLiBPb29vb29vb09PIC4gaTExaSAvIElpSWkxMWlJSWkxSWkKIE9vME8wME8wMDAgLCBvMDAwbyAsIGlpSWlJMWkxICwgSWlJaTEgLCBpMTExaWlJMWlpICwgaWkxMUkxID0gKCBpaTFvT29PMG8wb29vICkKIGkxMTFpaUkxaWkgPSBpbnQgKCBpMTExaWlJMWlpICkKIE9vME8wME8wMDAgPSBpbnQgKCBPbzBPMDBPMDAwICkgLyBpMTExaWlJMWlpCiBvMDAwbyA9IGludCAoIG8wMDBvICkgLyBpMTExaWlJMWlpCiBpaUlpSTFpMSA9IGludCAoIGlpSWlJMWkxICkgLyBpMTExaWlJMWlpCiBJaUlpMSA9IGludCAoIElpSWkxICkgLyBpMTExaWlJMWlpCiBpZiAyNCAtIDI0OiBvbzAwMCAvIE9vb29vb29vT08gLiBpMTFpIC4gb09vb09vTzBPbzBPICUgTzAgJSBPMDBvT29Pb08wbzBPCiBJaUlJSTFpMWkgPSAncnRtcDovLycgKyBzdHIgKCBPbzBPMDBPMDAwICkgKyAnLicgKyBzdHIgKCBvMDAwbyApICsgJy4nICsgc3RyICggaWlJaUkxaTEgKSArICcuJyArIHN0ciAoIElpSWkxICkgKyBpaTExSTEgOwogcmV0dXJuIElpSUlJMWkxaQogaWYgNDEgLSA0MTogSUlpSTFJMTFpMTEgLyBPMDBvT29Pb08wbzBPICogTzAwb09vT29PMG8wTyAtIElpMUkgLiBJMWkxaUkxaSAuIE9vb29vb29vT08KZGVmIEkxaUlJaTExMWkxICggdXJsICwgdXNlcmFnZW50ID0gTm9uZSApIDoKIHN0ciA9ICcjRVhUTTNVJwogc3RyICs9ICdcbiNFWFQtWC1TVFJFQU0tSU5GOlBST0dSQU0tSUQ9MSxCQU5EV0lEVEg9MzYxODE2Jwogc3RyICs9ICdcbicgKyB1cmwgKyAnJmJ5dGVzPTAtMjAwMDAwJwogaUlJMTExaWkgPSBvcyAuIHBhdGggLiBqb2luICggT28wbzAwMDBvMG8wICwgJ3Rlc3RmaWxlLm0zdScgKQogc3RyICs9ICdcbicKIGlpICggaUlJMTExaWkgLCBzdHIgKQogcmV0dXJuIGlJSTExMWlpCiBpZiAzMiAtIDMyOiBPMDBvT29Pb08wbzBPICUgbzBPT08gLSBJaTFJICogSWlJaTExaUlJaTFJaSArIGlpaTFJMUkKZGVmIGlpICggZmlsZV9uYW1lICwgcGFnZV9kYXRhICwgYXBwZW5kID0gRmFsc2UgKSA6CiBpZiBhcHBlbmQgOgogIGkxMTFpaUkxaWkgPSBvcGVuICggZmlsZV9uYW1lICwgJ2EnICkKICBpMTExaWlJMWlpIC4gd3JpdGUgKCBwYWdlX2RhdGEgKQogIGkxMTFpaUkxaWkgLiBjbG9zZSAoICkKIGVsc2UgOgogIGkxMTFpaUkxaWkgPSBvcGVuICggZmlsZV9uYW1lICwgJ3diJyApCiAgaTExMWlpSTFpaSAuIHdyaXRlICggcGFnZV9kYXRhICkKICBpMTExaWlJMWlpIC4gY2xvc2UgKCApCiAgcmV0dXJuICcnCiAgaWYgMTAgLSAxMDogb09vb09vTzBPbzBPIC8gSUlpSTFJMTFpMTEgJSBvME9PTyAqIElJCmRlZiBJMTFvbzBvb09PICggZmlsZV9uYW1lICkgOgogaTExMWlpSTFpaSA9IG9wZW4gKCBmaWxlX25hbWUgLCAncmInICkKIElpSWkxID0gaTExMWlpSTFpaSAuIHJlYWQgKCApCiBpMTExaWlJMWlpIC4gY2xvc2UgKCApCiByZXR1cm4gSWlJaTEKIGlmIDI0IC0gMjQ6IE8wTyAlIE8wTyAqIGlJaWkxSTExSTFJSTEKZGVmIElJSSAoIHBhZ2VfZGF0YSApIDoKIGltcG9ydCByZSAsIGJhc2U2NCAsIHVybGxpYiA7CiBpSWlJaTExSWkgPSBwYWdlX2RhdGEKIHdoaWxlICdnZWgoJyBpbiBpSWlJaTExSWkgOgogIGlmIGlJaUlpMTFJaSAuIHN0YXJ0c3dpdGggKCAnbG9sKCcgKSA6IGlJaUlpMTFJaSA9IGlJaUlpMTFJaSBbIDUgOiAtIDEgXQogIGlJaUlpMTFJaSA9IHJlIC4gY29tcGlsZSAoICciKC4qPykiJyApIC4gZmluZGFsbCAoIGlJaUlpMTFJaSApIFsgMCBdIDsKICBpSWlJaTExSWkgPSBiYXNlNjQgLiBiNjRkZWNvZGUgKCBpSWlJaTExSWkgKSA7CiAgaUlpSWkxMUlpID0gdXJsbGliIC4gdW5xdW90ZSAoIGlJaUlpMTFJaSApIDsKIHByaW50IGlJaUlpMTFJaQogcmV0dXJuIGlJaUlpMTFJaQogaWYgMjMgLSAyMzogaWlpaUlpMTFpIC0gSWkxSSArIGlpaTFJMUkKZGVmIElJMTEgKCBwYWdlX2RhdGEgKSA6CiBwcmludCAnZ2V0X2RhZ191cmwyJyAsIHBhZ2VfZGF0YQogSWlpaTExaUlpMSA9IE9PME8wMG9PbyAoIHBhZ2VfZGF0YSApIDsKIGkxaUkxMUkxSUkxID0gJyhodHRwLiopJwogaW1wb3J0IHV1aWQKIGlpMTFJSTFpID0gc3RyICggdXVpZCAuIHV1aWQxICggKSApIC4gdXBwZXIgKCApCiBPT09PMDAwbzAgPSByZSAuIGNvbXBpbGUgKCBpMWlJMTFJMUlJMSApIC4gZmluZGFsbCAoIElpaWkxMWlJaTEgKQogb29PTzAwb09vID0gWyAoICdYLVBsYXliYWNrLVNlc3Npb24tSWQnICwgaWkxMUlJMWkgKSBdCiBmb3Igb08wIGluIE9PT08wMDBvMCA6CiAgdHJ5IDoKICAgbzAwME9vT29PMCA9IE9PME8wMG9PbyAoIG9PMCAsIGhlYWRlcnMgPSBvb09PMDBvT28gKSA7CiAgIGlmIDk5IC0gOTk6IElpSWkxMWlJSWkxSWkgKiBvT29vT29PME9vME8gJSBJSWlJMUkxMWkxMSAuIG9vMDAwCiAgZXhjZXB0IDogcGFzcwogIGlmIDU4IC0gNTg6IGlpaTFJMUkgKyBpMTFpICogTzBvbzBPTzAgKiBpMTFpSWlpSWlpIC0gaUlpaTFJMTFJMUlJMQogcmV0dXJuIHBhZ2VfZGF0YSArICd8JlgtUGxheWJhY2stU2Vzc2lvbi1JZD0nICsgaWkxMUlJMWkKIGlmIDY4IC0gNjg6IE9vb29vb29vT08gJSBpMTFpCiBpZiAyNiAtIDI2OiBpMTFpICUgaTExaUlpaUlpaSAlIGlJaWkxSTExSTFJSTEgJSBpaWkxSTFJICogaWlpMUkxSSAqIG8wT09PCmRlZiBJaUkxSTExaUlpaSAoIHBhZ2VfZGF0YSApIDoKIHByaW50ICdnZXRfZGFnX3VybCcgLCBwYWdlX2RhdGEKIGlmIHBhZ2VfZGF0YSAuIHN0YXJ0c3dpdGggKCAnaHR0cDovL2RhZy50b3RhbC1zdHJlYW0ubmV0JyApIDoKICBvb09PMDBvT28gPSBbICggJ1VzZXItQWdlbnQnICwgJ1ZlcmlzbW8tQmxhY2tVSV8oMi40LjcuNS44LjAuMzQpJyApIF0KICBwYWdlX2RhdGEgPSBPTzBPMDBvT28gKCBwYWdlX2RhdGEgLCBoZWFkZXJzID0gb29PTzAwb09vICkgOwogIGlmIDYzIC0gNjM6IE8wb28wT08wICogaWlpMUkxSSAqIE8wMG9Pb09vTzBvME8gLSBpaWlpSWkxMWkgLSBPMDBvT29Pb08wbzBPCiBpZiAnMTI3LjAuMC4xJyBpbiBwYWdlX2RhdGEgOgogIHJldHVybiBvMG9vICggcGFnZV9kYXRhICkKIGVsaWYgSWkxSTFJMWkxSWkgKCBwYWdlX2RhdGEgLCAnd21zQXV0aFNpZ24lM0QoW14lJl0rKScgKSAhPSAnJyA6CiAgb09vT29vMCA9IElpMUkxSTFpMUlpICggcGFnZV9kYXRhICwgJyZ2ZXJfdD0oW14mXSspJicgKSArICc/d21zQXV0aFNpZ249JyArIElpMUkxSTFpMUlpICggcGFnZV9kYXRhICwgJ3dtc0F1dGhTaWduJTNEKFteJSZdKyknICkgKyAnPT0vbXA0OicgKyBJaTFJMUkxaTFJaSAoIHBhZ2VfZGF0YSAsICdcXD95PShbXiZdKykmJyApCiBlbHNlIDoKICBvT29Pb28wID0gSWkxSTFJMWkxSWkgKCBwYWdlX2RhdGEgLCAnaHJlZj0iKFteIl0rKSJbXiJdKyQnICkKICBpZiBsZW4gKCBvT29Pb28wICkgPT0gMCA6CiAgIG9Pb09vbzAgPSBwYWdlX2RhdGEKIG9Pb09vbzAgPSBvT29Pb28wIC4gcmVwbGFjZSAoICcgJyAsICclMjAnICkKIHJldHVybiBvT29Pb28wCiBpZiAxNiAtIDE2OiBvT29vT29PME9vME8KZGVmIElpMUkxSTFpMUlpICggZGF0YSAsIHJlX3BhdHRlbiApIDoKIE9vME8wME9vMG8wID0gJycKIE8wT29vbyA9IHJlIC4gc2VhcmNoICggcmVfcGF0dGVuICwgZGF0YSApCiBpZiBPME9vb28gIT0gTm9uZSA6CiAgT28wTzAwT28wbzAgPSBPME9vb28gLiBncm91cCAoIDEgKQogZWxzZSA6CiAgT28wTzAwT28wbzAgPSAnJwogcmV0dXJuIE9vME8wME9vMG8wCiBpZiA2IC0gNjogSWkxSSAtIG8wT09PICsgTzAwb09vT29PMG8wTyArIGkxSUlpIC8gTzAgLyBJaUlpMTFpSUlpMUlpCmRlZiBvMG9vICggcGFnZV9kYXRhICkgOgogb09vT29vMCA9ICcnCiBpZiAnMTI3LjAuMC4xJyBpbiBwYWdlX2RhdGEgOgogIG9Pb09vbzAgPSBJaTFJMUkxaTFJaSAoIHBhZ2VfZGF0YSAsICcmdmVyX3Q9KFteJl0rKSYnICkgKyAnIGxpdmU9dHJ1ZSB0aW1lb3V0PTE1IHBsYXlwYXRoPScgKyBJaTFJMUkxaTFJaSAoIHBhZ2VfZGF0YSAsICdcXD95PShbYS16QS1aMC05LV9cXC5AXSspJyApCiAgaWYgNDIgLSA0MjogaTFJSWkgLiBvT29vT29PME9vME8gLyBpMUlJaSArIE8wMG9Pb09vTzBvME8KIGlmIElpMUkxSTFpMUlpICggcGFnZV9kYXRhICwgJ3Rva2VuPShbXiZdKykmJyApICE9ICcnIDoKICBvT29Pb28wID0gb09vT29vMCArICc/dG9rZW49JyArIElpMUkxSTFpMUlpICggcGFnZV9kYXRhICwgJ3Rva2VuPShbXiZdKykmJyApCiBlbGlmIElpMUkxSTFpMUlpICggcGFnZV9kYXRhICwgJ3dtc0F1dGhTaWduJTNEKFteJSZdKyknICkgIT0gJycgOgogIG9Pb09vbzAgPSBJaTFJMUkxaTFJaSAoIHBhZ2VfZGF0YSAsICcmdmVyX3Q9KFteJl0rKSYnICkgKyAnP3dtc0F1dGhTaWduPScgKyBJaTFJMUkxaTFJaSAoIHBhZ2VfZGF0YSAsICd3bXNBdXRoU2lnbiUzRChbXiUmXSspJyApICsgJz09L21wNDonICsgSWkxSTFJMWkxSWkgKCBwYWdlX2RhdGEgLCAnXFw/eT0oW14mXSspJicgKQogZWxzZSA6CiAgb09vT29vMCA9IElpMUkxSTFpMUlpICggcGFnZV9kYXRhICwgJ0hSRUY9IihbXiJdKykiJyApCiAgaWYgNTQgLSA1NDogSUkgJSBJaTFJIC4gSTFpMWlJMWkgKyBpaWlpSWkxMWkgLSBJaTFJICogb09vb09vTzBPbzBPCiBpZiAnZGFnMS5hc3gnIGluIG9Pb09vbzAgOgogIHJldHVybiBJaUkxSTExaUlpaSAoIG9Pb09vbzAgKQogIGlmIDkyIC0gOTI6IElpSWkxMWlJSWkxSWkgKyBJMWkxaUkxaSAvIElJaUkxSTExaTExICUgTzBPICUgT28wb29PMG9vMG9PIC4gT29vb29vb29PTwogaWYgJ2RldmlubGl2ZWZzLmZwbGl2ZS5uZXQnIG5vdCBpbiBvT29Pb28wIDoKICBvT29Pb28wID0gb09vT29vMCAuIHJlcGxhY2UgKCAnZGV2aW5saXZlJyAsICdmbGl2ZScgKQogaWYgJ3Blcm1saXZlZnMuZnBsaXZlLm5ldCcgbm90IGluIG9Pb09vbzAgOgogIG9Pb09vbzAgPSBvT29Pb28wIC4gcmVwbGFjZSAoICdwZXJtbGl2ZScgLCAnZmxpdmUnICkKIHJldHVybiBvT29Pb28wCiBpZiA1MiAtIDUyOiBJSSAvIGkxMWlJaWlJaWkgLSBJaTFJIC4gT28wb29PMG9vMG9PICUgaUlpaTFJMTFJMUlJMSArIElpSWkxMWlJSWkxSWkKIGlmIDcxIC0gNzE6IGlpaWlJaTExaSAlIGlpaTFJMUkgKiBvbzAwMCAuIE8wIC8gTzAwb09vT29PMG8wTyAuIG8wT09PCmRlZiBvT09PbyAoIHN0cl9ldmFsICkgOgogT08wTzBvMG8wID0gIiIKIHRyeSA6CiAgaUlJSUlJaUkxSTEgPSAidyxpLHMsZT0oIiArIHN0cl9ldmFsICsgJyknCiAgZXhlYyAoIGlJSUlJSWlJMUkxICkKICBPTzBPMG8wbzAgPSBJMTFJMUlJaWlJSTEgKCB3ICwgaSAsIHMgLCBlICkKIGV4Y2VwdCA6IHRyYWNlYmFjayAuIHByaW50X2V4YyAoIGZpbGUgPSBzeXMgLiBzdGRvdXQgKQogcmV0dXJuIE9PME8wbzBvMAogaWYgMzEgLSAzMTogb09vb09vTzBPbzBPICogaWlpaUlpMTFpICsgT29vb29vb29PTyAtIE8wb28wT08wIC8gT29vb29vb29PTwpkZWYgSTExSTFJSWlpSUkxICggdyAsIGkgLCBzICwgZSApIDoKIEkxMTFJSWlpaTFJaSA9IDAgOwogSUkxID0gMCA7CiBpaUlJSWlJaWkgPSAwIDsKIEkxaTExSUkgPSBbIF0gOwogSUkxMUkxaWlpID0gWyBdIDsKIHdoaWxlIFRydWUgOgogIGlmICggSTExMUlJaWlpMUlpIDwgNSApIDoKICAgSUkxMUkxaWlpIC4gYXBwZW5kICggdyBbIEkxMTFJSWlpaTFJaSBdICkKICBlbGlmICggSTExMUlJaWlpMUlpIDwgbGVuICggdyApICkgOgogICBJMWkxMUlJIC4gYXBwZW5kICggdyBbIEkxMTFJSWlpaTFJaSBdICkgOwogIEkxMTFJSWlpaTFJaSArPSAxIDsKICBpZiAoIElJMSA8IDUgKSA6CiAgIElJMTFJMWlpaSAuIGFwcGVuZCAoIGkgWyBJSTEgXSApCiAgZWxpZiAoIElJMSA8IGxlbiAoIGkgKSApIDoKICAgSTFpMTFJSSAuIGFwcGVuZCAoIGkgWyBJSTEgXSApCiAgSUkxICs9IDEgOwogIGlmICggaWlJSUlpSWlpIDwgNSApIDoKICAgSUkxMUkxaWlpIC4gYXBwZW5kICggcyBbIGlpSUlJaUlpaSBdICkKICBlbGlmICggaWlJSUlpSWlpIDwgbGVuICggcyApICkgOgogICBJMWkxMUlJIC4gYXBwZW5kICggcyBbIGlpSUlJaUlpaSBdICkgOwogIGlpSUlJaUlpaSArPSAxIDsKICBpZiAoIGxlbiAoIHcgKSArIGxlbiAoIGkgKSArIGxlbiAoIHMgKSArIGxlbiAoIGUgKSA9PSBsZW4gKCBJMWkxMUlJICkgKyBsZW4gKCBJSTExSTFpaWkgKSArIGxlbiAoIGUgKSApIDoKICAgYnJlYWsgOwogICBpZiA1MSAtIDUxOiBvME9PTwogSUlJMUkxSWkxMWlJID0gJycgLiBqb2luICggSTFpMTFJSSApCiBvTzAwT29PTyA9ICcnIC4gam9pbiAoIElJMTFJMWlpaSApCiBJSTEgPSAwIDsKIEkxMUlJaUlpSSA9IFsgXSA7CiBmb3IgSTExMUlJaWlpMUlpIGluIHJhbmdlICggMCAsIGxlbiAoIEkxaTExSUkgKSAsIDIgKSA6CiAgaUlJSWkxaTFJMTFpID0gLSAxIDsKICBpZiAoIG9yZCAoIG9PMDBPb09PIFsgSUkxIF0gKSAlIDIgKSA6CiAgIGlJSUlpMWkxSTExaSA9IDEgOwogIEkxMUlJaUlpSSAuIGFwcGVuZCAoIGNociAoIGludCAoIElJSTFJMUlpMTFpSSBbIEkxMTFJSWlpaTFJaSA6IEkxMTFJSWlpaTFJaSArIDIgXSAsIDM2ICkgLSBpSUlJaTFpMUkxMWkgKSApIDsKICBJSTEgKz0gMSA7CiAgaWYgKCBJSTEgPj0gbGVuICggSUkxMUkxaWlpICkgKSA6CiAgIElJMSA9IDAgOwogSWlJSUkxaTFpID0gJycgLiBqb2luICggSTExSUlpSWlJICkKIGlmICdldmFsKGZ1bmN0aW9uKHcsaSxzLGUpJyBpbiBJaUlJSTFpMWkgOgogIHByaW50ICdTVElMTCBHT2luZycKICBJaUlJSTFpMWkgPSByZSAuIGNvbXBpbGUgKCAnZXZhbFwoZnVuY3Rpb25cKHcsaSxzLGVcKS4qfVwoKC4qPylcKScgKSAuIGZpbmRhbGwgKCBJaUlJSTFpMWkgKSBbIDAgXQogIHJldHVybiBvT09PbyAoIElpSUlJMWkxaSApCiBlbHNlIDoKICBwcmludCAnRklOSVNIRUQnCiAgcmV0dXJuIElpSUlJMWkxaQogIGlmIDU1IC0gNTU6IElJaUkxSTExaTExIC0gSWkxSQpkZWYgaTFJaTExSUkgKCBwYWdlX3ZhbHVlICwgcmVnZXhfZm9yX3RleHQgPSAnJyAsIGl0ZXJhdGlvbnMgPSAxICwgdG90YWxfaXRlcmF0aW9uID0gMSApIDoKIHRyeSA6CiAgTzBPTzBPID0gTm9uZQogIGlmIHBhZ2VfdmFsdWUgLiBzdGFydHN3aXRoICggImh0dHAiICkgOgogICBwYWdlX3ZhbHVlID0gT08wTzAwb09vICggcGFnZV92YWx1ZSApCiAgcHJpbnQgJ3BhZ2VfdmFsdWUnICwgcGFnZV92YWx1ZQogIGlmIHJlZ2V4X2Zvcl90ZXh0IGFuZCBsZW4gKCByZWdleF9mb3JfdGV4dCApID4gMCA6CiAgIHBhZ2VfdmFsdWUgPSByZSAuIGNvbXBpbGUgKCByZWdleF9mb3JfdGV4dCApIC4gZmluZGFsbCAoIHBhZ2VfdmFsdWUgKSBbIDAgXQogICBpZiA0OSAtIDQ5OiBpSWlpMUkxMUkxSUkxIC0gTzAgLiBpMUlJaSAtIE9vb29vb29vT08KICBwYWdlX3ZhbHVlID0gSWkxICggcGFnZV92YWx1ZSAsIGl0ZXJhdGlvbnMgLCB0b3RhbF9pdGVyYXRpb24gKQogZXhjZXB0IDogdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggZmlsZSA9IHN5cyAuIHN0ZG91dCApCiBwcmludCAndW5wYWNrZWQnICwgcGFnZV92YWx1ZQogaWYgJ3NhdjFsaXZlLnR2JyBpbiBwYWdlX3ZhbHVlIDoKICBwYWdlX3ZhbHVlID0gcGFnZV92YWx1ZSAuIHJlcGxhY2UgKCAnc2F2MWxpdmUudHYnICwgJ3Nhd2xpdmUudHYnICkKICBwcmludCAnc2F2MSB1bnBhY2tlZCcgLCBwYWdlX3ZhbHVlCiByZXR1cm4gcGFnZV92YWx1ZQogaWYgNzMgLSA3MzogaTFJSWkgKyBPMG9vME9PMCAuIGkxMWlJaWlJaWkKZGVmIElpMSAoIHNKYXZhc2NyaXB0ICwgaXRlcmF0aW9uID0gMSAsIHRvdGFsaXRlcmF0aW9ucyA9IDIgKSA6CiBwcmludCAnaXRlcmF0aW9uJyAsIGl0ZXJhdGlvbgogaWYgc0phdmFzY3JpcHQgLiBzdGFydHN3aXRoICggJ3ZhciBfMHhjYjhhPScgKSA6CiAgSUlpID0gc0phdmFzY3JpcHQgLiBzcGxpdCAoICd2YXIgXzB4Y2I4YT0nICkKICBpSUlJSUlpSTFJMSA9ICJteWFycmF5PSIgKyBJSWkgWyAxIF0gLiBzcGxpdCAoICJldmFsKCIgKSBbIDAgXQogIGV4ZWMgKCBpSUlJSUlpSTFJMSApCiAgb28wT08gPSA2MgogIElpaUkxMWkxSSA9IGludCAoIElJaSBbIDEgXSAuIHNwbGl0ICggIiw2MiwiICkgWyAxIF0gLiBzcGxpdCAoICcsJyApIFsgMCBdICkKICBPT28waWlJaWkxSUlpID0gbXlhcnJheSBbIDAgXQogIGlpMUlpSWlJMSA9IG15YXJyYXkgWyAzIF0KICB3aXRoIG9wZW4gKCAndGVtcCBmaWxlJyArIHN0ciAoIGl0ZXJhdGlvbiApICsgJy5qcycgLCAid2IiICkgYXMgT09Pb09vMDBPIDoKICAgT09Pb09vMDBPIC4gd3JpdGUgKCBzdHIgKCBpaTFJaUlpSTEgKSApCiBlbHNlIDoKICBpZiA1OSAtIDU5OiBJaTFJICUgaUlpaTFJMTFJMUlJMSAuIGkxSUlpICsgaTExaSAqIE9vMG9vTzBvbzBvTwogIElJaSA9IHNKYXZhc2NyaXB0IC4gc3BsaXQgKCAicm4gcH0oJyIgKQogIHByaW50IElJaQogIGlmIDQxIC0gNDE6IE8wMG9Pb09vTzBvME8gJSBvME9PTwogIE9PbzBpaUlpaTFJSWkgLCBvbzBPTyAsIElpaUkxMWkxSSAsIGlpMUlpSWlJMSA9ICggJycgLCAnMCcgLCAnMCcgLCAnJyApCiAgaWYgMTIgLSAxMjogSWkxSQogIGlJSUlJSWlJMUkxID0gInAxLGExLGMxLGsxPSgnIiArIElJaSBbIDEgXSAuIHNwbGl0ICggIi5zcGxpIiApIFsgMCBdICsgJyknCiAgZXhlYyAoIGlJSUlJSWlJMUkxICkKIGlpMUlpSWlJMSA9IGlpMUlpSWlJMSAuIHNwbGl0ICggJ3wnICkKIElJaSA9IElJaSBbIDEgXSAuIHNwbGl0ICggIikpJyIgKQogT29vTzAgPSAnJwogSWlJaTEgPSAnJwogaWYgNjkgLSA2OTogT29vb29vb29PTyArIElpMUkKIElJaTExSTEgPSBzdHIgKCBpaWlJMTExSSAoIE9PbzBpaUlpaTFJSWkgLCBvbzBPTyAsIElpaUkxMWkxSSAsIGlpMUlpSWlJMSAsIE9vb08wICwgSWlJaTEgLCBpdGVyYXRpb24gKSApCiBpZiBpdGVyYXRpb24gPj0gdG90YWxpdGVyYXRpb25zIDoKICByZXR1cm4gSUlpMTFJMQogZWxzZSA6CiAgcmV0dXJuIElpMSAoIElJaTExSTEgLCBpdGVyYXRpb24gKyAxICkKICBpZiA3NSAtIDc1OiBPb29vb29vb09PICUgTzBPIC8gb09vb09vTzBPbzBPCmRlZiBpaWlJMTExSSAoIHAgLCBhICwgYyAsIGsgLCBlICwgZCAsIGl0ZXJhdGlvbiAsIHYgPSAxICkgOgogaWYgNTYgLSA1NjogT29vb29vb29PTyAlIGkxMWlJaWlJaWkgKiBpSWlpMUkxMUkxSUkxIC4gTzBPICogTzAKIHdoaWxlICggYyA+PSAxICkgOgogIGMgPSBjIC0gMQogIGlmICggayBbIGMgXSApIDoKICAgaUlPME8wME9PbyA9IHN0ciAoIE9vT09vICggYyAsIGEgKSApCiAgIGlmIHYgPT0gMSA6CiAgICBwID0gcmUgLiBzdWIgKCAnXFxiJyArIGlJTzBPMDBPT28gKyAnXFxiJyAsIGsgWyBjIF0gLCBwICkKICAgZWxzZSA6CiAgICBwID0gaWlpMSAoIHAgLCBpSU8wTzAwT09vICwgayBbIGMgXSApCiByZXR1cm4gcAogaWYgNzggLSA3ODogbzBPT08gKyBpaWkxSTFJIC0gTzAKZGVmIGlpaTEgKCBzb3VyY2Vfc3RyICwgd29yZF90b19maW5kICwgcmVwbGFjZV93aXRoICkgOgogaTFJMWlJaTFJaUkgPSBOb25lCiBpMUkxaUlpMUlpSSA9IHNvdXJjZV9zdHIgLiBzcGxpdCAoIHdvcmRfdG9fZmluZCApCiBpZiBsZW4gKCBpMUkxaUlpMUlpSSApID4gMSA6CiAgaTExMTEgPSBbIF0KICBPME8wMDBPT09vID0gMAogIGZvciBpMTFpaTFJaTEgaW4gaTFJMWlJaTFJaUkgOgogICBpMTExMSAuIGFwcGVuZCAoIGkxMWlpMUlpMSApCiAgIE9PTyA9IHdvcmRfdG9fZmluZAogICBpZiAyNSAtIDI1OiBJaTFJCiAgIGlmIE8wTzAwME9PT28gPT0gbGVuICggaTFJMWlJaTFJaUkgKSAtIDEgOgogICAgT09PID0gJycKICAgZWxzZSA6CiAgICBpZiBsZW4gKCBpMTFpaTFJaTEgKSA9PSAwIDoKICAgICBpZiAoIGxlbiAoIGkxSTFpSWkxSWlJIFsgTzBPMDAwT09PbyArIDEgXSApID09IDAgYW5kIHdvcmRfdG9fZmluZCBbIDAgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgb3IgKCBsZW4gKCBpMUkxaUlpMUlpSSBbIE8wTzAwME9PT28gKyAxIF0gKSA+IDAgYW5kIGkxSTFpSWkxSWlJIFsgTzBPMDAwT09PbyArIDEgXSBbIDAgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgOgogICAgICBPT08gPSByZXBsYWNlX3dpdGgKICAgIGVsc2UgOgogICAgIGlmICggaTFJMWlJaTFJaUkgWyBPME8wMDBPT09vIF0gWyAtIDEgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgYW5kICggKCBsZW4gKCBpMUkxaUlpMUlpSSBbIE8wTzAwME9PT28gKyAxIF0gKSA9PSAwIGFuZCB3b3JkX3RvX2ZpbmQgWyAwIF0gLiBsb3dlciAoICkgbm90IGluICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBfJyApIG9yICggbGVuICggaTFJMWlJaTFJaUkgWyBPME8wMDBPT09vICsgMSBdICkgPiAwIGFuZCBpMUkxaUlpMUlpSSBbIE8wTzAwME9PT28gKyAxIF0gWyAwIF0gLiBsb3dlciAoICkgbm90IGluICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBfJyApICkgOgogICAgICBPT08gPSByZXBsYWNlX3dpdGgKICAgICAgaWYgODMgLSA4MzogSTFpMWlJMWkKICAgaTExMTEgLiBhcHBlbmQgKCBPT08gKQogICBPME8wMDBPT09vICs9IDEKICBzb3VyY2Vfc3RyID0gJycgLiBqb2luICggaTExMTEgKQogcmV0dXJuIHNvdXJjZV9zdHIKIGlmIDQ4IC0gNDg6IGkxMWkgKiBJaTFJICogSTFpMWlJMWkKZGVmIGkxaWlpSWlpMTEgKCBudW0gLCByYWRpeCApIDoKIGkxSTFpMTExSWkgPSAiIgogaWYgbnVtID09IDAgOiByZXR1cm4gJzAnCiB3aGlsZSBudW0gPiAwIDoKICBpMUkxaTExMUlpID0gIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiIgWyBudW0gJSByYWRpeCBdICsgaTFJMWkxMTFJaQogIG51bSAvPSByYWRpeAogcmV0dXJuIGkxSTFpMTExSWkKIGlmIDY3IC0gNjc6IElpSWkxMWlJSWkxSWkgJSBvbzAwMCAuIG9vMDAwIC0gSUkKZGVmIE9vT09vICggY2MgLCBhICkgOgogaUlPME8wME9PbyA9ICIiIGlmIGNjIDwgYSBlbHNlIE9vT09vICggaW50ICggY2MgLyBhICkgLCBhICkKIGNjID0gKCBjYyAlIGEgKQogTzAwb29PbyA9IGNociAoIGNjICsgMjkgKSBpZiBjYyA+IDM1IGVsc2Ugc3RyICggaTFpaWlJaWkxMSAoIGNjICwgMzYgKSApCiByZXR1cm4gaUlPME8wME9PbyArIE8wMG9vT28KIGlmIDgwIC0gODA6IElpSWkxMWlJSWkxSWkgLSBJaTFJICsgT29vb29vb29PTwogaWYgOTggLSA5ODogSWkxSSArIGkxSUlpIC4gb09vb09vTzBPbzBPIC0gaTExaSAtIElpSWkxMWlJSWkxSWkKZGVmIG9Pb29PMCAoIGNvb2tpZUphciApIDoKIHRyeSA6CiAgaUlJaTFJMWlpID0gIiIKICBmb3Igb08wMG8wICwgSWlpaSBpbiBlbnVtZXJhdGUgKCBjb29raWVKYXIgKSA6CiAgIGlJSWkxSTFpaSArPSBJaWlpIC4gbmFtZSArICI9IiArIElpaWkgLiB2YWx1ZSArICI7IgogZXhjZXB0IDogcGFzcwogcmV0dXJuIGlJSWkxSTFpaQogaWYgNDQgLSA0NDogSUkgLiBPMG9vME9PMCAuIE9vb29vb29vT08KIGlmIDUwIC0gNTA6IElpSWkxMWlJSWkxSWkgKiBPMDBvT29Pb08wbzBPICUgbzBPT08gLyBJSWlJMUkxMWkxMSAtIE8wICUgTzBvbzBPTzAKZGVmIGlJSUlJSTFpaTFJICggY29va2llSmFyICwgQ09PS0lFRklMRSApIDoKIHRyeSA6CiAgSWkxaTFpSSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvMDAwMG8wbzAgLCBDT09LSUVGSUxFICkKICBjb29raWVKYXIgLiBzYXZlICggSWkxaTFpSSAsIGlnbm9yZV9kaXNjYXJkID0gVHJ1ZSApCiBleGNlcHQgOiBwYXNzCiBpZiA0OCAtIDQ4OiBvT29vT29PME9vME8gKyBvME9PTyArIGkxMWkgKiBpMTFpSWlpSWlpCmRlZiBPT09vT29PICggQ09PS0lFRklMRSApIDoKIGlmIDEzIC0gMTM6IE9vb29vb29vT08gKiBpaWlpSWkxMWkgLSBPMDBvT29Pb08wbzBPIC8gSWkxSSArIGlpaTFJMUkgKyBPbzBvb08wb28wb08KIGlpaTFJSUkxaSA9IE5vbmUKIGlmIENPT0tJRUZJTEUgOgogIHRyeSA6CiAgIElpMWkxaUkgPSBvcyAuIHBhdGggLiBqb2luICggT28wbzAwMDBvMG8wICwgQ09PS0lFRklMRSApCiAgIGlpaTFJSUkxaSA9IGNvb2tpZWxpYiAuIExXUENvb2tpZUphciAoICkKICAgaWlpMUlJSTFpIC4gbG9hZCAoIElpMWkxaUkgLCBpZ25vcmVfZGlzY2FyZCA9IFRydWUgKQogIGV4Y2VwdCA6CiAgIGlpaTFJSUkxaSA9IE5vbmUKICAgaWYgMTcgLSAxNzogaTExaSAvIGkxMWkKIGlmIG5vdCBpaWkxSUlJMWkgOgogIGlpaTFJSUkxaSA9IGNvb2tpZWxpYiAuIExXUENvb2tpZUphciAoICkKICBpZiA2NSAtIDY1OiBPbzBvb08wb28wb08gKyBJSWlJMUkxMWkxMQogcmV0dXJuIGlpaTFJSUkxaQogaWYgNTkgLSA1OTogT29vb29vb29PTyArIGlpaTFJMUkgLiBJMWkxaUkxaSAtIE8wICUgaUlpaTFJMTFJMUlJMSAvIE8wCmRlZiBJaWlpaWkxaUkgKCBmdW5fY2FsbCAsIHBhZ2VfZGF0YSAsIENvb2tpZV9KYXIgKSA6CiBPT29vTzBvID0gJycKIGlmIGkxaUlJaTEgbm90IGluIHN5cyAuIHBhdGggOgogIHN5cyAuIHBhdGggLiBhcHBlbmQgKCBpMWlJSWkxICkKICBpZiAyNSAtIDI1OiBpSWlpMUkxMUkxSUkxIC0gTzBvbzBPTzAKIHByaW50IGZ1bl9jYWxsCiB0cnkgOgogIElpSTFJaUkxMWlJSSA9ICdpbXBvcnQgJyArIGZ1bl9jYWxsIC4gc3BsaXQgKCAnLicgKSBbIDAgXQogIHByaW50IElpSTFJaUkxMWlJSSAsIHN5cyAuIHBhdGgKICBleGVjICggSWlJMUlpSTExaUlJICkKICBwcmludCAnZG9uZScKIGV4Y2VwdCA6CiAgcHJpbnQgJ2Vycm9yIGluIGltcG9ydCcKICB0cmFjZWJhY2sgLiBwcmludF9leGMgKCBmaWxlID0gc3lzIC4gc3Rkb3V0ICkKIHByaW50ICdyZXRfdmFsPScgKyBmdW5fY2FsbAogZXhlYyAoICdyZXRfdmFsPScgKyBmdW5fY2FsbCApCiBwcmludCBPT29vTzBvCiByZXR1cm4gc3RyICggT09vb08wbyApCiBpZiA2NCAtIDY0OiBpaWlpSWkxMWkgLSBvT29vT29PME9vME8gLyBPMG9vME9PMCAtIE8wTwpkZWYgaWkxaWkxMTEgKCB1cmwgKSA6CiBpaTExSSA9IE9PME8wMG9PbyAoIHVybCApCiBpMUlpSWlpaUlJSUlpID0gIiIKIG9vT28wMCA9ICIiCiBPMDBPMCA9ICI8c2NyaXB0Lio/c3JjPVwiKC4qP3JlY2FwLio/KVwiIgogT28wTzAwT28wbzAgPSByZSAuIGZpbmRhbGwgKCBPMDBPMCAsIGlpMTFJICkKIGlJaUlpaWlJaSA9IEZhbHNlCiBpMWlpSUlpMTFJID0gTm9uZQogb29PbzAwID0gTm9uZQogaWYgODAgLSA4MDogSUkgKiBPMAogaWYgT28wTzAwT28wbzAgYW5kIGxlbiAoIE9vME8wME9vMG8wICkgPiAwIDoKICBvbzAwMG8wID0gT28wTzAwT28wbzAgWyAwIF0KICBpSWlJaWlpSWkgPSBUcnVlCiAgaWYgMjUgLSAyNTogaWlpMUkxSSArIG9vMDAwIC4gSWlJaTExaUlJaTFJaSAlIG9vMDAwICogSWkxSQogIGlpMUlpSWkxMSA9ICdjaGFsbGVuZ2UuKj9cJyguKj8pXCcnCiAgaWlpaWkxaWkxID0gJ1wnKC4qPylcJycKICBJaWlpSTEgPSBPTzBPMDBvT28gKCBvbzAwMG8wICkKICBpMUlpSWlpaUlJSUlpID0gcmUgLiBmaW5kYWxsICggaWkxSWlJaTExICwgSWlpaUkxICkgWyAwIF0KICBPT09vMCA9ICdodHRwOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS9yZWxvYWQ/Yz0nIDsKICBPT28wT28wT09vMCA9IG9vMDAwbzAgLiBzcGxpdCAoICdrPScgKSBbIDEgXQogIE9PT28wICs9IGkxSWlJaWlpSUlJSWkgKyAnJms9JyArIE9PbzBPbzBPT28wICsgJyZjYXB0Y2hhX2s9MSZ0eXBlPWltYWdlJmxhbmc9ZW4tR0InCiAgaTFpMTFJID0gT08wTzAwb09vICggT09PbzAgKQogIGkxaWlJSWkxMUkgPSByZSAuIGZpbmRhbGwgKCBpaWlpaTFpaTEgLCBpMWkxMUkgKSBbIDAgXQogIGlpSWlJID0gJ2h0dHA6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpL2ltYWdlP2M9JyArIGkxaWlJSWkxMUkKICBpZiBub3QgaWlJaUkgLiBzdGFydHN3aXRoICggImh0dHAiICkgOgogICBpaUlpSSA9ICdodHRwOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS8nICsgaWlJaUkKICBpbXBvcnQgcmFuZG9tCiAgT09vMCA9IHJhbmRvbSAuIHJhbmRyYW5nZSAoIDEwMCAsIDEwMDAgLCA1ICkKICBpMW9PT09PT09Pb08gPSBvcyAuIHBhdGggLiBqb2luICggT28wbzAwMDBvMG8wICwgc3RyICggT09vMCApICsgImNhcHRjaGEuaW1nIiApCiAgSTEgPSBvcGVuICggaTFvT09PT09PT29PICwgIndiIiApCiAgSTEgLiB3cml0ZSAoIE9PME8wMG9PbyAoIGlpSWlJICkgKQogIEkxIC4gY2xvc2UgKCApCiAgSUlpSSA9IE8wb09PbzBvICggY2FwdGNoYSA9IGkxb09PT09PT09vTyApCiAgb29PbzAwID0gSUlpSSAuIGdldCAoICkKICBvcyAuIHJlbW92ZSAoIGkxb09PT09PT09vTyApCiByZXR1cm4gaTFpaUlJaTExSSAsIG9vT28wMAogaWYgNTAgLSA1MDogTzBvbzBPTzAgLiBvME9PTyAuIE8wTyAqIGlpaTFJMUkgKyBpMTFpICUgaTExaUlpaUlpaQpkZWYgT08wTzAwb09vICggdXJsICwgY29va2llSmFyID0gTm9uZSAsIHBvc3QgPSBOb25lICwgdGltZW91dCA9IDIwICwgaGVhZGVycyA9IE5vbmUgKSA6CiBpZiA4IC0gODogSUkgKiBPMAogaWYgNzMgLSA3MzogSWlJaTExaUlJaTFJaSAvIGlpaWlJaTExaSAvIGlpaTFJMUkgLyBPME8KIElpaWlpaTExMWkxaWkgPSB1cmxsaWIyIC4gSFRUUENvb2tpZVByb2Nlc3NvciAoIGNvb2tpZUphciApCiBpMWkxaUlJMSA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBJaWlpaWkxMTFpMWlpICwgdXJsbGliMiAuIEhUVFBCYXNpY0F1dGhIYW5kbGVyICggKSAsIHVybGxpYjIgLiBIVFRQSGFuZGxlciAoICkgKQogb09vID0gdXJsbGliMiAuIFJlcXVlc3QgKCB1cmwgKQogb09vIC4gYWRkX2hlYWRlciA9IHsgJ1VzZXItYWdlbnQnIDogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMTsgV09XNjQ7IHJ2OjE5LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTkuMCcgfQogaWYgaGVhZGVycyA6CiAgZm9yIGlJaUlJSUlJaWkgLCBJSUkxaWkgaW4gaGVhZGVycyA6CiAgIG9PbyAuIGFkZF9oZWFkZXIgKCBpSWlJSUlJSWlpICwgSUlJMWlpICkKICAgaWYgNDEgLSA0MTogSUkgLiBJSWlJMUkxMWkxMSArIG9Pb29Pb08wT28wTwogb09vT29PID0gaTFpMWlJSTEgLiBvcGVuICggb09vICwgcG9zdCAsIHRpbWVvdXQgPSB0aW1lb3V0ICkKIGlpMTFpMWlJSUkgPSBvT29Pb08gLiByZWFkICggKQogb09vT29PIC4gY2xvc2UgKCApCiByZXR1cm4gaWkxMWkxaUlJSSA7CiBpZiAxMDAgLSAxMDA6IE8wMG9Pb09vTzBvME8gKyBPME8KZGVmIE9vMDBvME9PICggc3RyICwgcmVnID0gTm9uZSApIDoKIGlmIHJlZyA6CiAgc3RyID0gcmUgLiBmaW5kYWxsICggcmVnICwgc3RyICkgWyAwIF0KIE9PMG9vbzBvMCA9IHVybGxpYiAuIHVucXVvdGUgKCBzdHIgWyAwIDogbGVuICggc3RyICkgLSAxIF0gKSA7CiBvTzBvb09vTyA9ICcnIDsKIGZvciBPbzBPME9PT29vIGluIHJhbmdlICggbGVuICggT08wb29vMG8wICkgKSA6CiAgb08wb29Pb08gKz0gY2hyICggb3JkICggT08wb29vMG8wIFsgT28wTzBPT09vbyBdICkgLSBPTzBvb28wbzAgWyBsZW4gKCBPTzBvb28wbzAgKSAtIDEgXSApIDsKIG9PMG9vT29PID0gdXJsbGliIC4gdW5xdW90ZSAoIG9PMG9vT29PICkKIHByaW50IG9PMG9vT29PCiByZXR1cm4gb08wb29Pb08KIGlmIDU5IC0gNTk6IE8wICUgSUlpSTFJMTFpMTEKZGVmIG8wb29PICggc3RyICkgOgogTzBvMDBPME9vMCA9IHJlIC4gZmluZGFsbCAoICd1bmVzY2FwZVwoXCcoLio/KVwnJyAsIHN0ciApCiBwcmludCAnanMnICwgTzBvMDBPME9vMAogaWYgKCBub3QgTzBvMDBPME9vMCA9PSBOb25lICkgYW5kIGxlbiAoIE8wbzAwTzBPbzAgKSA+IDAgOgogIGZvciBvMCBpbiBPMG8wME8wT28wIDoKICAgc3RyID0gc3RyIC4gcmVwbGFjZSAoIG8wICwgdXJsbGliIC4gdW5xdW90ZSAoIG8wICkgKQogcmV0dXJuIHN0cgogaWYgMzUgLSAzNTogT28wb29PMG9vMG9PICsgaTFJSWkgKiBpaWlpSWkxMWkgLSBPMDBvT29Pb08wbzBPIC4gSUlpSTFJMTFpMTEKaWlJaWkxSUkgPSAwCmRlZiBvTzBPTzAgKCBtICwgaHRtbF9wYWdlICwgY29va2llSmFyICkgOgogZ2xvYmFsIGlpSWlpMUlJCiBpaUlpaTFJSSArPSAxCiBPb09vSUkgPSBtIFsgJ2V4cHJlJyBdCiBpSTFJSUlpaSA9IG0gWyAncGFnZScgXQogSWlpSUlJaUkxaWkgPSByZSAuIGNvbXBpbGUgKCAnXCRMaXZlU3RyZWFtQ2FwdGNoYVxbKFteXF1dKilcXScgKSAuIGZpbmRhbGwgKCBPb09vSUkgKSBbIDAgXQogaWYgNzggLSA3ODogTzAgKiBJaTFJCiBvbzAwMG8wID0gcmUgLiBjb21waWxlICggSWlpSUlJaUkxaWkgKSAuIGZpbmRhbGwgKCBodG1sX3BhZ2UgKSBbIDAgXQogcHJpbnQgT29Pb0lJICwgSWlpSUlJaUkxaWkgLCBvbzAwMG8wCiBpZiBub3Qgb28wMDBvMCAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgaUlpaTEgPSAnaHR0cDovLycgKyAiIiAuIGpvaW4gKCBpSTFJSUlpaSAuIHNwbGl0ICggJy8nICkgWyAyIDogMyBdICkKICBpZiBvbzAwMG8wIC4gc3RhcnRzd2l0aCAoICIvIiApIDoKICAgb28wMDBvMCA9IGlJaWkxICsgb28wMDBvMAogIGVsc2UgOgogICBvbzAwMG8wID0gaUlpaTEgKyAnLycgKyBvbzAwMG8wCiAgIGlmIDYyIC0gNjI6IGlJaWkxSTExSTFJSTEgKyBPMG9vME9PMCAuIElJaUkxSTExaTExIC8gT28wb29PMG9vMG9PICUgTzAgLiBJMWkxaUkxaQogaTFvT09PT09PT29PID0gb3MgLiBwYXRoIC4gam9pbiAoIE9vMG8wMDAwbzBvMCAsIHN0ciAoIGlpSWlpMUlJICkgKyAiY2FwdGNoYS5qcGciICkKIEkxID0gb3BlbiAoIGkxb09PT09PT09vTyAsICJ3YiIgKQogcHJpbnQgJyBjIGNhcHVybCcgLCBvbzAwMG8wCiBvT28gPSB1cmxsaWIyIC4gUmVxdWVzdCAoIG9vMDAwbzAgKQogb09vIC4gYWRkX2hlYWRlciA9IHsgJ1VzZXItYWdlbnQnIDogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMTsgV09XNjQ7IHJ2OjE5LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTkuMCcgfQogaWYgJ3JlZmVyJyBpbiBtIDoKICBvT28gLiBhZGRfaGVhZGVyICggJ1JlZmVyZXInICwgbSBbICdyZWZlcicgXSApCiBpZiAnYWdlbnQnIGluIG0gOgogIG9PbyAuIGFkZF9oZWFkZXIgKCAnVXNlci1hZ2VudCcgLCBtIFsgJ2FnZW50JyBdICkKIGlmICdzZXRjb29raWUnIGluIG0gOgogIHByaW50ICdhZGRpbmcgY29va2llJyAsIG0gWyAnc2V0Y29va2llJyBdCiAgb09vIC4gYWRkX2hlYWRlciAoICdDb29raWUnICwgbSBbICdzZXRjb29raWUnIF0gKQogIGlmIDkzIC0gOTM6IGkxMWlJaWlJaWkgJSBpSWlpMUkxMUkxSUkxICUgaTExaUlpaUlpaSArIElpSWkxMWlJSWkxSWkgLyBJaUlpMTFpSUlpMUlpIC8gaTExaQogdXJsbGliMiAuIHVybG9wZW4gKCBvT28gKQogb09vT29PID0gdXJsbGliMiAuIHVybG9wZW4gKCBvT28gKQogaWYgNDkgLSA0OTogSWkxSSAuIG8wT09PIC4gaTExaUlpaUlpaSAtIGkxMWkgLyBPMDBvT29Pb08wbzBPCiBJMSAuIHdyaXRlICggb09vT29PIC4gcmVhZCAoICkgKQogb09vT29PIC4gY2xvc2UgKCApCiBJMSAuIGNsb3NlICggKQogSUlpSSA9IE8wb09PbzBvICggY2FwdGNoYSA9IGkxb09PT09PT09vTyApCiBvb09vMDAgPSBJSWlJIC4gZ2V0ICggKQogcmV0dXJuIG9vT28wMAogaWYgNjIgLSA2MjogSWkxSQpjbGFzcyBPMG9PT28wbyAoIHhibWNndWkgLiBXaW5kb3dEaWFsb2cgKSA6CiBkZWYgX19pbml0X18gKCBzZWxmICwgKiBhcmdzICwgKioga3dhcmdzICkgOgogIHNlbGYgLiBjcHRsb2MgPSBrd2FyZ3MgLiBnZXQgKCAnY2FwdGNoYScgKQogIHNlbGYgLiBpbWcgPSB4Ym1jZ3VpIC4gQ29udHJvbEltYWdlICggMzM1ICwgMzAgLCA2MjQgLCA2MCAsIHNlbGYgLiBjcHRsb2MgKQogIHNlbGYgLiBhZGRDb250cm9sICggc2VsZiAuIGltZyApCiAgc2VsZiAuIGtiZCA9IHhibWMgLiBLZXlib2FyZCAoICkKICBpZiAxIC0gMTogT28wb29PMG9vMG9PIC8gT28wb29PMG9vMG9PIC0gaTExaUlpaUlpaQogZGVmIGdldCAoIHNlbGYgKSA6CiAgc2VsZiAuIHNob3cgKCApCiAgdGltZSAuIHNsZWVwICggMiApCiAgc2VsZiAuIGtiZCAuIGRvTW9kYWwgKCApCiAgaWYgKCBzZWxmIC4ga2JkIC4gaXNDb25maXJtZWQgKCApICkgOgogICBPTzBvID0gc2VsZiAuIGtiZCAuIGdldFRleHQgKCApCiAgIHNlbGYgLiBjbG9zZSAoICkKICAgcmV0dXJuIE9PMG8KICBzZWxmIC4gY2xvc2UgKCApCiAgcmV0dXJuIEZhbHNlCiAgaWYgMzIgLSAzMjogT29vb29vb29PTyAtIG9vMDAwIC0gaTExaUlpaUlpaSAqIElpSWkxMWlJSWkxSWkgLyBJSWlJMUkxMWkxMSArIE9vb29vb29vT08KZGVmIE8wMDBPb09PMCAoICkgOgogaW1wb3J0IHRpbWUKIHJldHVybiBzdHIgKCBpbnQgKCB0aW1lIC4gdGltZSAoICkgKiAxMDAwICkgKQogaWYgMzUgLSAzNTogaTFJSWkgLSBJaUlpMTFpSUlpMUlpICogTzBvbzBPTzAKZGVmIG9PTyAoICkgOgogaW1wb3J0IHRpbWUKIHJldHVybiBzdHIgKCBpbnQgKCB0aW1lIC4gdGltZSAoICkgKSApCiBpZiA2MyAtIDYzOiBPMG9vME9PMCAqIG8wT09PIC4gT29vb29vb29PTyAvIElpMUkgKiBJSWlJMUkxMWkxMSAuIElJCmRlZiBPb28wICggKSA6CiBvb29PMDBvMCA9IFsgXQogbzBvMDBvTzBvbzAwMCA9IHN5cyAuIGFyZ3YgWyAyIF0KIGlmIGxlbiAoIG8wbzAwb08wb28wMDAgKSA+PSAyIDoKICBvTzAwMG8gPSBzeXMgLiBhcmd2IFsgMiBdCiAgbzBPbyA9IG9PMDAwbyAuIHJlcGxhY2UgKCAnPycgLCAnJyApCiAgaWYgKCBvTzAwMG8gWyBsZW4gKCBvTzAwMG8gKSAtIDEgXSA9PSAnLycgKSA6CiAgIG9PMDAwbyA9IG9PMDAwbyBbIDAgOiBsZW4gKCBvTzAwMG8gKSAtIDIgXQogIG8wTzAgPSBvME9vIC4gc3BsaXQgKCAnJicgKQogIG9vb08wMG8wID0geyB9CiAgZm9yIE9vME8wT09Pb28gaW4gcmFuZ2UgKCBsZW4gKCBvME8wICkgKSA6CiAgIEkxSTFJaWlpMSA9IHsgfQogICBJMUkxSWlpaTEgPSBvME8wIFsgT28wTzBPT09vbyBdIC4gc3BsaXQgKCAnPScgKQogICBpZiAoIGxlbiAoIEkxSTFJaWlpMSApICkgPT0gMiA6CiAgICBvb29PMDBvMCBbIEkxSTFJaWlpMSBbIDAgXSBdID0gSTFJMUlpaWkxIFsgMSBdCiByZXR1cm4gb29vTzAwbzAKIGlmIDIgLSAyOiBpaWkxSTFJICsgSUkKIGlmIDc2IC0gNzY6IEkxaTFpSTFpCmRlZiBPb09vT28wICggKSA6CiBpMWlvT09vbzAwTzAwbyA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBvTzBvMG8wb29PMG9PICkgLiByZWFkICggKSApCiBPT29vb29PME9vID0gbGVuICggaTFpb09Pb28wME8wMG8gKQogZm9yIE9vME8wT09Pb28gaW4gaTFpb09Pb28wME8wMG8gOgogIE8wME8wb09PMDBPMDAgPSBPbzBPME9PT29vIFsgMCBdCiAgaWkxaWkxMUlJSWlpSSA9IE9vME8wT09Pb28gWyAxIF0KICBpMUlJMTFJSTEgPSBPbzBPME9PT29vIFsgMiBdCiAgdHJ5IDoKICAgbzBvID0gT28wTzBPT09vbyBbIDMgXQogICBpZiBvMG8gPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIGlmIGkxMSAuIGdldFNldHRpbmcgKCAndXNlX3RodW1iJyApID09ICJ0cnVlIiA6CiAgICBvMG8gPSBpMUlJMTFJSTEKICAgZWxzZSA6CiAgICBvMG8gPSBvT08wMG9PTwogIHRyeSA6IGkxMWlpMWlpMTFpID0gT28wTzBPT09vbyBbIDUgXQogIGV4Y2VwdCA6IGkxMWlpMWlpMTFpID0gTm9uZQogIHRyeSA6IEkxSWkxSTEgPSBPbzBPME9PT29vIFsgNiBdCiAgZXhjZXB0IDogSTFJaTFJMSA9IE5vbmUKICBpZiA1IC0gNTogSUlpSTFJMTFpMTEgLSBvME9PTyAlIGlpaWlJaTExaSAtIGkxMWkgLiBvT29vT29PME9vME8gKyBPMG9vME9PMAogIGlmIE9vME8wT09Pb28gWyA0IF0gPT0gMCA6CiAgIGkxaSAoIGlpMWlpMTFJSUlpaUkgLCBPMDBPMG9PTzAwTzAwICwgaTFJSTExSUkxICwgbzBvICwgJycgLCAnJyAsICcnICwgJ2ZhdicgLCBpMTFpaTFpaTExaSAsIEkxSWkxSTEgLCBPT29vb29PME9vICkKICBlbHNlIDoKICAgb28wb29vb29PMCAoIE8wME8wb09PMDBPMDAgLCBpaTFpaTExSUlJaWlJICwgT28wTzBPT09vbyBbIDQgXSAsIGkxSUkxMUlJMSAsIG9PTzAwb09PICwgJycgLCAnJyAsICcnICwgJycgLCAnZmF2JyApCiAgIGlmIDQ3IC0gNDc6IE8wIC0gaUlpaTFJMTFJMUlJMSAtIE8wb28wT08wCiAgIGlmIDQ2IC0gNDY6IE8wMG9Pb09vTzBvME8gLiBJaTFJICogTzBPIC4gT29vb29vb29PTyArIG8wT09PCmRlZiBvbzAwMDBvICggbmFtZSAsIHVybCAsIGljb25pbWFnZSAsIGZhbmFydCAsIG1vZGUgLCBwbGF5bGlzdCA9IE5vbmUgLCByZWdleHMgPSBOb25lICkgOgogaUlJMUkxID0gWyBdCiB0cnkgOgogIG5hbWUgPSBuYW1lIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkKIGV4Y2VwdCA6CiAgcGFzcwogaWYgb3MgLiBwYXRoIC4gZXhpc3RzICggb08wbzBvMG9vTzBvTyApID09IEZhbHNlIDoKICBPTyAoICdNYWtpbmcgRmF2b3JpdGVzIEZpbGUnICkKICBpSUkxSTEgLiBhcHBlbmQgKCAoIG5hbWUgLCB1cmwgLCBpY29uaW1hZ2UgLCBmYW5hcnQgLCBtb2RlICwgcGxheWxpc3QgLCByZWdleHMgKSApCiAgT28wTzAwTzAwMCA9IG9wZW4gKCBvTzBvMG8wb29PMG9PICwgInciICkKICBPbzBPMDBPMDAwIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBpSUkxSTEgKSApCiAgT28wTzAwTzAwMCAuIGNsb3NlICggKQogZWxzZSA6CiAgT08gKCAnQXBwZW5kaW5nIEZhdm9yaXRlcycgKQogIE9vME8wME8wMDAgPSBvcGVuICggb08wbzBvMG9vTzBvTyApIC4gcmVhZCAoICkKICBpaTFJID0ganNvbiAuIGxvYWRzICggT28wTzAwTzAwMCApCiAgaWkxSSAuIGFwcGVuZCAoICggbmFtZSAsIHVybCAsIGljb25pbWFnZSAsIGZhbmFydCAsIG1vZGUgKSApCiAgbzAwMG8gPSBvcGVuICggb08wbzBvMG9vTzBvTyAsICJ3IiApCiAgbzAwMG8gLiB3cml0ZSAoIGpzb24gLiBkdW1wcyAoIGlpMUkgKSApCiAgbzAwMG8gLiBjbG9zZSAoICkKICBpZiAzOCAtIDM4OiBJMWkxaUkxaSAlIElpMUkgLSBPb29vb29vb09PCiAgaWYgODcgLSA4NzogTzBPICUgb09vb09vTzBPbzBPCmRlZiBvb29vT29PME8gKCBuYW1lICkgOgogaWkxSSA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBvTzBvMG8wb29PMG9PICkgLiByZWFkICggKSApCiBmb3Igb08wMG8wIGluIHJhbmdlICggbGVuICggaWkxSSApICkgOgogIGlmIGlpMUkgWyBvTzAwbzAgXSBbIDAgXSA9PSBuYW1lIDoKICAgZGVsIGlpMUkgWyBvTzAwbzAgXQogICBvMDAwbyA9IG9wZW4gKCBvTzBvMG8wb29PMG9PICwgInciICkKICAgbzAwMG8gLiB3cml0ZSAoIGpzb24gLiBkdW1wcyAoIGlpMUkgKSApCiAgIG8wMDBvIC4gY2xvc2UgKCApCiAgIGJyZWFrCiB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Db250YWluZXIuUmVmcmVzaCIgKQogaWYgMSAtIDE6IG8wT09PIC8gTzBPICsgaWlpaUlpMTFpIC4gSWlJaTExaUlJaTFJaSAvIG8wT09PIC0gTzBvbzBPTzAKZGVmIE9vME8wICggdXJsICkgOgogaWYgaTExIC4gZ2V0U2V0dGluZyAoICdVcGRhdGVjb21tb25yZXNvbHZlcnMnICkgPT0gJ3RydWUnIDoKICBvTzAgPSBvcyAuIHBhdGggLiBqb2luICggb09vMG9vb28wMG8gLCAnZ2VuZXNpc3Jlc29sdmVycy5weScgKQogIGlmIHhibWN2ZnMgLiBleGlzdHMgKCBvTzAgKSA6CiAgIG9zIC4gcmVtb3ZlICggb08wICkKICAgaWYgNSAtIDU6IElpMUkKICBJMWkxaUlpMUkxID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9sYW1iZGE4MS9sYW1iZGEtYWRkb25zL21hc3Rlci9wbHVnaW4udmlkZW8uZ2VuZXNpcy9jb21tb25yZXNvbHZlcnMucHknCiAgT09PMCA9IHVybGxpYiAuIHVybHJldHJpZXZlICggSTFpMWlJaTFJMSAsIG9PMCApCiAgaTExIC4gc2V0U2V0dGluZyAoICdVcGRhdGVjb21tb25yZXNvbHZlcnMnICwgJ2ZhbHNlJyApCiB0cnkgOgogIGltcG9ydCBnZW5lc2lzcmVzb2x2ZXJzCiBleGNlcHQgRXhjZXB0aW9uIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oUGF1bHMgV29ybGQsUGxlYXNlIGVuYWJsZSBVcGRhdGUgQ29tbW9ucmVzb2x2ZXJzIHRvIFBsYXkgaW4gU2V0dGluZ3MuIC0gLDEwMDAwKSIgKQogIGlmIDEwIC0gMTA6IElJaUkxSTExaTExICsgTzAKIElpMWlJID0gZ2VuZXNpc3Jlc29sdmVycyAuIGdldCAoIHVybCApIC4gcmVzdWx0CiBpZiB1cmwgPT0gSWkxaUkgb3IgSWkxaUkgaXMgTm9uZSA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKFBhdWxzIFdvcmxkLCBBdHRlbXB0aW5nIFRvIExvYWQgVmlkZW8uLi4gLSAsNTAwMCkiICkKICBpbXBvcnQgdXJscmVzb2x2ZXIKICBPbzBPME8wMDAgPSB1cmxyZXNvbHZlciAuIEhvc3RlZE1lZGlhRmlsZSAoIHVybCApCiAgaWYgT28wTzBPMDAwIDoKICAgSUkxSWkgPSB1cmxyZXNvbHZlciAuIHJlc29sdmUgKCB1cmwgKQogICBJaTFpSSA9IElJMUlpCiBpZiBJaTFpSSA6CiAgaWYgaXNpbnN0YW5jZSAoIElpMWlJICwgbGlzdCApIDoKICAgZm9yIE9vMDBvME9PME8wMG8gaW4gSWkxaUkgOgogICAgT09vTzAwb29PID0gaTExIC4gZ2V0U2V0dGluZyAoICdxdWFsaXR5JyApCiAgICBpZiBPbzAwbzBPTzBPMDBvIFsgJ3F1YWxpdHknIF0gPT0gJ0hEJyA6CiAgICAgSUkxSWkgPSBPbzAwbzBPTzBPMDBvIFsgJ3VybCcgXQogICAgIGJyZWFrCiAgICBlbGlmIE9vMDBvME9PME8wMG8gWyAncXVhbGl0eScgXSA9PSAnU0QnIDoKICAgICBJSTFJaSA9IE9vMDBvME9PME8wMG8gWyAndXJsJyBdCiAgICBlbGlmIE9vMDBvME9PME8wMG8gWyAncXVhbGl0eScgXSA9PSAnMTA4MHAnIGFuZCBpMTEgLiBnZXRTZXR0aW5nICggJzEwODBwcXVhbGl0eScgKSA9PSAndHJ1ZScgOgogICAgIElJMUlpID0gT28wMG8wT08wTzAwbyBbICd1cmwnIF0KICAgICBicmVhawogIGVsc2UgOgogICBJSTFJaSA9IElpMWlJCiByZXR1cm4gSUkxSWkKZGVmIEkxSUlJSWlpaTFpICggbmFtZSAsIG11X3BsYXlsaXN0ICkgOgogaW1wb3J0IHVybHBhcnNlCiBpZiBpMTEgLiBnZXRTZXR0aW5nICggJ2Fza19wbGF5bGlzdF9pdGVtcycgKSA9PSAndHJ1ZScgOgogIG8wSWlpaUkxMTFJID0gWyBdCiAgZm9yIE9vME8wT09Pb28gaW4gbXVfcGxheWxpc3QgOgogICBJSUkxSTExaTFpSWkgPSB1cmxwYXJzZSAuIHVybHBhcnNlICggT28wTzBPT09vbyApIC4gbmV0bG9jCiAgIGlmIElJSTFJMTFpMWlJaSA9PSAnJyA6CiAgICBvMElpaWlJMTExSSAuIGFwcGVuZCAoIG5hbWUgKQogICBlbHNlIDoKICAgIG8wSWlpaUkxMTFJIC4gYXBwZW5kICggSUlJMUkxMWkxaUlpICkKICBvME9PMDAgPSB4Ym1jZ3VpIC4gRGlhbG9nICggKQogIG9PMDBvMCA9IG8wT08wMCAuIHNlbGVjdCAoICdDaG9vc2UgYSB2aWRlbyBzb3VyY2UnICwgbzBJaWlpSTExMUkgKQogIGlmIG9PMDBvMCA+PSAwIDoKICAgaWYgIiZtb2RlPTE5IiBpbiBtdV9wbGF5bGlzdCBbIG9PMDBvMCBdIDoKICAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIE9vME8wICggbXVfcGxheWxpc3QgWyBvTzAwbzAgXSAuIHJlcGxhY2UgKCAnJm1vZGU9MTknICwgJycgKSApICkKICAgZWxpZiAiJGRvcmVnZXgiIGluIG11X3BsYXlsaXN0IFsgb08wMG8wIF0gOgogICAgaWYgNjkgLSA2OTogSUlpSTFJMTFpMTEgKiBpMTFpICogSUkgLiBPMG9vME9PMCAtIG8wT09PCiAgICBJMTFpaUlJaUkxaWkgPSBtdV9wbGF5bGlzdCBbIG9PMDBvMCBdIC4gc3BsaXQgKCAnJnJlZ2V4cz0nICkKICAgIGlmIDEyIC0gMTI6IEkxaTFpSTFpICUgaTExaUlpaUlpaSArIElpSWkxMWlJSWkxSWkgKyBJMWkxaUkxaSAvIGlpaTFJMUkKICAgIGlpMWlpMTFJSUlpaUkgLCBvT29PMCA9IG9vT2lpICggSTExaWlJSWlJMWlpIFsgMSBdICwgSTExaWlJSWlJMWlpIFsgMCBdICkKICAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIGlpMWlpMTFJSUlpaUkgKQogICBlbHNlIDoKICAgIGlpMWlpMTFJSUlpaUkgPSBtdV9wbGF5bGlzdCBbIG9PMDBvMCBdCiAgICB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCBpaTFpaTExSUlJaWlJICkKIGVsc2UgOgogIGkxMWlpMWlpMTFpID0geGJtYyAuIFBsYXlMaXN0ICggMSApCiAgaTExaWkxaWkxMWkgLiBjbGVhciAoICkKICBpaUlpSUlJaWlJID0gMAogIGZvciBPbzBPME9PT29vIGluIG11X3BsYXlsaXN0IDoKICAgaWlJaUlJSWlpSSArPSAxCiAgIE8wMCA9IHhibWNndWkgLiBMaXN0SXRlbSAoICclcykgJXMnICUgKCBzdHIgKCBpaUlpSUlJaWlJICkgLCBuYW1lICkgKQogICBpMTFpaTFpaTExaSAuIGFkZCAoIE9vME8wT09Pb28gLCBPMDAgKQogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAncGxheWxpc3QucGxheW9mZnNldCh2aWRlbywwKScgKQogICBpZiA5NCAtIDk0OiBpaWkxSTFJIC4gaWlpMUkxSSArIGkxMWlJaWlJaWkgLSBJaTFJICogbzBPT08KICAgaWYgOSAtIDk6IElpSWkxMWlJSWkxSWkgLiBvT29vT29PME9vME8gLSBvME9PTwpkZWYgSWlpaUkgKCBuYW1lICwgdXJsICkgOgogaWYgaTExIC4gZ2V0U2V0dGluZyAoICdzYXZlX2xvY2F0aW9uJyApID09ICIiIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oJ1BhdWxzIFdvcmxkJywnQ2hvb3NlIGEgbG9jYXRpb24gdG8gc2F2ZSBmaWxlcy4nLDE1MDAwLCIgKyBJMUlpSWlpSUlJICsgIikiICkKICBpMTEgLiBvcGVuU2V0dGluZ3MgKCApCiBvTzAwMG8gPSB7ICd1cmwnIDogdXJsICwgJ2Rvd25sb2FkX3BhdGgnIDogaTExIC4gZ2V0U2V0dGluZyAoICdzYXZlX2xvY2F0aW9uJyApIH0KIGRvd25sb2FkZXIgLiBkb3dubG9hZCAoIG5hbWUgLCBvTzAwMG8gKQogbzBPTzAwID0geGJtY2d1aSAuIERpYWxvZyAoICkKIElpSUlJMWkxaSA9IG8wT08wMCAuIHllc25vICggJ1BhdWxzIFdvcmxkJyAsICdEbyB5b3Ugd2FudCB0byBhZGQgdGhpcyBmaWxlIGFzIGEgc291cmNlPycgKQogaWYgSWlJSUkxaTFpIDoKICBPMG9vME9PMG9PT09vICggb3MgLiBwYXRoIC4gam9pbiAoIGkxMSAuIGdldFNldHRpbmcgKCAnc2F2ZV9sb2NhdGlvbicgKSAsIG5hbWUgKSApCiAgaWYgMTIgLSAxMjogaTExaQogIGlmIDIgLSAyOiBpMUlJaSAtIG9Pb29Pb08wT28wTyArIGlpaTFJMUkgLiBpMTFpCmRlZiBvbzBvb29vb08wICggbmFtZSAsIHVybCAsIG1vZGUgLCBpY29uaW1hZ2UgLCBmYW5hcnQgLCBkZXNjcmlwdGlvbiAsIGdlbnJlICwgZGF0ZSAsIGNyZWRpdHMgLCBzaG93Y29udGV4dCA9IEZhbHNlICkgOgogaWYgMjUgLSAyNTogaWlpaUlpMTFpCiBpSTEgPSBzeXMgLiBhcmd2IFsgMCBdICsgIj91cmw9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSArICImbW9kZT0iICsgc3RyICggbW9kZSApICsgIiZuYW1lPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICsgIiZmYW5hcnQ9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKQogaTFpSSA9IFRydWUKIGlmIGRhdGUgPT0gJycgOgogIGRhdGUgPSBOb25lCiBlbHNlIDoKICBkZXNjcmlwdGlvbiArPSAnXG5cbkRhdGU6ICVzJyAlIGRhdGUKIG9PbzAgPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBuYW1lICwgaWNvbkltYWdlID0gIkRlZmF1bHRGb2xkZXIucG5nIiAsIHRodW1ibmFpbEltYWdlID0gaWNvbmltYWdlICkKIG9PbzAgLiBzZXRJbmZvICggdHlwZSA9ICJWaWRlbyIgLCBpbmZvTGFiZWxzID0geyAiVGl0bGUiIDogbmFtZSAsICJQbG90IiA6IGRlc2NyaXB0aW9uICwgIkdlbnJlIiA6IGdlbnJlICwgImRhdGVhZGRlZCIgOiBkYXRlICwgImNyZWRpdHMiIDogY3JlZGl0cyB9ICkKIG9PbzAgLiBzZXRQcm9wZXJ0eSAoICJGYW5hcnRfSW1hZ2UiICwgZmFuYXJ0ICkKIGlmIHNob3djb250ZXh0IDoKICBpaUlJMTFJID0gWyBdCiAgaWYgc2hvd2NvbnRleHQgPT0gJ3NvdXJjZScgOgogICBpZiBuYW1lIGluIHN0ciAoIE9vb08wT08gKSA6CiAgICBpaUlJMTFJIC4gYXBwZW5kICggKCAnUmVtb3ZlIGZyb20gU291cmNlcycgLCAnWEJNQy5SdW5QbHVnaW4oJXM/bW9kZT04Jm5hbWU9JXMpJyAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKICBlbGlmIHNob3djb250ZXh0ID09ICdkb3dubG9hZCcgOgogICBpaUlJMTFJIC4gYXBwZW5kICggKCAnRG93bmxvYWQnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTkmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKICBlbGlmIHNob3djb250ZXh0ID09ICdmYXYnIDoKICAgaWlJSTExSSAuIGFwcGVuZCAoICggJ1JlbW92ZSBmcm9tIFBhdWxzIFdvcmxkIEZhdm9yaXRlcycgLCAnWEJNQy5SdW5QbHVnaW4oJXM/bW9kZT02Jm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiAgIGlmIDMyIC0gMzI6IElpMUkgJSBJSSAtIG9vMDAwICUgTzBvbzBPTzAgLiBJMWkxaUkxaQogIGlmIG5vdCBuYW1lIGluIEkxSTExSTFJMUkgOgogICBpaUlJMTFJIC4gYXBwZW5kICggKCAnQWRkIHRvIFBhdWxzIFdvcmxkIEZhdm9yaXRlcycgLCAnWEJNQy5SdW5QbHVnaW4oJXM/bW9kZT01Jm5hbWU9JXMmdXJsPSVzJmljb25pbWFnZT0lcyZmYW5hcnQ9JXMmZmF2X21vZGU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIGljb25pbWFnZSApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIGZhbmFydCApICwgbW9kZSApICkgKQogIG9PbzAgLiBhZGRDb250ZXh0TWVudUl0ZW1zICggaWlJSTExSSApCiBpMWlJID0geGJtY3BsdWdpbiAuIGFkZERpcmVjdG9yeUl0ZW0gKCBoYW5kbGUgPSBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB1cmwgPSBpSTEgLCBsaXN0aXRlbSA9IG9PbzAgLCBpc0ZvbGRlciA9IFRydWUgKQogaWYgNDcgLSA0NzogaWlpMUkxSSAlIGkxSUlpICsgaTFJSWkKIHJldHVybiBpMWlJCmRlZiBPTzBPMDBPb09PT28gKCB1cmwgLCB0aXRsZSAsIG1lZGlhX3R5cGUgPSAndmlkZW8nICkgOgogaW1wb3J0IHlvdXR1YmVkbAogaWYgbm90IHVybCA9PSAnJyA6CiAgaWYgbWVkaWFfdHlwZSA9PSAnYXVkaW8nIDoKICAgeW91dHViZWRsIC4gc2luZ2xlX1lEICggdXJsICwgZG93bmxvYWQgPSBUcnVlICwgYXVkaW8gPSBUcnVlICkKICBlbHNlIDoKICAgeW91dHViZWRsIC4gc2luZ2xlX1lEICggdXJsICwgZG93bmxvYWQgPSBUcnVlICkKIGVsaWYgeGJtYyAuIFBsYXllciAoICkgLiBpc1BsYXlpbmcgKCApID09IFRydWUgOgogIGltcG9ydCBZRFN0cmVhbUV4dHJhY3RvcgogIGlmIFlEU3RyZWFtRXh0cmFjdG9yIC4gaXNEb3dubG9hZGluZyAoICkgPT0gVHJ1ZSA6CiAgIGlmIDc3IC0gNzc6IGlJaWkxSTExSTFJSTEgLiBPMDBvT29Pb08wbzBPICUgaWlpaUlpMTFpIC8gTzAwb09vT29PMG8wTwogICBZRFN0cmVhbUV4dHJhY3RvciAuIG1hbmFnZURvd25sb2FkcyAoICkKICBlbHNlIDoKICAgb09PME9PID0geGJtYyAuIFBsYXllciAoICkgLiBnZXRQbGF5aW5nRmlsZSAoICkKICAgaWYgODIgLSA4MjogTzBPICUgSWlJaTExaUlJaTFJaSAlIElpMUkgLyBPMAogICBvT08wT08gPSBvT08wT08gLiBzcGxpdCAoICd8VXNlci1BZ2VudD0nICkgWyAwIF0KICAgTzAwID0geyAndXJsJyA6IG9PTzBPTyAsICd0aXRsZScgOiB0aXRsZSAsICdtZWRpYV90eXBlJyA6IG1lZGlhX3R5cGUgfQogICB5b3V0dWJlZGwgLiBzaW5nbGVfWUQgKCAnJyAsIGRvd25sb2FkID0gVHJ1ZSAsIGRsX2luZm8gPSBPMDAgKQogZWxzZSA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKERPV05MT0FELEZpcnN0IFBsYXkgW0NPTE9SIHllbGxvd11XSElMRSBwbGF5aW5nIGRvd25sb2FkWy9DT0xPUl0gLDEwMDAwKSIgKQogIGlmIDk0IC0gOTQ6IG8wT09PICsgbzBPT08gKyBPb29vb29vb09PICUgSUkKZGVmIGkxSUlJaTExMUlpICggc2l0ZV9uYW1lICwgc2VhcmNoX3Rlcm0gPSBOb25lICkgOgogSTFJaWlJID0gJycKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG9vMG8wTzAwICkgPT0gRmFsc2Ugb3IgaTExIC4gZ2V0U2V0dGluZyAoICdjbGVhcnNlYWNoaGlzdG9yeScgKSA9PSAndHJ1ZScgOgogIGlpICggb28wbzBPMDAgLCAnJyApCiAgaTExIC4gc2V0U2V0dGluZyAoICJjbGVhcnNlYWNoaGlzdG9yeSIgLCAiZmFsc2UiICkKIGlmIHNpdGVfbmFtZSA9PSAnaGlzdG9yeScgOgogIE9vbzAwbzBPb29vID0gSTExb28wb29PTyAoIG9vMG8wTzAwICkKICBPbzBPMDBPbzBvMCA9IHJlIC4gY29tcGlsZSAoICcoLis/KTooLio/KSg/OlxyfFxuKScgKSAuIGZpbmRhbGwgKCBPb28wMG8wT29vbyApCiAgaWYgMTUgLSAxNTogSWlJaTExaUlJaTFJaQogIGZvciBPMDBPMG9PTzAwTzAwICwgc2VhcmNoX3Rlcm0gaW4gT28wTzAwT28wbzAgOgogICBpZiAncGx1Z2luOi8vJyBpbiBzZWFyY2hfdGVybSA6CiAgICBpMWkgKCBzZWFyY2hfdGVybSAsIE8wME8wb09PMDBPMDAgLCBJMUlpaUkgLCAnJyAsICcnICwgJycgLCAnJyAsICcnICwgTm9uZSAsICcnICwgdG90YWwgPSBpbnQgKCBsZW4gKCBPbzBPMDBPbzBvMCApICkgKQogICBlbHNlIDoKICAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwICsgJzonICsgc2VhcmNoX3Rlcm0gLCBPMDBPMG9PTzAwTzAwICwgMjYgLCBJMUlpSWlpSUlJICwgaUkxMSAsICcnICwgJycgLCAnJyAsICcnICkKIGlmIG5vdCBzZWFyY2hfdGVybSA6CiAgTzBvMCA9IHhibWMgLiBLZXlib2FyZCAoICcnICwgJ0VudGVyIFNlYXJjaCBUZXJtJyApCiAgTzBvMCAuIGRvTW9kYWwgKCApCiAgaWYgKCBPMG8wIC4gaXNDb25maXJtZWQgKCApID09IEZhbHNlICkgOgogICByZXR1cm4KICBzZWFyY2hfdGVybSA9IE8wbzAgLiBnZXRUZXh0ICggKQogIGlmIGxlbiAoIHNlYXJjaF90ZXJtICkgPT0gMCA6CiAgIHJldHVybgogc2VhcmNoX3Rlcm0gPSBzZWFyY2hfdGVybSAuIHJlcGxhY2UgKCAnICcgLCAnKycgKQogc2VhcmNoX3Rlcm0gPSBzZWFyY2hfdGVybSAuIGVuY29kZSAoICd1dGYtOCcgKQogaWYgJ3lvdXR1YmUnIGluIHNpdGVfbmFtZSA6CiAgaW1wb3J0IF95dHBsaXN0CiAgaWYgMzkgLSAzOTogSWkxSSAvIG8wT09PIC8gb09vb09vTzBPbzBPICogSTFpMWlJMWkKICBJaWkxSWkgPSB7IH0KICBJaWkxSWkgPSBfeXRwbGlzdCAuIFlvVVR1YmUgKCAnc2VhcmNoWVQnICwgeW91dHViZSA9IHNlYXJjaF90ZXJtICwgbWF4X3BhZ2UgPSA0ICwgbm9zYXZlID0gJ25vc2F2ZScgKQogIE9Pb29vb08wT28gPSBsZW4gKCBJaWkxSWkgKQogIGZvciBpaUlpSUlJaWlJIGluIElpaTFJaSA6CiAgIHRyeSA6CiAgICBPMDBPMG9PTzAwTzAwID0gSWlpMUlpIFsgaWlJaUlJSWlpSSBdIFsgJ3RpdGxlJyBdCiAgICBpSSA9IElpaTFJaSBbIGlpSWlJSUlpaUkgXSBbICdkYXRlJyBdCiAgICB0cnkgOgogICAgIGlpMTFJMTFpID0gSWlpMUlpIFsgaWlJaUlJSWlpSSBdIFsgJ2Rlc2MnIF0KICAgIGV4Y2VwdCBFeGNlcHRpb24gOgogICAgIGlpMTFJMTFpID0gJ1VOQVZBSUFCTEUnCiAgICAgaWYgNzEgLSA3MTogSUlpSTFJMTFpMTEgLyBJaUlpMTFpSUlpMUlpICsgSWkxSQogICAgaWkxaWkxMUlJSWlpSSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS9wbGF5Lz92aWRlb19pZD0nICsgSWlpMUlpIFsgaWlJaUlJSWlpSSBdIFsgJ3VybCcgXQogICAgSTFJaWlJID0gJ2h0dHA6Ly9pbWcueW91dHViZS5jb20vdmkvJyArIElpaTFJaSBbIGlpSWlJSUlpaUkgXSBbICd1cmwnIF0gKyAnLzAuanBnJwogICAgaTFpICggaWkxaWkxMUlJSWlpSSAsIE8wME8wb09PMDBPMDAgLCBJMUlpaUkgLCAnJyAsICcnICwgJycgLCAnJyAsICcnICwgTm9uZSAsICcnICwgT09vb29vTzBPbyApCiAgIGV4Y2VwdCBFeGNlcHRpb24gOgogICAgT08gKCAnVGhpcyBpdGVtIGlzIGlnbm9yZWQ6OicgKQogIGkxMWkxMSA9IHNpdGVfbmFtZSArICc6JyArIHNlYXJjaF90ZXJtICsgJ1xuJwogIGlpICggb3MgLiBwYXRoIC4gam9pbiAoIE9vMG8wMDAwbzBvMCAsICdoaXN0b3J5JyApICwgaTExaTExICwgYXBwZW5kID0gVHJ1ZSApCiBlbGlmICdkbW90aW9uJyBpbiBzaXRlX25hbWUgOgogIGkxaWlJSUkxSUlpSUlJSSA9ICJodHRwczovL2FwaS5kYWlseW1vdGlvbi5jb20iCiAgaW1wb3J0IF9ETXNlYXJjaAogIEkxaUlJSUkxID0gc3RyICggaTExIC4gZ2V0U2V0dGluZyAoICdmYW1pbHlGaWx0ZXInICkgKQogIF9ETXNlYXJjaCAuIGxpc3RWaWRlb3MgKCBpMWlpSUlJMUlJaUlJSUkgKyAiL3ZpZGVvcz9maWVsZHM9ZGVzY3JpcHRpb24sZHVyYXRpb24saWQsb3duZXIudXNlcm5hbWUsdGFrZW5fdGltZSx0aHVtYm5haWxfbGFyZ2VfdXJsLHRpdGxlLHZpZXdzX3RvdGFsJnNlYXJjaD0iICsgc2VhcmNoX3Rlcm0gKyAiJnNvcnQ9cmVsZXZhbmNlJmxpbWl0PTEwMCZmYW1pbHlfZmlsdGVyPSIgKyBJMWlJSUlJMSArICImbG9jYWxpemF0aW9uPWVuX0VOJnBhZ2U9MSIgKQogIGlmIDU3IC0gNTc6IG9vMDAwIC4gaUlpaTFJMTFJMUlJMSAlIElJICUgTzAwb09vT29PMG8wTyAqIG9vMDAwCiAgaTExaTExID0gc2l0ZV9uYW1lICsgJzonICsgc2VhcmNoX3Rlcm0gKyAnXG4nCiAgaWkgKCBvcyAuIHBhdGggLiBqb2luICggT28wbzAwMDBvMG8wICwgJ2hpc3RvcnknICkgLCBpMTFpMTEgLCBhcHBlbmQgPSBUcnVlICkKIGVsaWYgJ0lNREJpZHBsYXknIGluIHNpdGVfbmFtZSA6CiAgaTFpaUlJSTFJSWlJSUlJID0gImh0dHA6Ly93d3cub21kYmFwaS5jb20vP3Q9IgogIGlpMWlpMTFJSUlpaUkgPSBpMWlpSUlJMUlJaUlJSUkgKyBzZWFyY2hfdGVybQogIGlmIDggLSA4OiBvbzAwMCAuIElJICUgaWlpaUlpMTFpIC4gb09vb09vTzBPbzBPICUgb09vb09vTzBPbzBPIC4gTzAwb09vT29PMG8wTwogIG9vT08wMG9PbyA9IGRpY3QgKCBoZWFkZXJzID0geyAnVXNlci1hZ2VudCcgOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xOyBXT1c2NDsgcnY6MTkuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xOS4wJyAsICdSZWZlcmVyJyA6ICdodHRwOi8vam9rZXIub3JnLycgLCAnQWNjZXB0LUVuY29kaW5nJyA6ICdnemlwLCBkZWZsYXRlJyAsICdDb250ZW50LVR5cGUnIDogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcgLCAnQWNjZXB0JyA6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonIH0gKQogIGlmIDQ3IC0gNDc6IGlpaTFJMUkgKyBJSSArIGkxMWkgJSBpMTFpSWlpSWlpCiAgb29PID0gcmVxdWVzdHMgLiBnZXQgKCBpaTFpaTExSUlJaWlJICwgaGVhZGVycyA9IG9vT08wMG9PbyApCiAgaWkxSSA9IG9vTyAuIGpzb24gKCApCiAgT09vT29vMDBPbyA9IGlpMUkgWyAnUmVzcG9uc2UnIF0KICBpZiBPT29Pb28wME9vID09ICdUcnVlJyA6CiAgIElpaWkxaWlpSWlJMSA9IGlpMUkgWyAnaW1kYklEJyBdCiAgIE8wME8wb09PMDBPMDAgPSBpaTFJIFsgJ1RpdGxlJyBdICsgaWkxSSBbICdSZWxlYXNlZCcgXQogICBvME9PMDAgPSB4Ym1jZ3VpIC4gRGlhbG9nICggKQogICBJaUlJSTFpMWkgPSBvME9PMDAgLiB5ZXNubyAoICdDaGVjayBNb3ZpZSBUaXRsZScgLCAnUExBWSA6OiAlcyA/JyAlIE8wME8wb09PMDBPMDAgKQogICBpZiBJaUlJSTFpMWkgOgogICAgaWkxaWkxMUlJSWlpSSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ucHVsc2FyL21vdmllLycgKyBJaWlpMWlpaUlpSTEgKyAnL3BsYXknCiAgICBpMTFpMTEgPSBPMDBPMG9PTzAwTzAwICsgJzonICsgaWkxaWkxMUlJSWlpSSArICdcbicKICAgIGlpICggb28wbzBPMDAgLCBpMTFpMTEgLCBhcHBlbmQgPSBUcnVlICkKICAgIHJldHVybiBpaTFpaTExSUlJaWlJCiAgZWxzZSA6CiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihQYXVscyBXb3JsZCxObyBJTURCIG1hdGNoIGZvdW5kICw3MDAwLCIgKyBJMUlpSWlpSUlJICsgIikiICkKICAgaWYgMjcgLSAyNzogTzAwb09vT29PMG8wTyArIG9Pb29Pb08wT28wTyAqIGlJaWkxSTExSTFJSTEgLiBPb29vb29vb09PICogb28wMDAKZGVmIE9PT28gKCBzdHJpbmcgKSA6CiBpZiBpc2luc3RhbmNlICggc3RyaW5nICwgYmFzZXN0cmluZyApIDoKICBpZiBpc2luc3RhbmNlICggc3RyaW5nICwgdW5pY29kZSApIDoKICAgc3RyaW5nID0gc3RyaW5nIC4gZW5jb2RlICggJ2FzY2lpJyAsICdpZ25vcmUnICkKIHJldHVybiBzdHJpbmcKZGVmIG8wb29PbzAwTyAoIHN0cmluZyAsIGVuY29kaW5nID0gJ3V0Zi04JyApIDoKIGlmIGlzaW5zdGFuY2UgKCBzdHJpbmcgLCBiYXNlc3RyaW5nICkgOgogIGlmIG5vdCBpc2luc3RhbmNlICggc3RyaW5nICwgdW5pY29kZSApIDoKICAgc3RyaW5nID0gdW5pY29kZSAoIHN0cmluZyAsIGVuY29kaW5nICwgJ2lnbm9yZScgKQogcmV0dXJuIHN0cmluZwpkZWYgSWkxaTFJMSAoIHMgKSA6IHJldHVybiAiIiAuIGpvaW4gKCBmaWx0ZXIgKCBsYW1iZGEgTzBPMDBPb29PIDogb3JkICggTzBPMDBPb29PICkgPCAxMjggLCBzICkgKQppZiA0MCAtIDQwOiBpaWkxSTFJICUgT29vb29vb29PTyAtIElpMUkgKyBJaUlpMTFpSUlpMUlpIC8gSWkxSQpkZWYgb29PaWlpMSAoIGNvbW1hbmQgKSA6CiBpaTFJID0gJycKIHRyeSA6CiAgaWkxSSA9IHhibWMgLiBleGVjdXRlSlNPTlJQQyAoIG8wb29PbzAwTyAoIGNvbW1hbmQgKSApCiBleGNlcHQgVW5pY29kZUVuY29kZUVycm9yIDoKICBpaTFJID0geGJtYyAuIGV4ZWN1dGVKU09OUlBDICggT09PbyAoIGNvbW1hbmQgKSApCiAgaWYgNjYgLSA2NjogaWlpaUlpMTFpICogaUlpaTFJMTFJMUlJMSAlIGlJaWkxSTExSTFJSTEgKiBPbzBvb08wb28wb08gLSBJSSAtIE9vMG9vTzBvbzBvTwogcmV0dXJuIG8wb29PbzAwTyAoIGlpMUkgKQogaWYgNzAgLSA3MDogSTFpMWlJMWkgKyBpaWlpSWkxMWkKZGVmIG9vTzBvT09vb09vMCAoICkgOgogbzAwb29vMCA9IHhibWMgLiBnZXRTa2luRGlyICggKQogaWYgbzAwb29vMCA9PSAnc2tpbi5jb25mbHVlbmNlJyA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ0NvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDApJyApCiBlbGlmIG8wMG9vbzAgPT0gJ3NraW4uYWVvbi5ub3gnIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAnQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxMSknICkKIGVsc2UgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICdDb250YWluZXIuU2V0Vmlld01vZGUoNTAwKScgKQogIGlmIDM5IC0gMzk6IElJIC4gaTExaQogIGlmIDQ1IC0gNDU6IGlpaWlJaTExaSAqIG9vMDAwIC8gaUlpaTFJMTFJMUlJMQpkZWYgbzAwb29Pb08wICggdXJsICkgOgogSUlpMTFJSTFJSTExMSA9IG8wb29PbzAwTyAoICd7Impzb25ycGMiOiIyLjAiLCJtZXRob2QiOiJGaWxlcy5HZXREaXJlY3RvcnkiLCJwYXJhbXMiOnsiZGlyZWN0b3J5IjoiJXMiLCJtZWRpYSI6InZpZGVvIiwicHJvcGVydGllcyI6WyJ0aHVtYm5haWwiLCJ0aXRsZSIsInllYXIiLCJkYXRlYWRkZWQiLCJmYW5hcnQiLCJyYXRpbmciLCJzZWFzb24iLCJlcGlzb2RlIiwic3R1ZGlvIl19LCJpZCI6MX0nICkgJSB1cmwKIGlmIDU1IC0gNTU6IElJCiBvME8wT08wbyA9IGpzb24gLiBsb2FkcyAoIG9vT2lpaTEgKCBJSWkxMUlJMUlJMTExICkgKQogZm9yIE9vME8wT09Pb28gaW4gbzBPME9PMG8gWyAncmVzdWx0JyBdIFsgJ2ZpbGVzJyBdIDoKICB1cmwgPSBPbzBPME9PT29vIFsgJ2ZpbGUnIF0KICBPMDBPMG9PTzAwTzAwID0gSWkxaTFJMSAoIE9vME8wT09Pb28gWyAnbGFiZWwnIF0gKQogIEkxSWlpSSA9IElpMWkxSTEgKCBPbzBPME9PT29vIFsgJ3RodW1ibmFpbCcgXSApCiAgdHJ5IDoKICAgb09PMDBvT08gPSBJaTFpMUkxICggT28wTzBPT09vbyBbICdmYW5hcnQnIF0gKQogIGV4Y2VwdCBFeGNlcHRpb24gOgogICBvT08wMG9PTyA9ICcnCiAgdHJ5IDoKICAgaUkgPSBPbzBPME9PT29vIFsgJ3llYXInIF0KICBleGNlcHQgRXhjZXB0aW9uIDoKICAgaUkgPSAnJwogIHRyeSA6CiAgIE9PT29PbyA9IE9vME8wT09Pb28gWyAnZXBpc29kZScgXQogICBPT29PMG9vME8gPSBPbzBPME9PT29vIFsgJ3NlYXNvbicgXQogICBpZiBPT09vT28gPT0gLSAxIG9yIE9Pb08wb28wTyA9PSAtIDEgOgogICAgaWkxMUkxMWkgPSAnJwogICBlbHNlIDoKICAgIGlpMTFJMTFpID0gJ1tDT0xPUiB5ZWxsb3ddIFMnICsgc3RyICggT09vTzBvbzBPICkgKyAnWy9DT0xPUl1bQ09MT1IgaG90cGlua10gRScgKyBzdHIgKCBPT09vT28gKSArICdbL0NPTE9SXScKICBleGNlcHQgRXhjZXB0aW9uIDoKICAgaWkxMUkxMWkgPSAnJwogIHRyeSA6CiAgIGlpSTFJMWlpID0gT28wTzBPT09vbyBbICdzdHVkaW8nIF0KICAgaWYgaWlJMUkxaWkgOgogICAgaWkxMUkxMWkgKz0gJ1xuIFN0dWRpbzpbQ09MT1Igc3RlZWxibHVlXSAnICsgaWlJMUkxaWkgWyAwIF0gKyAnWy9DT0xPUl0nCiAgZXhjZXB0IEV4Y2VwdGlvbiA6CiAgIGlpSTFJMWlpID0gJycKICAgaWYgNzkgLSA3OTogaUlpaTFJMTFJMUlJMQogIGlmIE9vME8wT09Pb28gWyAnZmlsZXR5cGUnIF0gPT0gJ2ZpbGUnIDoKICAgaTFpICggdXJsICwgTzAwTzBvT08wME8wMCAsIEkxSWlpSSAsIG9PTzAwb09PICwgaWkxMUkxMWkgLCAnJyAsIGlJICwgJycgLCBOb25lICwgJycgLCB0b3RhbCA9IGxlbiAoIG8wTzBPTzBvIFsgJ3Jlc3VsdCcgXSBbICdmaWxlcycgXSApICkKICAgaWYgODEgLSA4MTogSWkxSSArIGlJaWkxSTExSTFJSTEgKiBJMWkxaUkxaSAtIGlJaWkxSTExSTFJSTEgLiBJaTFJCiAgZWxzZSA6CiAgIG9vMG9vb29vTzAgKCBPMDBPMG9PTzAwTzAwICwgdXJsICwgNTMgLCBJMUlpaUkgLCBvT08wMG9PTyAsIGlpMTFJMTFpICwgJycgLCBpSSAsICcnICkKICAgaWYgNDggLSA0ODogaWlpMUkxSSAuIE9vb29vb29vT08gLiBvT29vT29PME9vME8gLiBvbzAwMCAlIG8wT09PIC8gTzBvbzBPTzAKZGVmIGkxaSAoIHVybCAsIG5hbWUgLCBpY29uaW1hZ2UgLCBmYW5hcnQgLCBkZXNjcmlwdGlvbiAsIGdlbnJlICwgZGF0ZSAsIHNob3djb250ZXh0ICwgcGxheWxpc3QgLCByZWdleHMgLCB0b3RhbCAsIHNldENvb2tpZSA9ICIiICkgOgogaWlJSTExSSA9IFsgXQogdHJ5IDoKICBuYW1lID0gbmFtZSAuIGVuY29kZSAoICd1dGYtOCcgKQogZXhjZXB0IDogcGFzcwogaTFpSSA9IFRydWUKIGlmIDExIC0gMTE6IGkxSUlpICUgTzBPICUgTzBvbzBPTzAKIGlmIHJlZ2V4cyA6CiAgTzBPbzAgPSAnMTcnCiAgaWYgODAgLSA4MDogb09vb09vTzBPbzBPIC0gaUlpaTFJMTFJMUlJMSAuIElpMUkgKyBPME8gLSBJMWkxaUkxaQogIGlpSUkxMUkgLiBhcHBlbmQgKCAoICdbQ09MT1Igd2hpdGVdISFEb3dubG9hZCBDdXJyZW50bHkgUGxheWluZyEhWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTIxJm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiBlbGlmIGFueSAoIHggaW4gdXJsIGZvciB4IGluIElpaUlJSTExMWlJICkgYW5kIHVybCAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgTzBPbzAgPSAnMTknCiAgaWYgNSAtIDU6IE8wb28wT08wCiAgaWlJSTExSSAuIGFwcGVuZCAoICggJ1tDT0xPUiB3aGl0ZV0hIURvd25sb2FkIEN1cnJlbnRseSBQbGF5aW5nISFbL0NPTE9SXScgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9MjEmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKIGVsaWYgdXJsIC4gZW5kc3dpdGggKCAnJm1vZGU9MTgnICkgOgogIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJm1vZGU9MTgnICwgJycgKQogIE8wT28wID0gJzE4JwogIGlmIDYyIC0gNjI6IG9vMDAwIC4gT29vb29vb29PTyAuIElpMUkgLiBPME8gKiBPMG9vME9PMAogIGlpSUkxMUkgLiBhcHBlbmQgKCAoICdbQ09MT1Igd2hpdGVdISFEb3dubG9hZCEhWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTIzJm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiAgaWYgaTExIC4gZ2V0U2V0dGluZyAoICdkbGF1ZGlvb25seScgKSA9PSAndHJ1ZScgOgogICBpaUlJMTFJIC4gYXBwZW5kICggKCAnISFEb3dubG9hZCBbQ09MT1Igc2VhYmx1ZV1BdWRpbyEhWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTI0Jm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiBlbGlmIHVybCAuIHN0YXJ0c3dpdGggKCAnbWFnbmV0Oj94dD0nICkgb3IgJy50b3JyZW50JyBpbiB1cmwgOgogIGlmIDc4IC0gNzg6IGlpaWlJaTExaSAvIE8wTyAtIGlpaWlJaTExaSAqIE9vb29vb29vT08gLiBvbzAwMAogIGlmICcmJyBpbiB1cmwgYW5kIG5vdCAnJmFtcDsnIGluIHVybCA6CiAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJicgLCAnJmFtcDsnICkKICB1cmwgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnB1bHNhci9wbGF5P3VyaT0nICsgdXJsCiAgTzBPbzAgPSAnMTInCiAgaWYgOTYgLSA5Njogb09vb09vTzBPbzBPICUgaTFJSWkgLiBJaUlpMTFpSUlpMUlpIC4gTzAKIGVsc2UgOgogIE8wT28wID0gJzEyJwogIGlmIDM3IC0gMzc6IGkxSUlpIC0gSWkxSSAlIE9vb29vb29vT08gLyBJaTFJICUgSUkKICBpaUlJMTFJIC4gYXBwZW5kICggKCAnW0NPTE9SIHdoaXRlXSEhRG93bmxvYWQgQ3VycmVudGx5IFBsYXlpbmchIVsvQ09MT1JdJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT0yMSZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogaUkxID0gc3lzIC4gYXJndiBbIDAgXSArICI/IgogaWlJaUlJMTFpMSA9IEZhbHNlCiBpZiA5MyAtIDkzOiBvbzAwMCAlIGlJaWkxSTExSTFJSTEKIGlmIHBsYXlsaXN0IDoKICBpZiBpMTEgLiBnZXRTZXR0aW5nICggJ2FkZF9wbGF5bGlzdCcgKSA9PSAiZmFsc2UiIDoKICAgaUkxICs9ICJ1cmw9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSArICImbW9kZT0iICsgTzBPbzAKICBlbHNlIDoKICAgaUkxICs9ICJtb2RlPTEzJm5hbWU9JXMmcGxheWxpc3Q9JXMiICUgKCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHN0ciAoIHBsYXlsaXN0ICkgLiByZXBsYWNlICggJywnICwgJ3x8JyApICkgKQogICBuYW1lID0gbmFtZSArICdbQ09MT1IgbWFnZW50YV0gKCcgKyBzdHIgKCBsZW4gKCBwbGF5bGlzdCApICkgKyAnIGl0ZW1zIClbL0NPTE9SXScKICAgaWlJaUlJMTFpMSA9IFRydWUKIGVsc2UgOgogIGlJMSArPSAidXJsPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgKyAiJm1vZGU9IiArIE8wT28wCiBpZiByZWdleHMgOgogIGlJMSArPSAiJnJlZ2V4cz0iICsgcmVnZXhzCiBpZiBub3Qgc2V0Q29va2llID09ICcnIDoKICBpSTEgKz0gIiZzZXRDb29raWU9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBzZXRDb29raWUgKQogIGlmIDkwIC0gOTA6IG9Pb29Pb08wT28wTyAtIElpMUkgLyBPMDBvT29Pb08wbzBPIC8gTzAgLyBpaWkxSTFJCiBpZiBkYXRlID09ICcnIDoKICBkYXRlID0gTm9uZQogZWxzZSA6CiAgZGVzY3JpcHRpb24gKz0gJ1xuXG5EYXRlOiAlcycgJSBkYXRlCiBvT28wID0geGJtY2d1aSAuIExpc3RJdGVtICggbmFtZSAsIGljb25JbWFnZSA9ICJEZWZhdWx0VmlkZW8ucG5nIiAsIHRodW1ibmFpbEltYWdlID0gaWNvbmltYWdlICkKIG9PbzAgLiBzZXRJbmZvICggdHlwZSA9ICJWaWRlbyIgLCBpbmZvTGFiZWxzID0geyAiVGl0bGUiIDogbmFtZSAsICJQbG90IiA6IGRlc2NyaXB0aW9uICwgIkdlbnJlIiA6IGdlbnJlICwgImRhdGVhZGRlZCIgOiBkYXRlIH0gKQogb09vMCAuIHNldFByb3BlcnR5ICggIkZhbmFydF9JbWFnZSIgLCBmYW5hcnQgKQogaWYgODcgLSA4Nzogb28wMDAgLyBPbzBvb08wb28wb08gKyBpSWlpMUkxMUkxSUkxCiBpZiAoIG5vdCBpaUlpSUkxMWkxICkgYW5kIG5vdCBhbnkgKCB4IGluIHVybCBmb3IgeCBpbiBPbyApIDoKICBpZiByZWdleHMgOgogICBpZiAnJHB5RnVuY3Rpb246cGxheW1lZGlhKCcgbm90IGluIHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIHJlZ2V4cyApIGFuZCAnbm90cGxheWFibGUnIG5vdCBpbiB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCByZWdleHMgKSA6CiAgICBvT28wIC4gc2V0UHJvcGVydHkgKCAnSXNQbGF5YWJsZScgLCAndHJ1ZScgKQogIGVsc2UgOgogICBvT28wIC4gc2V0UHJvcGVydHkgKCAnSXNQbGF5YWJsZScgLCAndHJ1ZScgKQogZWxzZSA6CiAgT08gKCAnTk9UIHNldHRpbmcgaXNwbGF5YWJsZScgKyB1cmwgKQogIGlmIDkzIC0gOTM6IGlJaWkxSTExSTFJSTEgKyBpaWlpSWkxMWkgJSBJSQogaWYgc2hvd2NvbnRleHQgOgogIGlpSUkxMUkgPSBbIF0KICBpZiBzaG93Y29udGV4dCA9PSAnZmF2JyA6CiAgIGlpSUkxMUkgLiBhcHBlbmQgKAogKCAnUmVtb3ZlIGZyb20gUGF1bHMgV29ybGQgRmF2b3JpdGVzJyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTYmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApCiApCiAgZWxpZiBub3QgbmFtZSBpbiBJMUkxMUkxSTFJIDoKICAgaWlpMUlpSTFJMSA9ICgKICclcz9tb2RlPTUmbmFtZT0lcyZ1cmw9JXMmaWNvbmltYWdlPSVzJmZhbmFydD0lcyZmYXZfbW9kZT0wJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIGljb25pbWFnZSApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIGZhbmFydCApICkKICkKICAgaWYgcGxheWxpc3QgOgogICAgaWlpMUlpSTFJMSArPSAncGxheWxpc3Q9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBzdHIgKCBwbGF5bGlzdCApIC4gcmVwbGFjZSAoICcsJyAsICd8fCcgKSApCiAgIGlmIHJlZ2V4cyA6CiAgICBpaWkxSWlJMUkxICs9ICImcmVnZXhzPSIgKyByZWdleHMKICAgaWlJSTExSSAuIGFwcGVuZCAoICggJ0FkZCB0byBQYXVscyBXb3JsZCBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzKScgJSBpaWkxSWlJMUkxICkgKQogIG9PbzAgLiBhZGRDb250ZXh0TWVudUl0ZW1zICggaWlJSTExSSApCiAgaWYgNjQgLSA2NDogSUkgLyBPMCAqIG9vMDAwICogSUkKIGlmIG5vdCBwbGF5bGlzdCBpcyBOb25lIDoKICBpZiBpMTEgLiBnZXRTZXR0aW5nICggJ2FkZF9wbGF5bGlzdCcgKSA9PSAiZmFsc2UiIDoKICAgTzAwb28gPSBuYW1lIC4gc3BsaXQgKCAnKSAnICkgWyAxIF0KICAgT29PbzBvTzBvID0gWwogKCAnUGxheSAnICsgTzAwb28gKyAnIFBsYXlMaXN0JyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTEzJm5hbWU9JXMmcGxheWxpc3Q9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggTzAwb28gKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBzdHIgKCBwbGF5bGlzdCApIC4gcmVwbGFjZSAoICcsJyAsICd8fCcgKSApICkgKQogXQogICBvT28wIC4gYWRkQ29udGV4dE1lbnVJdGVtcyAoIE9vT28wb08wbyApCiBpMWlJID0geGJtY3BsdWdpbiAuIGFkZERpcmVjdG9yeUl0ZW0gKCBoYW5kbGUgPSBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB1cmwgPSBpSTEgLCBsaXN0aXRlbSA9IG9PbzAgLCB0b3RhbEl0ZW1zID0gdG90YWwgKQogcmV0dXJuIGkxaUkKIGlmIDU0IC0gNTQ6IE8wb28wT08wICUgaTFJSWkgKyBvME9PTwpkZWYgSWlpSWlJaTExMWlJMSAoIHVybCAsIG5hbWUgLCBpY29uaW1hZ2UgLCBzZXRyZXNvbHZlZCA9IFRydWUgKSA6CiBpZiBzZXRyZXNvbHZlZCA6CiAgb09vMCA9IHhibWNndWkgLiBMaXN0SXRlbSAoIG5hbWUgLCBpY29uSW1hZ2UgPSBpY29uaW1hZ2UgKQogIG9PbzAgLiBzZXRJbmZvICggdHlwZSA9ICdWaWRlbycgLCBpbmZvTGFiZWxzID0geyAnVGl0bGUnIDogbmFtZSB9ICkKICBvT28wIC4gc2V0UHJvcGVydHkgKCAiSXNQbGF5YWJsZSIgLCAidHJ1ZSIgKQogIG9PbzAgLiBzZXRQYXRoICggc3RyICggdXJsICkgKQogIHhibWNwbHVnaW4gLiBzZXRSZXNvbHZlZFVybCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIFRydWUgLCBvT28wICkKIGVsc2UgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICdYQk1DLlJ1blBsdWdpbignICsgdXJsICsgJyknICkKICBpZiA4OCAtIDg4OiBJSWlJMUkxMWkxMSAlIGlpaWlJaTExaSArIE9vMG9vTzBvbzBvTwogIGlmIDggLSA4OiBpMTFpSWlpSWlpIC8gaTExaSArIElpSWkxMWlJSWkxSWkgKiBPMDBvT29Pb08wbzBPICUgT28wb29PMG9vMG9PIC4gaWlpMUkxSQogIGlmIDYgLSA2OiBPbzBvb08wb28wb08gJSBJSWlJMUkxMWkxMSAuIElJaUkxSTExaTExIC0gbzBPT08gLyBpaWkxSTFJIC4gaTFJSWkKICBpZiA5OSAtIDk5OiBvbzAwMCAuIEkxaTFpSTFpCmRlZiBpaWlpMTExSUkgKCBsaW5rICkgOgogaWkxaWkxMUlJSWlpSSA9IHVybGxpYiAuIHVybG9wZW4gKCBsaW5rICkKIE8wb08gPSBpaTFpaTExSUlJaWlJIC4gcmVhZCAoICkKIGlpMWlpMTFJSUlpaUkgLiBjbG9zZSAoICkKIElpSUlJID0gTzBvTyAuIHNwbGl0ICggIkpldHp0IiApCiBJSWlJMTExMWkxID0gSWlJSUkgWyAxIF0gLiBzcGxpdCAoICdwcm9ncmFtbS9kZXRhaWwucGhwP2NvbnN0X2lkPScgKQogaWkxaWkxSTFJSWkxID0gSUlpSTExMTFpMSBbIDEgXSAuIHNwbGl0ICggJzxiciAvPjxhIGhyZWY9Ii8nICkKIG9PT29vMCA9IGlpMWlpMUkxSUlpMSBbIDAgXSBbIDQwIDogbGVuICggaWkxaWkxSTFJSWkxIFsgMCBdICkgXQogSUlJSWlJMTFJID0gSUlpSTExMTFpMSBbIDIgXSAuIHNwbGl0ICggIjwvYT48L3A+PC9kaXY+IiApCiBpaWlJMTFpSUlpMSA9IElJSUlpSTExSSBbIDAgXSBbIDE3IDogbGVuICggSUlJSWlJMTFJIFsgMCBdICkgXQogaWlpSTExaUlJaTEgPSBpaWlJMTFpSUlpMSAuIGVuY29kZSAoICd1dGYtOCcgKQogcmV0dXJuICIgIC0gIiArIGlpaUkxMWlJSWkxICsgIiAtICIgKyBvT09vbzAKIGlmIDcyIC0gNzI6IE8wb28wT08wICogSWkxSQogaWYgNjcgLSA2NzogaTFJSWkKZGVmIG9vMDBvTzBvICggdXJsICwgcmVnZXggKSA6CiBpaTFJID0gb09vTyAoIHVybCApCiB0cnkgOgogIGlpSWlJSUlpaUkgPSByZSAuIGZpbmRhbGwgKCByZWdleCAsIGlpMUkgKSBbIDAgXQogIHJldHVybiBpaUlpSUlJaWlJCiBleGNlcHQgOgogIE9PICggJ3JlZ2V4IGZhaWxlZCcgKQogIE9PICggcmVnZXggKQogIHJldHVybgogIGlmIDUgLSA1OiBpMTFpIC4gT29vb29vb29PTwogIGlmIDU3IC0gNTc6IG9Pb29Pb08wT28wTwp4Ym1jcGx1Z2luIC4gc2V0Q29udGVudCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsICdtb3ZpZXMnICkKaWYgMzUgLSAzNTogT29vb29vb29PTyAtIEkxaTFpSTFpIC8gTzBPCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9VTlNPUlRFRCApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9MQUJFTCApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9EQVRFICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIHhibWNwbHVnaW4gLiBhZGRTb3J0TWV0aG9kICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgeGJtY3BsdWdpbiAuIFNPUlRfTUVUSE9EX0dFTlJFICkKZXhjZXB0IDoKIHBhc3MKIGlmIDUwIC0gNTA6IG9vMDAwCm9PMDAwbyA9IE9vbzAgKCApCmlmIDMzIC0gMzM6IGlpaTFJMUkKaWkxaWkxMUlJSWlpSSA9IE5vbmUKTzAwTzBvT08wME8wMCA9IE5vbmUKTzBPbzAgPSBOb25lCmkxMWlpMWlpMTFpID0gTm9uZQppMUlJMTFJSTEgPSBOb25lCm9PTzAwb09PID0gaUkxMQppMTFpaTFpaTExaSA9IE5vbmUKb09vMDBPb08wTyA9IE5vbmUKSTFJaTFJMSA9IE5vbmUKaWYgNjkgLSA2OTogaUlpaTFJMTFJMUlJMSAqIG9Pb29Pb08wT28wTyAtIE8wb28wT08wICsgTzAgKyBPMAp0cnkgOgogaWkxaWkxMUlJSWlpSSA9IHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIG9PMDAwbyBbICJ1cmwiIF0gKSAuIGRlY29kZSAoICd1dGYtOCcgKQpleGNlcHQgOgogcGFzcwp0cnkgOgogTzAwTzBvT08wME8wMCA9IHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIG9PMDAwbyBbICJuYW1lIiBdICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIGkxSUkxMUlJMSA9IHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIG9PMDAwbyBbICJpY29uaW1hZ2UiIF0gKQpleGNlcHQgOgogcGFzcwp0cnkgOgogb09PMDBvT08gPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBvTzAwMG8gWyAiZmFuYXJ0IiBdICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIE8wT28wID0gaW50ICggb08wMDBvIFsgIm1vZGUiIF0gKQpleGNlcHQgOgogcGFzcwp0cnkgOgogaTExaWkxaWkxMWkgPSBldmFsICggdXJsbGliIC4gdW5xdW90ZV9wbHVzICggb08wMDBvIFsgInBsYXlsaXN0IiBdICkgLiByZXBsYWNlICggJ3x8JyAsICcsJyApICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIG9PbzAwT29PME8gPSBpbnQgKCBvTzAwMG8gWyAiZmF2X21vZGUiIF0gKQpleGNlcHQgOgogcGFzcwp0cnkgOgogSTFJaTFJMSA9IG9PMDAwbyBbICJyZWdleHMiIF0KZXhjZXB0IDoKIHBhc3MKIGlmIDY1IC0gNjU6IEkxaTFpSTFpIC8gaTExaUlpaUlpaSAvIE8wTyAtIElpMUkKT08gKCAiTW9kZTogIiArIHN0ciAoIE8wT28wICkgKQppZiBub3QgaWkxaWkxMUlJSWlpSSBpcyBOb25lIDoKIE9PICggIlVSTDogIiArIHN0ciAoIGlpMWlpMTFJSUlpaUkgLiBlbmNvZGUgKCAndXRmLTgnICkgKSApCk9PICggIk5hbWU6ICIgKyBzdHIgKCBPMDBPMG9PTzAwTzAwICkgKQppZiA5IC0gOTogb09vb09vTzBPbzBPIC8gSTFpMWlJMWkgLSBJSWlJMUkxMWkxMSAqIGlJaWkxSTExSTFJSTEKaWYgTzBPbzAgPT0gTm9uZSA6CiBPTyAoICJJbmRleCIgKQogb28gKCApCiBpZiA4NiAtIDg2OiBpMTFpICsgSUkgKyBPbzBvb08wb28wb08KZWxpZiBPME9vMCA9PSAxIDoKIE9PICggImdldERhdGEiICkKIE8wbzBPbyAoIGlpMWlpMTFJSUlpaUkgLCBvT08wMG9PTyApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgOSAtIDk6IElJICsgaTExaSAlIElJICUgT28wb29PMG9vMG9PICsgaUlpaTFJMTFJMUlJMQplbGlmIE8wT28wID09IDIgOgogT08gKCAiZ2V0Q2hhbm5lbEl0ZW1zIiApCiBJMUlpMTFpICggTzAwTzBvT08wME8wMCAsIGlpMWlpMTFJSUlpaUkgLCBvT08wMG9PTyApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgNTkgLSA1OTogaTFJSWkKZWxpZiBPME9vMCA9PSAzIDoKIE9PICggImdldFN1YkNoYW5uZWxJdGVtcyIgKQogb29pSWkxICggTzAwTzBvT08wME8wMCAsIGlpMWlpMTFJSUlpaUkgLCBvT08wMG9PTyApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgNDggLSA0ODogTzAgKiBPMDBvT29Pb08wbzBPICogTzBPIC4gTzBPICogaWlpMUkxSSAtIE8wMG9Pb09vTzBvME8KZWxpZiBPME9vMCA9PSA0IDoKIE9PICggImdldEZhdm9yaXRlcyIgKQogT29Pb09vMCAoICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiAxNCAtIDE0OiBvME9PTyArIGkxMWlJaWlJaWkKZWxpZiBPME9vMCA9PSA1IDoKIE9PICggImFkZEZhdm9yaXRlIiApCiB0cnkgOgogIE8wME8wb09PMDBPMDAgPSBPMDBPMG9PTzAwTzAwIC4gc3BsaXQgKCAnXFwgJyApIFsgMSBdCiBleGNlcHQgOgogIHBhc3MKIHRyeSA6CiAgTzAwTzBvT08wME8wMCA9IE8wME8wb09PMDBPMDAgLiBzcGxpdCAoICcgIC0gJyApIFsgMCBdCiBleGNlcHQgOgogIHBhc3MKIG9vMDAwMG8gKCBPMDBPMG9PTzAwTzAwICwgaWkxaWkxMUlJSWlpSSAsIGkxSUkxMUlJMSAsIG9PTzAwb09PICwgb09vMDBPb08wTyApCiBpZiA4MyAtIDgzOiBvME9PTyAvIGkxMWlJaWlJaWkgKyBpMTFpIC4gTzBvbzBPTzAgKiBJaTFJICsgT28wb29PMG9vMG9PCmVsaWYgTzBPbzAgPT0gNiA6CiBPTyAoICJybUZhdm9yaXRlIiApCiB0cnkgOgogIE8wME8wb09PMDBPMDAgPSBPMDBPMG9PTzAwTzAwIC4gc3BsaXQgKCAnXFwgJyApIFsgMSBdCiBleGNlcHQgOgogIHBhc3MKIHRyeSA6CiAgTzAwTzBvT08wME8wMCA9IE8wME8wb09PMDBPMDAgLiBzcGxpdCAoICcgIC0gJyApIFsgMCBdCiBleGNlcHQgOgogIHBhc3MKIG9vb29Pb08wTyAoIE8wME8wb09PMDBPMDAgKQogaWYgNDIgLSA0MjogaTFJSWkgJSBpMTFpIC4gSUkKZWxpZiBPME9vMCA9PSA3IDoKIE9PICggImFkZFNvdXJjZSIgKQogTzBvbzBPTzBvT09PbyAoIGlpMWlpMTFJSUlpaUkgKQogaWYgNyAtIDc6IG8wT09PIC0gaWlpaUlpMTFpICogSWkxSSArIElpSWkxMWlJSWkxSWkgLiBvME9PTwplbGlmIE8wT28wID09IDggOgogT08gKCAicm1Tb3VyY2UiICkKIGlJSSAoIE8wME8wb09PMDBPMDAgKQogaWYgODUgLSA4NTogTzAKZWxpZiBPME9vMCA9PSA5IDoKIE9PICggImRvd25sb2FkX2ZpbGUiICkKIElpaWlJICggTzAwTzBvT08wME8wMCAsIGlpMWlpMTFJSUlpaUkgKQogaWYgMzIgLSAzMjogT29vb29vb29PTyAuIE8wTyAvIElJaUkxSTExaTExICogSWlJaTExaUlJaTFJaSAvIElpSWkxMWlJSWkxSWkgKiBPMDBvT29Pb08wbzBPCmVsaWYgTzBPbzAgPT0gMTAgOgogT08gKCAiZ2V0Q29tbXVuaXR5U291cmNlcyIgKQogSTExT29Pb09PT29PTyAoICkKIGlmIDE5IC0gMTk6IE8wMG9Pb09vTzBvME8KZWxpZiBPME9vMCA9PSAxMSA6CiBPTyAoICJhZGRTb3VyY2UiICkKIE8wb28wT08wb09PT28gKCBpaTFpaTExSUlJaWlJICkKIGlmIDU1IC0gNTU6IElpMUkgJSBJaTFJIC8gTzAgJSBPMG9vME9PMCAtIElpSWkxMWlJSWkxSWkgLiBJSWlJMUkxMWkxMQplbGlmIE8wT28wID09IDEyIDoKIE9PICggInNldFJlc29sdmVkVXJsIiApCiBpZiBub3QgaWkxaWkxMUlJSWlpSSAuIHN0YXJ0c3dpdGggKCAicGx1Z2luOi8vcGx1Z2luIiApIG9yIG5vdCBhbnkgKCB4IGluIGlpMWlpMTFJSUlpaUkgZm9yIHggaW4gT28gKSA6CiAgaWlJaUlJSWlpSSA9IHhibWNndWkgLiBMaXN0SXRlbSAoIHBhdGggPSBpaTFpaTExSUlJaWlJICkKICB4Ym1jcGx1Z2luIC4gc2V0UmVzb2x2ZWRVcmwgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCBUcnVlICwgaWlJaUlJSWlpSSApCiBlbHNlIDoKICBwcmludCAnTm90IHNldHRpbmcgc2V0UmVzb2x2ZWRVcmwnCiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ1hCTUMuUnVuUGx1Z2luKCcgKyBpaTFpaTExSUlJaWlJICsgJyknICkKICBpZiA0OSAtIDQ5OiBpSWlpMUkxMUkxSUkxICogaTFJSWkgLiBPb29vb29vb09PCiAgaWYgOTAgLSA5MDogSWlJaTExaUlJaTFJaSAlIG8wT09PIC0gaUlpaTFJMTFJMUlJMSAlIG9vMDAwCmVsaWYgTzBPbzAgPT0gMTMgOgogT08gKCAicGxheV9wbGF5bGlzdCIgKQogSTFJSUlJaWlpMWkgKCBPMDBPMG9PTzAwTzAwICwgaTExaWkxaWkxMWkgKQogaWYgOCAtIDg6IG9vMDAwICogSUlpSTFJMTFpMTEgLyBPbzBvb08wb28wb08gJSBPMDBvT29Pb08wbzBPIC0gb09vb09vTzBPbzBPCmVsaWYgTzBPbzAgPT0gMTQgOgogT08gKCAiZ2V0X3htbF9kYXRhYmFzZSIgKQogaUlpaSAoIGlpMWlpMTFJSUlpaUkgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDcxIC0gNzE6IE8wb28wT08wCmVsaWYgTzBPbzAgPT0gMTUgOgogT08gKCAiYnJvd3NlX3htbF9kYXRhYmFzZSIgKQogaUlpaSAoIGlpMWlpMTFJSUlpaUkgLCBUcnVlICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiAyMyAtIDIzOiBpMUlJaSAuIGlJaWkxSTExSTFJSTEgLiBJaTFJIC4gTzAgJSBPMDBvT29Pb08wbzBPICUgaTExaUlpaUlpaQplbGlmIE8wT28wID09IDE2IDoKIE9PICggImJyb3dzZV9jb21tdW5pdHkiICkKIEkxMU9vT29PT09vT08gKCBUcnVlICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiAxMSAtIDExOiBPMCAtIGkxMWkgLiBJaTFJIC4gTzAwb09vT29PMG8wTyAlIEkxaTFpSTFpCmVsaWYgTzBPbzAgPT0gMTcgOgogT08gKCAiZ2V0UmVnZXhQYXJzZWQiICkKIGlpMWlpMTFJSUlpaUkgLCBvT29PMCA9IG9vT2lpICggSTFJaTFJMSAsIGlpMWlpMTFJSUlpaUkgKQogaWYgaWkxaWkxMUlJSWlpSSA6CiAgSWlpSWlJaTExMWlJMSAoIGlpMWlpMTFJSUlpaUkgLCBPMDBPMG9PTzAwTzAwICwgaTFJSTExSUkxICwgb09vTzAgKQogZWxzZSA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKFBhdWxzIFdvcmxkLEZhaWxlZCB0byBleHRyYWN0IHJlZ2V4LiAtICIgKyAidGhpcyIgKyAiLDQwMDAsIiArIEkxSWlJaWlJSUkgKyAiKSIgKQplbGlmIE8wT28wID09IDE4IDoKIE9PICggInlvdXR1YmVkbCIgKQogdHJ5IDoKICBpbXBvcnQgeW91dHViZWRsCiBleGNlcHQgRXhjZXB0aW9uIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oUGF1bHMgV29ybGQsUGxlYXNlIFtDT0xPUiBibHVlXWluc3RhbGwgWW91dHViZS1kbFsvQ09MT1JdIG1vZHVsZSAsMTAwMDAsIiAiKSIgKQogSTFJMTFpID0geW91dHViZWRsIC4gc2luZ2xlX1lEICggaWkxaWkxMUlJSWlpSSApCiBJaWlJaUlpMTExaUkxICggSTFJMTFpICwgTzAwTzBvT08wME8wMCAsIGkxSUkxMUlJMSApCmVsaWYgTzBPbzAgPT0gMTkgOgogT08gKCAiR2VuZXNpc2NvbW1vbnJlc29sdmVycyIgKQogSWlpSWlJaTExMWlJMSAoIE9vME8wICggaWkxaWkxMUlJSWlpSSApICwgTzAwTzBvT08wME8wMCAsIGkxSUkxMUlJMSAsIFRydWUgKQogaWYgMjEgLSAyMTogSUlpSTFJMTFpMTEgLyBPMG9vME9PMCAuIEkxaTFpSTFpICogT29vb29vb29PTyArIGlpaTFJMUkgLSBpMUlJaQplbGlmIE8wT28wID09IDIxIDoKIE9PICggImRvd25sb2FkIGN1cnJlbnQgZmlsZSB1c2luZyB5b3V0dWJlLWRsIHNlcnZpY2UiICkKIE9PME8wME9vT09PbyAoICcnICwgTzAwTzBvT08wME8wMCAsICd2aWRlbycgKQplbGlmIE8wT28wID09IDIzIDoKIE9PICggImdldCBpbmZvIHRoZW4gZG93bmxvYWQiICkKIE9PME8wME9vT09PbyAoIGlpMWlpMTFJSUlpaUkgLCBPMDBPMG9PTzAwTzAwICwgJ3ZpZGVvJyApCmVsaWYgTzBPbzAgPT0gMjQgOgogT08gKCAiQXVkaW8gb25seSB5b3V0dWJlIGRvd25sb2FkIiApCiBPTzBPMDBPb09PT28gKCBpaTFpaTExSUlJaWlJICwgTzAwTzBvT08wME8wMCAsICdhdWRpbycgKQplbGlmIE8wT28wID09IDI1IDoKIE9PICggIllvdVR1YmUvRE1vdGlvbiIgKQogaTFJSUlpMTExSWkgKCBpaTFpaTExSUlJaWlJICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCmVsaWYgTzBPbzAgPT0gMjYgOgogT08gKCAiWW91VHViZS9ETW90aW9uIEZyb20gU2VhcmNoIEhpc3RvcnkiICkKIE8wME8wb09PMDBPMDAgPSBPMDBPMG9PTzAwTzAwIC4gc3BsaXQgKCAnOicgKQogaTFJSUlpMTExSWkgKCBpaTFpaTExSUlJaWlJICwgc2VhcmNoX3Rlcm0gPSBPMDBPMG9PTzAwTzAwIFsgMSBdICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCmVsaWYgTzBPbzAgPT0gMjcgOgogT08gKCAiVXNpbmcgSU1EQiBpZCB0byBwbGF5IGluIFB1bHNhciIgKQogb29vb28wTzAgPSBpMUlJSWkxMTFJaSAoIGlpMWlpMTFJSUlpaUkgKQogeGJtYyAuIFBsYXllciAoICkgLiBwbGF5ICggb29vb28wTzAgKQplbGlmIE8wT28wID09IDMwIDoKIG9vb09vME9PT29vMCAoIE8wME8wb09PMDBPMDAgLCBpaTFpaTExSUlJaWlJICwgaTFJSTExSUkxICwgb09PMDBvT08gKQogaWYgMTAgLSAxMDogaWlpMUkxSSAtIElJaUkxSTExaTExCmVsaWYgTzBPbzAgPT0gNDAgOgogU2VhcmNoQ2hhbm5lbHMgKCApCiBvb08wb09Pb29PbzAgKCApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgNTkgLSA1OTogT29vb29vb29PTyAqIElJaUkxSTExaTExICsgaTFJSWkKZWxpZiBPME9vMCA9PSA0MSA6CiBJaTFpSWlJSTFpaTEgKCBpaTFpaTExSUlJaWlJICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiAyMyAtIDIzOiBJSQplbGlmIE8wT28wID09IDUzIDoKIE9PICggIlJlcXVlc3RpbmcgSlNPTi1SUEMgSXRlbXMiICkKIG8wMG9vT29PMCAoIGlpMWlpMTFJSUlpaUkgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIyBkZDY3OGZhYWU5YWMxNjdiYzgzYWJmNzhlNWNiMmYzZjA2ODhkM2EzCg==]')